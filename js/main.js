jQuery.easing["jswing"]=jQuery.easing["swing"];jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,i,n,r){return jQuery.easing[jQuery.easing.def](t,e,i,n,r)},easeInQuad:function(t,e,i,n,r){return n*(e/=r)*e+i},easeOutQuad:function(t,e,i,n,r){return-n*(e/=r)*(e-2)+i},easeInOutQuad:function(t,e,i,n,r){if((e/=r/2)<1)return n/2*e*e+i;return-n/2*(--e*(e-2)-1)+i},easeInCubic:function(t,e,i,n,r){return n*(e/=r)*e*e+i},easeOutCubic:function(t,e,i,n,r){return n*((e=e/r-1)*e*e+1)+i},easeInOutCubic:function(t,e,i,n,r){if((e/=r/2)<1)return n/2*e*e*e+i;return n/2*((e-=2)*e*e+2)+i},easeInQuart:function(t,e,i,n,r){return n*(e/=r)*e*e*e+i},easeOutQuart:function(t,e,i,n,r){return-n*((e=e/r-1)*e*e*e-1)+i},easeInOutQuart:function(t,e,i,n,r){if((e/=r/2)<1)return n/2*e*e*e*e+i;return-n/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(t,e,i,n,r){return n*(e/=r)*e*e*e*e+i},easeOutQuint:function(t,e,i,n,r){return n*((e=e/r-1)*e*e*e*e+1)+i},easeInOutQuint:function(t,e,i,n,r){if((e/=r/2)<1)return n/2*e*e*e*e*e+i;return n/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(t,e,i,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+i},easeOutSine:function(t,e,i,n,r){return n*Math.sin(e/r*(Math.PI/2))+i},easeInOutSine:function(t,e,i,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+i},easeInExpo:function(t,e,i,n,r){return e==0?i:n*Math.pow(2,10*(e/r-1))+i},easeOutExpo:function(t,e,i,n,r){return e==r?i+n:n*(-Math.pow(2,-10*e/r)+1)+i},easeInOutExpo:function(t,e,i,n,r){if(e==0)return i;if(e==r)return i+n;if((e/=r/2)<1)return n/2*Math.pow(2,10*(e-1))+i;return n/2*(-Math.pow(2,-10*--e)+2)+i},easeInCirc:function(t,e,i,n,r){return-n*(Math.sqrt(1-(e/=r)*e)-1)+i},easeOutCirc:function(t,e,i,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+i},easeInOutCirc:function(t,e,i,n,r){if((e/=r/2)<1)return-n/2*(Math.sqrt(1-e*e)-1)+i;return n/2*(Math.sqrt(1-(e-=2)*e)+1)+i},easeInElastic:function(t,e,i,n,r){var s=1.70158;var o=0;var a=n;if(e==0)return i;if((e/=r)==1)return i+n;if(!o)o=r*.3;if(a<Math.abs(n)){a=n;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(n/a);return-(a*Math.pow(2,10*(e-=1))*Math.sin((e*r-s)*(2*Math.PI)/o))+i},easeOutElastic:function(t,e,i,n,r){var s=1.70158;var o=0;var a=n;if(e==0)return i;if((e/=r)==1)return i+n;if(!o)o=r*.3;if(a<Math.abs(n)){a=n;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(n/a);return a*Math.pow(2,-10*e)*Math.sin((e*r-s)*(2*Math.PI)/o)+n+i},easeInOutElastic:function(t,e,i,n,r){var s=1.70158;var o=0;var a=n;if(e==0)return i;if((e/=r/2)==2)return i+n;if(!o)o=r*(.3*1.5);if(a<Math.abs(n)){a=n;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(n/a);if(e<1)return-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e*r-s)*(2*Math.PI)/o))+i;return a*Math.pow(2,-10*(e-=1))*Math.sin((e*r-s)*(2*Math.PI)/o)*.5+n+i},easeInBack:function(t,e,i,n,r,s){if(s==undefined)s=1.70158;return n*(e/=r)*e*((s+1)*e-s)+i},easeOutBack:function(t,e,i,n,r,s){if(s==undefined)s=1.70158;return n*((e=e/r-1)*e*((s+1)*e+s)+1)+i},easeInOutBack:function(t,e,i,n,r,s){if(s==undefined)s=1.70158;if((e/=r/2)<1)return n/2*(e*e*(((s*=1.525)+1)*e-s))+i;return n/2*((e-=2)*e*(((s*=1.525)+1)*e+s)+2)+i},easeInBounce:function(t,e,i,n,r){return n-jQuery.easing.easeOutBounce(t,r-e,0,n,r)+i},easeOutBounce:function(t,e,i,n,r){if((e/=r)<1/2.75){return n*(7.5625*e*e)+i}else if(e<2/2.75){return n*(7.5625*(e-=1.5/2.75)*e+.75)+i}else if(e<2.5/2.75){return n*(7.5625*(e-=2.25/2.75)*e+.9375)+i}else{return n*(7.5625*(e-=2.625/2.75)*e+.984375)+i}},easeInOutBounce:function(t,e,i,n,r){if(e<r/2)return jQuery.easing.easeInBounce(t,e*2,0,n,r)*.5+i;return jQuery.easing.easeOutBounce(t,e*2-r,0,n,r)*.5+n*.5+i}});(function(t,e,i){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)};var r=function(){var n={};var r=e.createElement("div").style;var s=function(){var t=["t","webkitT","MozT","msT","OT"],e,i=0,n=t.length;for(;i<n;i++){e=t[i]+"ransform";if(e in r)return t[i].substr(0,t[i].length-1)}return false}();function o(t){if(s===false)return false;if(s==="")return t;return s+t.charAt(0).toUpperCase()+t.substr(1)}n.getTime=Date.now||function l(){return(new Date).getTime()};n.extend=function(t,e){for(var i in e){t[i]=e[i]}};n.addEvent=function(t,e,i,n){t.addEventListener(e,i,!!n)};n.removeEvent=function(t,e,i,n){t.removeEventListener(e,i,!!n)};n.momentum=function(t,e,n,r,s,o){var a=t-e,l=i.abs(a)/n,c,u;o=o===undefined?6e-4:o;c=t+l*l/(2*o)*(a<0?-1:1);u=l/o;if(c<r){c=s?r-s/2.5*(l/8):r;a=i.abs(c-t);u=a/l}else if(c>0){c=s?s/2.5*(l/8):0;a=i.abs(t)+c;u=a/l}return{destination:i.round(c),duration:u}};var a=o("transform");n.extend(n,{hasTransform:a!==false,hasPerspective:o("perspective")in r,hasTouch:"ontouchstart"in t,hasPointer:navigator.msPointerEnabled,hasTransition:o("transition")in r});n.isBadAndroid=/Android /.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion);n.extend(n.style={},{transform:a,transitionTimingFunction:o("transitionTimingFunction"),transitionDuration:o("transitionDuration"),transitionDelay:o("transitionDelay"),transformOrigin:o("transformOrigin")});n.hasClass=function(t,e){var i=new RegExp("(^|\\s)"+e+"(\\s|$)");return i.test(t.className)};n.addClass=function(t,e){if(n.hasClass(t,e)){return}var i=t.className.split(" ");i.push(e);t.className=i.join(" ")};n.removeClass=function(t,e){if(!n.hasClass(t,e)){return}var i=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(i," ")};n.offset=function(t){var e=-t.offsetLeft,i=-t.offsetTop;while(t=t.offsetParent){e-=t.offsetLeft;i-=t.offsetTop}return{left:e,top:i}};n.preventDefaultException=function(t,e){for(var i in e){if(e[i].test(t[i])){return true}}return false};n.extend(n.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});n.extend(n.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return i.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var e=4;return(t=t-1)*t*((e+1)*t+e)+1}},bounce:{style:"",fn:function(t){if((t/=1)<1/2.75){return 7.5625*t*t}else if(t<2/2.75){return 7.5625*(t-=1.5/2.75)*t+.75}else if(t<2.5/2.75){return 7.5625*(t-=2.25/2.75)*t+.9375}else{return 7.5625*(t-=2.625/2.75)*t+.984375}}},elastic:{style:"",fn:function(t){var e=.22,n=.4;if(t===0){return 0}if(t==1){return 1}return n*i.pow(2,-10*t)*i.sin((t-e/4)*(2*i.PI)/e)+1}}});n.tap=function(t,i){var n=e.createEvent("Event");n.initEvent(i,true,true);n.pageX=t.pageX;n.pageY=t.pageY;t.target.dispatchEvent(n)};n.click=function(t){var i=t.target,n;if(!/(SELECT|INPUT|TEXTAREA)/i.test(i.tagName)){n=e.createEvent("MouseEvents");n.initMouseEvent("click",true,true,t.view,1,i.screenX,i.screenY,i.clientX,i.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null);n._constructed=true;i.dispatchEvent(n)}};return n}();function s(t,i){this.wrapper=typeof t=="string"?e.querySelector(t):t;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={resizeScrollbars:true,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:true,useTransition:true,useTransform:true};for(var n in i){this.options[n]=i[n]}this.translateZ=this.options.HWCompositing&&r.hasPerspective?" translateZ(0)":"";this.options.useTransition=r.hasTransition&&this.options.useTransition;this.options.useTransform=r.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=="vertical"?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=="horizontal"?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=="string"?r.ease[this.options.bounceEasing]||r.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap="tap"}if(this.options.shrinkScrollbars=="scale"){this.options.useTransition=false}this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;if(this.options.probeType==3){this.options.useTransition=false}this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}s.prototype={version:"5.1.1",_init:function(){this._initEvents();if(this.options.scrollbars||this.options.indicators){this._initIndicators()}if(this.options.mouseWheel){this._initWheel()}if(this.options.snap){this._initSnap()}if(this.options.keyBindings){this._initKeys()}},destroy:function(){this._initEvents(true);this._execEvent("destroy")},_transitionEnd:function(t){if(t.target!=this.scroller||!this.isInTransition){return}this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;this._execEvent("scrollEnd")}},_start:function(t){if(r.eventType[t.type]!=1){if(t.button!==0){return}}if(!this.enabled||this.initiated&&r.eventType[t.type]!==this.initiated){return}if(this.options.preventDefault&&!r.isBadAndroid&&!r.preventDefaultException(t.target,this.options.preventDefaultException)){t.preventDefault()}var e=t.touches?t.touches[0]:t,n;this.initiated=r.eventType[t.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.startTime=r.getTime();if(this.options.useTransition&&this.isInTransition){this.isInTransition=false;n=this.getComputedPosition();this._translate(i.round(n.x),i.round(n.y));this._execEvent("scrollEnd")}else if(!this.options.useTransition&&this.isAnimating){this.isAnimating=false;this._execEvent("scrollEnd")}this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=e.pageX;this.pointY=e.pageY;this._execEvent("beforeScrollStart")},_move:function(t){if(!this.enabled||r.eventType[t.type]!==this.initiated){return}if(this.options.preventDefault){t.preventDefault()}var e=t.touches?t.touches[0]:t,n=e.pageX-this.pointX,s=e.pageY-this.pointY,o=r.getTime(),a,l,c,u;this.pointX=e.pageX;this.pointY=e.pageY;this.distX+=n;this.distY+=s;c=i.abs(this.distX);u=i.abs(this.distY);if(o-this.endTime>300&&(c<10&&u<10)){return}if(!this.directionLocked&&!this.options.freeScroll){if(c>u+this.options.directionLockThreshold){this.directionLocked="h"}else if(u>=c+this.options.directionLockThreshold){this.directionLocked="v"}else{this.directionLocked="n"}}if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical"){t.preventDefault()}else if(this.options.eventPassthrough=="horizontal"){this.initiated=false;return}s=0}else if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal"){t.preventDefault()}else if(this.options.eventPassthrough=="vertical"){this.initiated=false;return}n=0}n=this.hasHorizontalScroll?n:0;s=this.hasVerticalScroll?s:0;a=this.x+n;l=this.y+s;if(a>0||a<this.maxScrollX){a=this.options.bounce?this.x+n/3:a>0?0:this.maxScrollX}if(l>0||l<this.maxScrollY){l=this.options.bounce?this.y+s/3:l>0?0:this.maxScrollY}this.directionX=n>0?-1:n<0?1:0;this.directionY=s>0?-1:s<0?1:0;if(!this.moved){this._execEvent("scrollStart")}this.moved=true;this._translate(a,l);if(o-this.startTime>300){this.startTime=o;this.startX=this.x;this.startY=this.y;if(this.options.probeType==1){this._execEvent("scroll")}}if(this.options.probeType>1){this._execEvent("scroll")}},_end:function(t){if(!this.enabled||r.eventType[t.type]!==this.initiated){return}if(this.options.preventDefault&&!r.preventDefaultException(t.target,this.options.preventDefaultException)){t.preventDefault()}var e=t.changedTouches?t.changedTouches[0]:t,n,s,o=r.getTime()-this.startTime,a=i.round(this.x),l=i.round(this.y),c=i.abs(a-this.startX),u=i.abs(l-this.startY),h=0,f="";this.isInTransition=0;this.initiated=0;this.endTime=r.getTime();if(this.resetPosition(this.options.bounceTime)){return}this.scrollTo(a,l);if(!this.moved){if(this.options.tap){r.tap(t,this.options.tap)}if(this.options.click){r.click(t)}this._execEvent("scrollCancel");return}if(this._events.flick&&o<200&&c<100&&u<100){this._execEvent("flick");return}if(this.options.momentum&&o<300){n=this.hasHorizontalScroll?r.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:a,duration:0};s=this.hasVerticalScroll?r.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:l,duration:0};a=n.destination;l=s.destination;h=i.max(n.duration,s.duration);this.isInTransition=1}if(this.options.snap){var d=this._nearestSnap(a,l);this.currentPage=d;h=this.options.snapSpeed||i.max(i.max(i.min(i.abs(a-d.x),1e3),i.min(i.abs(l-d.y),1e3)),300);a=d.x;l=d.y;this.directionX=0;this.directionY=0;f=this.options.bounceEasing}if(a!=this.x||l!=this.y){if(a>0||a<this.maxScrollX||l>0||l<this.maxScrollY){f=r.ease.quadratic}this.scrollTo(a,l,h,f);return}this._execEvent("scrollEnd")},_resize:function(){var t=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,i=this.y;t=t||0;if(!this.hasHorizontalScroll||this.x>0){e=0}else if(this.x<this.maxScrollX){e=this.maxScrollX}if(!this.hasVerticalScroll||this.y>0){i=0}else if(this.y<this.maxScrollY){i=this.maxScrollY}if(e==this.x&&i==this.y){return false}this.scrollTo(e,i,t,this.options.bounceEasing);return true},disable:function(){this.enabled=false},enable:function(){this.enabled=true},refresh:function(){var t=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=r.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(t,e){if(!this._events[t]){this._events[t]=[]}this._events[t].push(e)},off:function(t,e){if(!this._events[t]){return}var i=this._events[t].indexOf(e);if(i>-1){this._events[t].splice(i,1)}},_execEvent:function(t){if(!this._events[t]){return}var e=0,i=this._events[t].length;if(!i){return}for(;e<i;e++){this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,i,n){t=this.x+t;e=this.y+e;i=i||0;this.scrollTo(t,e,i,n)},scrollTo:function(t,e,i,n){n=n||r.ease.circular;this.isInTransition=this.options.useTransition&&i>0;if(!i||this.options.useTransition&&n.style){this._transitionTimingFunction(n.style);this._transitionTime(i);this._translate(t,e)}else{this._animate(t,e,i,n.fn)}},scrollToElement:function(t,e,n,s,o){t=t.nodeType?t:this.scroller.querySelector(t);if(!t){return}var a=r.offset(t);a.left-=this.wrapperOffset.left;a.top-=this.wrapperOffset.top;if(n===true){n=i.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)}if(s===true){s=i.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)}a.left-=n||0;a.top-=s||0;a.left=a.left>0?0:a.left<this.maxScrollX?this.maxScrollX:a.left;a.top=a.top>0?0:a.top<this.maxScrollY?this.maxScrollY:a.top;e=e===undefined||e===null||e==="auto"?i.max(i.abs(this.x-a.left),i.abs(this.y-a.top)):e;this.scrollTo(a.left,a.top,e,o)},_transitionTime:function(t){t=t||0;this.scrollerStyle[r.style.transitionDuration]=t+"ms";if(!t&&r.isBadAndroid){this.scrollerStyle[r.style.transitionDuration]="0.001s"}if(this.indicators){for(var e=this.indicators.length;e--;){this.indicators[e].transitionTime(t)}}},_transitionTimingFunction:function(t){this.scrollerStyle[r.style.transitionTimingFunction]=t;if(this.indicators){for(var e=this.indicators.length;e--;){this.indicators[e].transitionTimingFunction(t)}}},_translate:function(t,e){if(this.options.useTransform){this.scrollerStyle[r.style.transform]="translate("+t+"px,"+e+"px)"+this.translateZ}else{t=i.round(t);e=i.round(e);this.scrollerStyle.left=t+"px";this.scrollerStyle.top=e+"px"}this.x=t;this.y=e;if(this.indicators){for(var n=this.indicators.length;n--;){this.indicators[n].updatePosition()}}},_initEvents:function(e){var i=e?r.removeEvent:r.addEvent,n=this.options.bindToWrapper?this.wrapper:t;i(t,"orientationchange",this);i(t,"resize",this);if(this.options.click){i(this.wrapper,"click",this,true)}if(!this.options.disableMouse){i(this.wrapper,"mousedown",this);i(n,"mousemove",this);i(n,"mousecancel",this);i(n,"mouseup",this)}if(r.hasPointer&&!this.options.disablePointer){i(this.wrapper,"MSPointerDown",this);i(n,"MSPointerMove",this);i(n,"MSPointerCancel",this);i(n,"MSPointerUp",this)}if(r.hasTouch&&!this.options.disableTouch){i(this.wrapper,"touchstart",this);i(n,"touchmove",this);i(n,"touchcancel",this);i(n,"touchend",this)}i(this.scroller,"transitionend",this);i(this.scroller,"webkitTransitionEnd",this);i(this.scroller,"oTransitionEnd",this);i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e=t.getComputedStyle(this.scroller,null),i,n;if(this.options.useTransform){e=e[r.style.transform].split(")")[0].split(", ");i=+(e[12]||e[4]);n=+(e[13]||e[5])}else{i=+e.left.replace(/[^-\d.]/g,"");n=+e.top.replace(/[^-\d.]/g,"")}return{x:i,y:n}},_initIndicators:function(){var t=this.options.interactiveScrollbars,e=typeof this.options.scrollbars!="string",i=[],n;var r=this;this.indicators=[];if(this.options.scrollbars){if(this.options.scrollY){n={el:o("v",t,this.options.scrollbars),interactive:t,defaultScrollbars:true,customStyle:e,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:false};this.wrapper.appendChild(n.el);i.push(n)}if(this.options.scrollX){n={el:o("h",t,this.options.scrollbars),interactive:t,defaultScrollbars:true,customStyle:e,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:false};this.wrapper.appendChild(n.el);i.push(n)}}if(this.options.indicators){i=i.concat(this.options.indicators)}for(var s=i.length;s--;){this.indicators.push(new a(this,i[s]))}function l(t){for(var e=r.indicators.length;e--;){t.call(r.indicators[e])}}if(this.options.fadeScrollbars){this.on("scrollEnd",function(){l(function(){this.fade()})});this.on("scrollCancel",function(){l(function(){this.fade()})});this.on("scrollStart",function(){l(function(){this.fade(1)})});this.on("beforeScrollStart",function(){l(function(){this.fade(1,true)})})}this.on("refresh",function(){l(function(){this.refresh()})});this.on("destroy",function(){l(function(){this.destroy()});delete this.indicators})},_initWheel:function(){r.addEvent(this.wrapper,"wheel",this);r.addEvent(this.wrapper,"mousewheel",this);r.addEvent(this.wrapper,"DOMMouseScroll",this);this.on("destroy",function(){r.removeEvent(this.wrapper,"wheel",this);r.removeEvent(this.wrapper,"mousewheel",this);r.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(!this.enabled){return}t.preventDefault();t.stopPropagation();var e,n,r,s,o=this;if(this.wheelTimeout===undefined){o._execEvent("scrollStart")}clearTimeout(this.wheelTimeout);this.wheelTimeout=setTimeout(function(){o._execEvent("scrollEnd");o.wheelTimeout=undefined},400);if("deltaX"in t){e=-t.deltaX;n=-t.deltaY}else if("wheelDeltaX"in t){e=t.wheelDeltaX/120*this.options.mouseWheelSpeed;n=t.wheelDeltaY/120*this.options.mouseWheelSpeed}else if("wheelDelta"in t){e=n=t.wheelDelta/120*this.options.mouseWheelSpeed}else if("detail"in t){e=n=-t.detail/3*this.options.mouseWheelSpeed}else{return}e*=this.options.invertWheelDirection;n*=this.options.invertWheelDirection;if(!this.hasVerticalScroll){e=n;n=0}if(this.options.snap){r=this.currentPage.pageX;s=this.currentPage.pageY;if(e>0){r--}else if(e<0){r++}if(n>0){s--}else if(n<0){s++}this.goToPage(r,s);return}r=this.x+i.round(this.hasHorizontalScroll?e:0);s=this.y+i.round(this.hasVerticalScroll?n:0);if(r>0){r=0}else if(r<this.maxScrollX){r=this.maxScrollX}if(s>0){s=0}else if(s<this.maxScrollY){s=this.maxScrollY}this.scrollTo(r,s,0);if(this.options.probeType>1){this._execEvent("scroll")}},_initSnap:function(){this.currentPage={};if(typeof this.options.snap=="string"){this.options.snap=this.scroller.querySelectorAll(this.options.snap)}this.on("refresh",function(){var t=0,e,n=0,r,s,o,a=0,l,c=this.options.snapStepX||this.wrapperWidth,u=this.options.snapStepY||this.wrapperHeight,h;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight){return}if(this.options.snap===true){s=i.round(c/2);o=i.round(u/2);while(a>-this.scrollerWidth){this.pages[t]=[];e=0;l=0;while(l>-this.scrollerHeight){this.pages[t][e]={x:i.max(a,this.maxScrollX),y:i.max(l,this.maxScrollY),width:c,height:u,cx:a-s,cy:l-o};l-=u;e++}a-=c;t++}}else{h=this.options.snap;e=h.length;r=-1;for(;t<e;t++){if(t===0||h[t].offsetLeft<=h[t-1].offsetLeft){n=0;r++}if(!this.pages[n]){this.pages[n]=[]}a=i.max(-h[t].offsetLeft,this.maxScrollX);l=i.max(-h[t].offsetTop,this.maxScrollY);s=a-i.round(h[t].offsetWidth/2);o=l-i.round(h[t].offsetHeight/2);this.pages[n][r]={x:a,y:l,width:h[t].offsetWidth,height:h[t].offsetHeight,cx:s,cy:o};if(a>this.maxScrollX){n++}}}this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);if(this.options.snapThreshold%1===0){this.snapThresholdX=this.options.snapThreshold;this.snapThresholdY=this.options.snapThreshold}else{this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold);this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold)}});this.on("flick",function(){var t=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,e){if(!this.pages.length){return{x:0,y:0,pageX:0,pageY:0}}var n=0,r=this.pages.length,s=0;if(i.abs(t-this.absStartX)<this.snapThresholdX&&i.abs(e-this.absStartY)<this.snapThresholdY){return this.currentPage}if(t>0){t=0}else if(t<this.maxScrollX){t=this.maxScrollX}if(e>0){e=0}else if(e<this.maxScrollY){e=this.maxScrollY}for(;n<r;n++){if(t>=this.pages[n][0].cx){t=this.pages[n][0].x;break}}r=this.pages[n].length;for(;s<r;s++){if(e>=this.pages[0][s].cy){e=this.pages[0][s].y;break}}if(n==this.currentPage.pageX){n+=this.directionX;if(n<0){n=0}else if(n>=this.pages.length){n=this.pages.length-1}t=this.pages[n][0].x}if(s==this.currentPage.pageY){s+=this.directionY;if(s<0){s=0}else if(s>=this.pages[0].length){s=this.pages[0].length-1}e=this.pages[0][s].y}return{x:t,y:e,pageX:n,pageY:s}},goToPage:function(t,e,n,r){r=r||this.options.bounceEasing;if(t>=this.pages.length){t=this.pages.length-1}else if(t<0){t=0}if(e>=this.pages[t].length){e=this.pages[t].length-1}else if(e<0){e=0}var s=this.pages[t][e].x,o=this.pages[t][e].y;n=n===undefined?this.options.snapSpeed||i.max(i.max(i.min(i.abs(s-this.x),1e3),i.min(i.abs(o-this.y),1e3)),300):n;this.currentPage={x:s,y:o,pageX:t,pageY:e};this.scrollTo(s,o,n,r)},next:function(t,e){var i=this.currentPage.pageX,n=this.currentPage.pageY;i++;if(i>=this.pages.length&&this.hasVerticalScroll){i=0;n++}this.goToPage(i,n,t,e)},prev:function(t,e){var i=this.currentPage.pageX,n=this.currentPage.pageY;i--;if(i<0&&this.hasVerticalScroll){i=0;n--}this.goToPage(i,n,t,e)},_initKeys:function(e){var i={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};var n;if(typeof this.options.keyBindings=="object"){for(n in this.options.keyBindings){if(typeof this.options.keyBindings[n]=="string"){this.options.keyBindings[n]=this.options.keyBindings[n].toUpperCase().charCodeAt(0)}}}else{this.options.keyBindings={}}for(n in i){this.options.keyBindings[n]=this.options.keyBindings[n]||i[n]}r.addEvent(t,"keydown",this);this.on("destroy",function(){r.removeEvent(t,"keydown",this)})},_key:function(t){if(!this.enabled){return}var e=this.options.snap,n=e?this.currentPage.pageX:this.x,s=e?this.currentPage.pageY:this.y,o=r.getTime(),a=this.keyTime||0,l=.25,c;if(this.options.useTransition&&this.isInTransition){c=this.getComputedPosition();this._translate(i.round(c.x),i.round(c.y));this.isInTransition=false}this.keyAcceleration=o-a<200?i.min(this.keyAcceleration+l,50):0;switch(t.keyCode){case this.options.keyBindings.pageUp:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){n+=e?1:this.wrapperWidth}else{s+=e?1:this.wrapperHeight}break;case this.options.keyBindings.pageDown:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){n-=e?1:this.wrapperWidth}else{s-=e?1:this.wrapperHeight}break;case this.options.keyBindings.end:n=e?this.pages.length-1:this.maxScrollX;s=e?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:n=0;s=0;break;case this.options.keyBindings.left:n+=e?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:s+=e?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:n-=e?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:s-=e?1:5+this.keyAcceleration>>0;break;default:return}if(e){this.goToPage(n,s);return}if(n>0){n=0;this.keyAcceleration=0}else if(n<this.maxScrollX){n=this.maxScrollX;this.keyAcceleration=0}if(s>0){s=0;this.keyAcceleration=0}else if(s<this.maxScrollY){s=this.maxScrollY;this.keyAcceleration=0}this.scrollTo(n,s,0);this.keyTime=o},_animate:function(t,e,i,s){var o=this,a=this.x,l=this.y,c=r.getTime(),u=c+i;function h(){var f=r.getTime(),d,p,v;if(f>=u){o.isAnimating=false;o._translate(t,e);if(!o.resetPosition(o.options.bounceTime)){o._execEvent("scrollEnd")}return}f=(f-c)/i;v=s(f);d=(t-a)*v+a;p=(e-l)*v+l;o._translate(d,p);if(o.isAnimating){n(h)}if(o.options.probeType==3){o._execEvent("scroll")}}this.isAnimating=true;h()},handleEvent:function(t){switch(t.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":if(!t._constructed){t.preventDefault();t.stopPropagation()}break}}};function o(t,i,n){var r=e.createElement("div"),s=e.createElement("div");if(n===true){r.style.cssText="position:absolute;z-index:9999";s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"}s.className="iScrollIndicator";if(t=="h"){if(n===true){r.style.cssText+=";height:7px;left:2px;right:2px;bottom:0";s.style.height="100%"}r.className="iScrollHorizontalScrollbar"}else{if(n===true){r.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px";s.style.width="100%"}r.className="iScrollVerticalScrollbar"}r.style.cssText+=";overflow:hidden";if(!i){r.style.pointerEvents="none"}r.appendChild(s);return r}function a(i,n){this.wrapper=typeof n.el=="string"?e.querySelector(n.el):n.el;this.wrapperStyle=this.wrapper.style;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=i;this.options={listenX:true,listenY:true,interactive:false,resize:true,defaultScrollbars:false,shrink:false,fade:false,speedRatioX:0,speedRatioY:0};for(var s in n){this.options[s]=n[s]}this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;if(this.options.interactive){if(!this.options.disableTouch){r.addEvent(this.indicator,"touchstart",this);r.addEvent(t,"touchend",this)}if(!this.options.disablePointer){r.addEvent(this.indicator,"MSPointerDown",this);r.addEvent(t,"MSPointerUp",this)}if(!this.options.disableMouse){r.addEvent(this.indicator,"mousedown",this);r.addEvent(t,"mouseup",this)}}if(this.options.fade){this.wrapperStyle[r.style.transform]=this.scroller.translateZ;this.wrapperStyle[r.style.transitionDuration]=r.isBadAndroid?"0.001s":"0ms";this.wrapperStyle.opacity="0"}}a.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(t);break}},destroy:function(){if(this.options.interactive){r.removeEvent(this.indicator,"touchstart",this);r.removeEvent(this.indicator,"MSPointerDown",this);r.removeEvent(this.indicator,"mousedown",this);r.removeEvent(t,"touchmove",this);r.removeEvent(t,"MSPointerMove",this);r.removeEvent(t,"mousemove",this);r.removeEvent(t,"touchend",this);r.removeEvent(t,"MSPointerUp",this);r.removeEvent(t,"mouseup",this)}if(this.options.defaultScrollbars){this.wrapper.parentNode.removeChild(this.wrapper)}},_start:function(e){var i=e.touches?e.touches[0]:e;e.preventDefault();e.stopPropagation();this.transitionTime();this.initiated=true;this.moved=false;this.lastPointX=i.pageX;this.lastPointY=i.pageY;this.startTime=r.getTime();if(!this.options.disableTouch){r.addEvent(t,"touchmove",this)}if(!this.options.disablePointer){r.addEvent(t,"MSPointerMove",this)}if(!this.options.disableMouse){r.addEvent(t,"mousemove",this)}this.scroller._execEvent("beforeScrollStart")},_move:function(t){var e=t.touches?t.touches[0]:t,i,n,s,o,a=r.getTime();if(!this.moved){this.scroller._execEvent("scrollStart")}this.moved=true;i=e.pageX-this.lastPointX;this.lastPointX=e.pageX;n=e.pageY-this.lastPointY;this.lastPointY=e.pageY;s=this.x+i;o=this.y+n;this._pos(s,o);if(this.scroller.options.probeType==1&&a-this.startTime>300){this.startTime=a;this.scroller._execEvent("scroll")}else if(this.scroller.options.probeType>1){this.scroller._execEvent("scroll")}t.preventDefault();t.stopPropagation()},_end:function(e){if(!this.initiated){return}this.initiated=false;e.preventDefault();e.stopPropagation();r.removeEvent(t,"touchmove",this);r.removeEvent(t,"MSPointerMove",this);r.removeEvent(t,"mousemove",this);if(this.scroller.options.snap){var n=this.scroller._nearestSnap(this.scroller.x,this.scroller.y);var s=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-n.x),1e3),i.min(i.abs(this.scroller.y-n.y),1e3)),300);if(this.scroller.x!=n.x||this.scroller.y!=n.y){this.scroller.directionX=0;this.scroller.directionY=0;this.scroller.currentPage=n;this.scroller.scrollTo(n.x,n.y,s,this.scroller.options.bounceEasing)}}if(this.moved){this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0;this.indicatorStyle[r.style.transitionDuration]=t+"ms";if(!t&&r.isBadAndroid){this.indicatorStyle[r.style.transitionDuration]="0.001s"}},transitionTimingFunction:function(t){this.indicatorStyle[r.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime();if(this.options.listenX&&!this.options.listenY){this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none"}else if(this.options.listenY&&!this.options.listenX){this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none"
}else{this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none"}if(this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll){r.addClass(this.wrapper,"iScrollBothScrollbars");r.removeClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="8px"}else{this.wrapper.style.bottom="8px"}}}else{r.removeClass(this.wrapper,"iScrollBothScrollbars");r.addClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="2px"}else{this.wrapper.style.bottom="2px"}}}var t=this.wrapper.offsetHeight;if(this.options.listenX){this.wrapperWidth=this.wrapper.clientWidth;if(this.options.resize){this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8);this.indicatorStyle.width=this.indicatorWidth+"px"}else{this.indicatorWidth=this.indicator.clientWidth}this.maxPosX=this.wrapperWidth-this.indicatorWidth;if(this.options.shrink=="clip"){this.minBoundaryX=-this.indicatorWidth+8;this.maxBoundaryX=this.wrapperWidth-8}else{this.minBoundaryX=0;this.maxBoundaryX=this.maxPosX}this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX}if(this.options.listenY){this.wrapperHeight=this.wrapper.clientHeight;if(this.options.resize){this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8);this.indicatorStyle.height=this.indicatorHeight+"px"}else{this.indicatorHeight=this.indicator.clientHeight}this.maxPosY=this.wrapperHeight-this.indicatorHeight;if(this.options.shrink=="clip"){this.minBoundaryY=-this.indicatorHeight+8;this.maxBoundaryY=this.wrapperHeight-8}else{this.minBoundaryY=0;this.maxBoundaryY=this.maxPosY}this.maxPosY=this.wrapperHeight-this.indicatorHeight;this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY}this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&i.round(this.sizeRatioX*this.scroller.x)||0,e=this.options.listenY&&i.round(this.sizeRatioY*this.scroller.y)||0;if(!this.options.ignoreBoundaries){if(t<this.minBoundaryX){if(this.options.shrink=="scale"){this.width=i.max(this.indicatorWidth+t,8);this.indicatorStyle.width=this.width+"px"}t=this.minBoundaryX}else if(t>this.maxBoundaryX){if(this.options.shrink=="scale"){this.width=i.max(this.indicatorWidth-(t-this.maxPosX),8);this.indicatorStyle.width=this.width+"px";t=this.maxPosX+this.indicatorWidth-this.width}else{t=this.maxBoundaryX}}else if(this.options.shrink=="scale"&&this.width!=this.indicatorWidth){this.width=this.indicatorWidth;this.indicatorStyle.width=this.width+"px"}if(e<this.minBoundaryY){if(this.options.shrink=="scale"){this.height=i.max(this.indicatorHeight+e*3,8);this.indicatorStyle.height=this.height+"px"}e=this.minBoundaryY}else if(e>this.maxBoundaryY){if(this.options.shrink=="scale"){this.height=i.max(this.indicatorHeight-(e-this.maxPosY)*3,8);this.indicatorStyle.height=this.height+"px";e=this.maxPosY+this.indicatorHeight-this.height}else{e=this.maxBoundaryY}}else if(this.options.shrink=="scale"&&this.height!=this.indicatorHeight){this.height=this.indicatorHeight;this.indicatorStyle.height=this.height+"px"}}this.x=t;this.y=e;if(this.scroller.options.useTransform){this.indicatorStyle[r.style.transform]="translate("+t+"px,"+e+"px)"+this.scroller.translateZ}else{this.indicatorStyle.left=t+"px";this.indicatorStyle.top=e+"px"}},_pos:function(t,e){if(t<0){t=0}else if(t>this.maxPosX){t=this.maxPosX}if(e<0){e=0}else if(e>this.maxPosY){e=this.maxPosY}t=this.options.listenX?i.round(t/this.sizeRatioX):this.scroller.x;e=this.options.listenY?i.round(e/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(t,e)},fade:function(t,e){if(e&&!this.visible){return}clearTimeout(this.fadeTimeout);this.fadeTimeout=null;var i=t?250:500,n=t?0:300;t=t?"1":"0";this.wrapperStyle[r.style.transitionDuration]=i+"ms";this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t;this.visible=+t}.bind(this,t),n)}};s.utils=r;if(typeof module!="undefined"&&module.exports){module.exports=s}else{t.IScroll=s}})(window,document,Math);(function(t,e){"use strict";var i=function(t,e){return new i.Instance(t,e||{})};i.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};i.HAS_POINTEREVENTS=t.navigator.pointerEnabled||t.navigator.msPointerEnabled;i.HAS_TOUCHEVENTS="ontouchstart"in t;i.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i;i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&t.navigator.userAgent.match(i.MOBILE_REGEX);i.EVENT_TYPES={};i.DIRECTION_DOWN="down";i.DIRECTION_LEFT="left";i.DIRECTION_UP="up";i.DIRECTION_RIGHT="right";i.POINTER_MOUSE="mouse";i.POINTER_TOUCH="touch";i.POINTER_PEN="pen";i.EVENT_START="start";i.EVENT_MOVE="move";i.EVENT_END="end";i.DOCUMENT=t.document;i.plugins=i.plugins||{};i.gestures=i.gestures||{};i.READY=false;function n(){if(i.READY){return}i.event.determineEventTypes();i.utils.each(i.gestures,function(t){i.detection.register(t)});i.event.onTouch(i.DOCUMENT,i.EVENT_MOVE,i.detection.detect);i.event.onTouch(i.DOCUMENT,i.EVENT_END,i.detection.detect);i.READY=true}i.utils={extend:function a(t,i,n){for(var r in i){if(t[r]!==e&&n){continue}t[r]=i[r]}return t},each:function(t,i,n){var r,s;if("forEach"in t){t.forEach(i,n)}else if(t.length!==e){for(r=0,s=t.length;r<s;r++){if(i.call(n,t[r],r,t)===false){return}}}else{for(r in t){if(t.hasOwnProperty(r)&&i.call(n,t[r],r,t)===false){return}}}},hasParent:function(t,e){while(t){if(t==e){return true}t=t.parentNode}return false},getCenter:function l(t){var e=[],n=[];i.utils.each(t,function(t){e.push(typeof t.clientX!=="undefined"?t.clientX:t.pageX);n.push(typeof t.clientY!=="undefined"?t.clientY:t.pageY)});return{pageX:(Math.min.apply(Math,e)+Math.max.apply(Math,e))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function c(t,e,i){return{x:Math.abs(e/t)||0,y:Math.abs(i/t)||0}},getAngle:function u(t,e){var i=e.pageY-t.pageY,n=e.pageX-t.pageX;return Math.atan2(i,n)*180/Math.PI},getDirection:function h(t,e){var n=Math.abs(t.pageX-e.pageX),r=Math.abs(t.pageY-e.pageY);if(n>=r){return t.pageX-e.pageX>0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT}else{return t.pageY-e.pageY>0?i.DIRECTION_UP:i.DIRECTION_DOWN}},getDistance:function f(t,e){var i=e.pageX-t.pageX,n=e.pageY-t.pageY;return Math.sqrt(i*i+n*n)},getScale:function d(t,e){if(t.length>=2&&e.length>=2){return this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1])}return 1},getRotation:function p(t,e){if(t.length>=2&&e.length>=2){return this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0])}return 0},isVertical:function v(t){return t==i.DIRECTION_UP||t==i.DIRECTION_DOWN},stopDefaultBrowserBehavior:function m(t,e){if(!e||!t||!t.style){return}i.utils.each(["webkit","khtml","moz","Moz","ms","o",""],function(n){i.utils.each(e,function(e,i){if(n){i=n+i.substring(0,1).toUpperCase()+i.substring(1)}if(i in t.style){t.style[i]=e}})});if(e.userSelect=="none"){t.onselectstart=function(){return false}}if(e.userDrag=="none"){t.ondragstart=function(){return false}}}};i.Instance=function(t,e){var r=this;n();this.element=t;this.enabled=true;this.options=i.utils.extend(i.utils.extend({},i.defaults),e||{});if(this.options.stop_browser_behavior){i.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior)}i.event.onTouch(t,i.EVENT_START,function(t){if(r.enabled){i.detection.startDetect(r,t)}});return this};i.Instance.prototype={on:function g(t,e){var n=t.split(" ");i.utils.each(n,function(t){this.element.addEventListener(t,e,false)},this);return this},off:function y(t,e){var n=t.split(" ");i.utils.each(n,function(t){this.element.removeEventListener(t,e,false)},this);return this},trigger:function _(t,e){if(!e){e={}}var n=i.DOCUMENT.createEvent("Event");n.initEvent(t,true,true);n.gesture=e;var r=this.element;if(i.utils.hasParent(e.target,r)){r=e.target}r.dispatchEvent(n);return this},enable:function E(t){this.enabled=t;return this}};var r=null;var s=false;var o=false;i.event={bindDom:function(t,e,n){var r=e.split(" ");i.utils.each(r,function(e){t.addEventListener(e,n,false)})},onTouch:function b(t,e,n){var a=this;this.bindDom(t,i.EVENT_TYPES[e],function l(c){var u=c.type.toLowerCase();if(u.match(/mouse/)&&o){return}else if(u.match(/touch/)||u.match(/pointerdown/)||u.match(/mouse/)&&c.which===1){s=true}else if(u.match(/mouse/)&&!c.which){s=false}if(u.match(/touch|pointer/)){o=true}var h=0;if(s){if(i.HAS_POINTEREVENTS&&e!=i.EVENT_END){h=i.PointerEvent.updatePointer(e,c)}else if(u.match(/touch/)){h=c.touches.length}else if(!o){h=u.match(/up/)?0:1}if(h>0&&e==i.EVENT_END){e=i.EVENT_MOVE}else if(!h){e=i.EVENT_END}if(h||r===null){r=c}n.call(i.detection,a.collectEventData(t,e,a.getTouchList(r,e),c));if(i.HAS_POINTEREVENTS&&e==i.EVENT_END){h=i.PointerEvent.updatePointer(e,c)}}if(!h){r=null;s=false;o=false;i.PointerEvent.reset()}})},determineEventTypes:function w(){var t;if(i.HAS_POINTEREVENTS){t=i.PointerEvent.getEvents()}else if(i.NO_MOUSEEVENTS){t=["touchstart","touchmove","touchend touchcancel"]}else{t=["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"]}i.EVENT_TYPES[i.EVENT_START]=t[0];i.EVENT_TYPES[i.EVENT_MOVE]=t[1];i.EVENT_TYPES[i.EVENT_END]=t[2]},getTouchList:function x(t){if(i.HAS_POINTEREVENTS){return i.PointerEvent.getTouchList()}else if(t.touches){return t.touches}else{t.identifier=1;return[t]}},collectEventData:function S(t,e,n,r){var s=i.POINTER_TOUCH;if(r.type.match(/mouse/)||i.PointerEvent.matchType(i.POINTER_MOUSE,r)){s=i.POINTER_MOUSE}return{center:i.utils.getCenter(n),timeStamp:(new Date).getTime(),target:r.target,touches:n,eventType:e,pointerType:s,srcEvent:r,preventDefault:function(){if(this.srcEvent.preventManipulation){this.srcEvent.preventManipulation()}if(this.srcEvent.preventDefault){this.srcEvent.preventDefault()}},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return i.detection.stopDetect()}}}};i.PointerEvent={pointers:{},getTouchList:function(){var t=this;var e=[];i.utils.each(t.pointers,function(t){e.push(t)});return e},updatePointer:function(t,e){if(t==i.EVENT_END){this.pointers={}}else{e.identifier=e.pointerId;this.pointers[e.pointerId]=e}return Object.keys(this.pointers).length},matchType:function(t,e){if(!e.pointerType){return false}var n=e.pointerType,r={};r[i.POINTER_MOUSE]=n===e.MSPOINTER_TYPE_MOUSE||n===i.POINTER_MOUSE;r[i.POINTER_TOUCH]=n===e.MSPOINTER_TYPE_TOUCH||n===i.POINTER_TOUCH;r[i.POINTER_PEN]=n===e.MSPOINTER_TYPE_PEN||n===i.POINTER_PEN;return r[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}};i.detection={gestures:[],current:null,previous:null,stopped:false,startDetect:function T(t,e){if(this.current){return}this.stopped=false;this.current={inst:t,startEvent:i.utils.extend({},e),lastEvent:false,name:""};this.detect(e)},detect:function M(t){if(!this.current||this.stopped){return}t=this.extendEventData(t);var e=this.current.inst.options;i.utils.each(this.gestures,function(i){if(!this.stopped&&e[i.name]!==false){if(i.handler.call(i,t,this.current.inst)===false){this.stopDetect();return false}}},this);if(this.current){this.current.lastEvent=t}if(t.eventType==i.EVENT_END&&!t.touches.length-1){this.stopDetect()}return t},stopDetect:function C(){this.previous=i.utils.extend({},this.current);this.current=null;this.stopped=true},extendEventData:function P(t){var e=this.current.startEvent;if(e&&(t.touches.length!=e.touches.length||t.touches===e.touches)){e.touches=[];i.utils.each(t.touches,function(t){e.touches.push(i.utils.extend({},t))})}var n=t.timeStamp-e.timeStamp,r=t.center.pageX-e.center.pageX,s=t.center.pageY-e.center.pageY,o=i.utils.getVelocity(n,r,s),a,l;if(t.eventType==="end"){a=this.current.lastEvent&&this.current.lastEvent.interimAngle;l=this.current.lastEvent&&this.current.lastEvent.interimDirection}else{a=this.current.lastEvent&&i.utils.getAngle(this.current.lastEvent.center,t.center);l=this.current.lastEvent&&i.utils.getDirection(this.current.lastEvent.center,t.center)}i.utils.extend(t,{deltaTime:n,deltaX:r,deltaY:s,velocityX:o.x,velocityY:o.y,distance:i.utils.getDistance(e.center,t.center),angle:i.utils.getAngle(e.center,t.center),interimAngle:a,direction:i.utils.getDirection(e.center,t.center),interimDirection:l,scale:i.utils.getScale(e.touches,t.touches),rotation:i.utils.getRotation(e.touches,t.touches),startEvent:e});return t},register:function O(t){var n=t.defaults||{};if(n[t.name]===e){n[t.name]=true}i.utils.extend(i.defaults,n,true);t.index=t.index||1e3;this.gestures.push(t);this.gestures.sort(function(t,e){if(t.index<e.index){return-1}if(t.index>e.index){return 1}return 0});return this.gestures}};i.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:true,drag_max_touches:1,drag_block_horizontal:false,drag_block_vertical:false,drag_lock_to_axis:false,drag_lock_min_distance:25},triggered:false,handler:function L(t,e){if(i.detection.current.name!=this.name&&this.triggered){e.trigger(this.name+"end",t);this.triggered=false;return}if(e.options.drag_max_touches>0&&t.touches.length>e.options.drag_max_touches){return}switch(t.eventType){case i.EVENT_START:this.triggered=false;break;case i.EVENT_MOVE:if(t.distance<e.options.drag_min_distance&&i.detection.current.name!=this.name){return}if(i.detection.current.name!=this.name){i.detection.current.name=this.name;if(e.options.correct_for_drag_min_distance&&t.distance>0){var n=Math.abs(e.options.drag_min_distance/t.distance);i.detection.current.startEvent.center.pageX+=t.deltaX*n;i.detection.current.startEvent.center.pageY+=t.deltaY*n;t=i.detection.extendEventData(t)}}if(i.detection.current.lastEvent.drag_locked_to_axis||e.options.drag_lock_to_axis&&e.options.drag_lock_min_distance<=t.distance){t.drag_locked_to_axis=true}var r=i.detection.current.lastEvent.direction;if(t.drag_locked_to_axis&&r!==t.direction){if(i.utils.isVertical(r)){t.direction=t.deltaY<0?i.DIRECTION_UP:i.DIRECTION_DOWN}else{t.direction=t.deltaX<0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT}}if(!this.triggered){e.trigger(this.name+"start",t);this.triggered=true}e.trigger(this.name,t);e.trigger(this.name+t.direction,t);if(e.options.drag_block_vertical&&i.utils.isVertical(t.direction)||e.options.drag_block_horizontal&&!i.utils.isVertical(t.direction)){t.preventDefault()}break;case i.EVENT_END:if(this.triggered){e.trigger(this.name+"end",t)}this.triggered=false;break}}};i.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function I(t,e){switch(t.eventType){case i.EVENT_START:clearTimeout(this.timer);i.detection.current.name=this.name;this.timer=setTimeout(function(){if(i.detection.current.name=="hold"){e.trigger("hold",t)}},e.options.hold_timeout);break;case i.EVENT_MOVE:if(t.distance>e.options.hold_threshold){clearTimeout(this.timer)}break;case i.EVENT_END:clearTimeout(this.timer);break}}};i.gestures.Release={name:"release",index:Infinity,handler:function k(t,e){if(t.eventType==i.EVENT_END){e.trigger(this.name,t)}}};i.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function A(t,e){if(t.eventType==i.EVENT_END){if(e.options.swipe_max_touches>0&&t.touches.length<e.options.swipe_min_touches&&t.touches.length>e.options.swipe_max_touches){return}if(t.velocityX>e.options.swipe_velocity||t.velocityY>e.options.swipe_velocity){e.trigger(this.name,t);e.trigger(this.name+t.direction,t)}}}};i.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:true,doubletap_distance:20,doubletap_interval:300},handler:function N(t,e){if(t.eventType==i.EVENT_END&&t.srcEvent.type!="touchcancel"){var n=i.detection.previous,r=false;if(t.deltaTime>e.options.tap_max_touchtime||t.distance>e.options.tap_max_distance){return}if(n&&n.name=="tap"&&t.timeStamp-n.lastEvent.timeStamp<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance){e.trigger("doubletap",t);r=true}if(!r||e.options.tap_always){i.detection.current.name="tap";e.trigger(i.detection.current.name,t)}}}};i.gestures.Touch={name:"touch",index:-Infinity,defaults:{prevent_default:false,prevent_mouseevents:false},handler:function R(t,e){if(e.options.prevent_mouseevents&&t.pointerType==i.POINTER_MOUSE){t.stopDetect();return}if(e.options.prevent_default){t.preventDefault()}if(t.eventType==i.EVENT_START){e.trigger(this.name,t)}}};i.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:false},triggered:false,handler:function D(t,e){if(i.detection.current.name!=this.name&&this.triggered){e.trigger(this.name+"end",t);this.triggered=false;return}if(t.touches.length<2){return}if(e.options.transform_always_block){t.preventDefault()}switch(t.eventType){case i.EVENT_START:this.triggered=false;break;case i.EVENT_MOVE:var n=Math.abs(1-t.scale);var r=Math.abs(t.rotation);if(n<e.options.transform_min_scale&&r<e.options.transform_min_rotation){return}i.detection.current.name=this.name;if(!this.triggered){e.trigger(this.name+"start",t);this.triggered=true}e.trigger(this.name,t);if(r>e.options.transform_min_rotation){e.trigger("rotate",t)}if(n>e.options.transform_min_scale){e.trigger("pinch",t);e.trigger("pinch"+(t.scale<1?"in":"out"),t)}break;case i.EVENT_END:if(this.triggered){e.trigger(this.name+"end",t)}this.triggered=false;break}}};if(typeof define=="function"&&define.amd){define(function(){return i})}else if(typeof module==="object"&&module.exports){module.exports=i}else{t.Hammer=i}})(window);(function(t,e){"use strict";function i(t,i){t.event.bindDom=function(t,n,r){i(t).on(n,function(t){var i=t.originalEvent||t;if(i.pageX===e){i.pageX=t.pageX;i.pageY=t.pageY}if(!i.target){i.target=t.target}if(i.which===e){i.which=i.button}if(!i.preventDefault){i.preventDefault=t.preventDefault}if(!i.stopPropagation){i.stopPropagation=t.stopPropagation}r.call(this,i)})};t.Instance.prototype.on=function(t,e){return i(this.element).on(t,e)};t.Instance.prototype.off=function(t,e){return i(this.element).off(t,e)};t.Instance.prototype.trigger=function(t,e){var n=i(this.element);if(n.has(e.target).length){n=i(e.target)}return n.trigger({type:t,gesture:e})};i.fn.hammer=function(e){return this.each(function(){var n=i(this);var r=n.data("hammer");if(!r){n.data("hammer",new t(this,e||{}))}else if(r&&e){t.utils.extend(r.options,e)}})}}if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(["hammerjs","jquery"],i)}else{i(t.Hammer,t.jQuery||t.Zepto)}})(this);(function(t){var e=Array.prototype.slice;function i(){}function n(t){if(!t){return}function n(e){if(e.prototype.option){return}e.prototype.option=function(e){if(!t.isPlainObject(e)){return}this.options=t.extend(true,this.options,e)}}var r=typeof console==="undefined"?i:function(t){console.error(t)};function s(i,n){t.fn[i]=function(s){if(typeof s==="string"){var o=e.call(arguments,1);for(var a=0,l=this.length;a<l;a++){var c=this[a];var u=t.data(c,i);if(!u){r("cannot call methods on "+i+" prior to initialization; "+"attempted to call '"+s+"'");continue}if(!t.isFunction(u[s])||s.charAt(0)==="_"){r("no such method '"+s+"' for "+i+" instance");continue}var h=u[s].apply(u,o);if(h!==undefined){return h}}return this}else{return this.each(function(){var e=t.data(this,i);if(e){e.option(s);e._init()}else{e=new n(this,s);t.data(this,i,e)}})}}}t.bridget=function(t,e){n(e);s(t,e)};return t.bridget}if(typeof define==="function"&&define.amd){define("jquery-bridget/jquery.bridget",["jquery"],n)}else{n(t.jQuery)}})(window);(function(t){var e=document.documentElement;var i=function(){};function n(e){var i=t.event;i.target=i.target||i.srcElement||e;return i}if(e.addEventListener){i=function(t,e,i){t.addEventListener(e,i,false)}}else if(e.attachEvent){i=function(t,e,i){t[e+i]=i.handleEvent?function(){var e=n(t);i.handleEvent.call(i,e)}:function(){var e=n(t);i.call(t,e)};t.attachEvent("on"+e,t[e+i])}}var r=function(){};if(e.removeEventListener){r=function(t,e,i){t.removeEventListener(e,i,false)}}else if(e.detachEvent){r=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=undefined}}}var s={bind:i,unbind:r};if(typeof define==="function"&&define.amd){define("eventie/eventie",s)}else if(typeof exports==="object"){module.exports=s}else{t.eventie=s}})(this);(function(t){var e=t.document;var i=[];function n(t){if(typeof t!=="function"){return}if(n.isReady){t()}else{i.push(t)}}n.isReady=false;function r(t){var r=t.type==="readystatechange"&&e.readyState!=="complete";if(n.isReady||r){return}n.isReady=true;for(var s=0,o=i.length;s<o;s++){var a=i[s];a()}}function s(i){i.bind(e,"DOMContentLoaded",r);i.bind(e,"readystatechange",r);i.bind(t,"load",r);return n}if(typeof define==="function"&&define.amd){n.isReady=typeof requirejs==="function";define("doc-ready/doc-ready",["eventie/eventie"],s)}else{t.docReady=s(t.eventie)}})(this);(function(){function t(){}var e=t.prototype;var i=this;var n=i.EventEmitter;function r(t,e){var i=t.length;while(i--){if(t[i].listener===e){return i}}return-1}function s(t){return function e(){return this[t].apply(this,arguments)}}e.getListeners=function o(t){var e=this._getEvents();var i;var n;if(t instanceof RegExp){i={};for(n in e){if(e.hasOwnProperty(n)&&t.test(n)){i[n]=e[n]}}}else{i=e[t]||(e[t]=[])}return i};e.flattenListeners=function a(t){var e=[];var i;for(i=0;i<t.length;i+=1){e.push(t[i].listener)}return e};e.getListenersAsObject=function l(t){var e=this.getListeners(t);var i;if(e instanceof Array){i={};i[t]=e}return i||e};e.addListener=function c(t,e){var i=this.getListenersAsObject(t);var n=typeof e==="object";var s;for(s in i){if(i.hasOwnProperty(s)&&r(i[s],e)===-1){i[s].push(n?e:{listener:e,once:false})}}return this};e.on=s("addListener");e.addOnceListener=function u(t,e){return this.addListener(t,{listener:e,once:true})};e.once=s("addOnceListener");e.defineEvent=function h(t){this.getListeners(t);return this};e.defineEvents=function f(t){for(var e=0;e<t.length;e+=1){this.defineEvent(t[e])}return this};e.removeListener=function d(t,e){var i=this.getListenersAsObject(t);var n;var s;for(s in i){if(i.hasOwnProperty(s)){n=r(i[s],e);if(n!==-1){i[s].splice(n,1)}}}return this};e.off=s("removeListener");e.addListeners=function p(t,e){return this.manipulateListeners(false,t,e)};e.removeListeners=function v(t,e){return this.manipulateListeners(true,t,e)};e.manipulateListeners=function m(t,e,i){var n;var r;var s=t?this.removeListener:this.addListener;var o=t?this.removeListeners:this.addListeners;if(typeof e==="object"&&!(e instanceof RegExp)){for(n in e){if(e.hasOwnProperty(n)&&(r=e[n])){if(typeof r==="function"){s.call(this,n,r)}else{o.call(this,n,r)}}}}else{n=i.length;while(n--){s.call(this,e,i[n])}}return this};e.removeEvent=function g(t){var e=typeof t;var i=this._getEvents();var n;if(e==="string"){delete i[t]}else if(t instanceof RegExp){for(n in i){if(i.hasOwnProperty(n)&&t.test(n)){delete i[n]}}}else{delete this._events}return this};e.removeAllListeners=s("removeEvent");e.emitEvent=function y(t,e){var i=this.getListenersAsObject(t);var n;var r;var s;var o;for(s in i){if(i.hasOwnProperty(s)){r=i[s].length;while(r--){n=i[s][r];if(n.once===true){this.removeListener(t,n.listener)}o=n.listener.apply(this,e||[]);if(o===this._getOnceReturnValue()){this.removeListener(t,n.listener)}}}}return this};e.trigger=s("emitEvent");e.emit=function _(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)};e.setOnceReturnValue=function E(t){this._onceReturnValue=t;return this};e._getOnceReturnValue=function b(){if(this.hasOwnProperty("_onceReturnValue")){return this._onceReturnValue}else{return true}};e._getEvents=function w(){return this._events||(this._events={})};t.noConflict=function x(){i.EventEmitter=n;return t};if(typeof define==="function"&&define.amd){define("eventEmitter/EventEmitter",[],function(){return t})}else if(typeof module==="object"&&module.exports){module.exports=t}else{this.EventEmitter=t}}).call(this);(function(t){var e="Webkit Moz ms Ms O".split(" ");var i=document.documentElement.style;function n(t){if(!t){return}if(typeof i[t]==="string"){return t}t=t.charAt(0).toUpperCase()+t.slice(1);var n;for(var r=0,s=e.length;r<s;r++){n=e[r]+t;if(typeof i[n]==="string"){return n}}}if(typeof define==="function"&&define.amd){define("get-style-property/get-style-property",[],function(){return n})}else if(typeof exports==="object"){module.exports=n}else{t.getStyleProperty=n}})(window);(function(t,e){var i=t.getComputedStyle;var n=i?function(t){return i(t,null)}:function(t){return t.currentStyle};function r(t){var e=parseFloat(t);var i=t.indexOf("%")===-1&&!isNaN(e);return i&&e}var s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];function o(){var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var e=0,i=s.length;e<i;e++){var n=s[e];t[n]=0}return t}function a(t){var e=t("boxSizing");var a;(function(){if(!e){return}var t=document.createElement("div");t.style.width="200px";t.style.padding="1px 2px 3px 4px";t.style.borderStyle="solid";t.style.borderWidth="1px 2px 3px 4px";t.style[e]="border-box";var i=document.body||document.documentElement;i.appendChild(t);var s=n(t);a=r(s.width)===200;i.removeChild(t)})();function l(t){if(typeof t==="string"){t=document.querySelector(t)}if(!t||typeof t!=="object"||!t.nodeType){return}var i=n(t);if(i.display==="none"){return o()}var l={};l.width=t.offsetWidth;l.height=t.offsetHeight;var u=l.isBorderBox=!!(e&&i[e]&&i[e]==="border-box");for(var h=0,f=s.length;h<f;h++){var d=s[h];var p=i[d];p=c(t,p);var v=parseFloat(p);l[d]=!isNaN(v)?v:0}var m=l.paddingLeft+l.paddingRight;var g=l.paddingTop+l.paddingBottom;var y=l.marginLeft+l.marginRight;var _=l.marginTop+l.marginBottom;var E=l.borderLeftWidth+l.borderRightWidth;var b=l.borderTopWidth+l.borderBottomWidth;var w=u&&a;var x=r(i.width);if(x!==false){l.width=x+(w?0:m+E)}var S=r(i.height);if(S!==false){l.height=S+(w?0:g+b)}l.innerWidth=l.width-(m+E);l.innerHeight=l.height-(g+b);l.outerWidth=l.width+y;l.outerHeight=l.height+_;return l}function c(t,e){if(i||e.indexOf("%")===-1){return e}var n=t.style;var r=n.left;var s=t.runtimeStyle;var o=s&&s.left;if(o){s.left=t.currentStyle.left}n.left=e;e=n.pixelLeft;n.left=r;if(o){s.left=o}return e}return l}if(typeof define==="function"&&define.amd){define("get-size/get-size",["get-style-property/get-style-property"],a)}else if(typeof exports==="object"){module.exports=a(require("get-style-property"))}else{t.getSize=a(t.getStyleProperty)}})(window);(function(t,e){var i=function(){if(e.matchesSelector){return"matchesSelector"}var t=["webkit","moz","ms","o"];for(var i=0,n=t.length;i<n;i++){var r=t[i];var s=r+"MatchesSelector";if(e[s]){return s}}}();function n(t,e){return t[i](e)}function r(t){if(t.parentNode){return}var e=document.createDocumentFragment();e.appendChild(t)}function s(t,e){r(t);var i=t.parentNode.querySelectorAll(e);for(var n=0,s=i.length;n<s;n++){if(i[n]===t){return true}}return false}function o(t,e){r(t);return n(t,e)}var a;if(i){var l=document.createElement("div");var c=n(l,"div");a=c?n:o}else{a=s}if(typeof define==="function"&&define.amd){define("matches-selector/matches-selector",[],function(){return a})}else{window.matchesSelector=a}})(this,Element.prototype);(function(t){var e=document.defaultView;var i=e&&e.getComputedStyle?function(t){return e.getComputedStyle(t,null)}:function(t){return t.currentStyle};function n(t,e){for(var i in e){t[i]=e[i]}return t}function r(t){for(var e in t){return false}e=null;return true}function s(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function o(t,e,o){var a=o("transition");var l=o("transform");var c=a&&l;var u=!!o("perspective");var h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[a];var f=["transform","transition","transitionDuration","transitionProperty"];var d=function(){var t={};for(var e=0,i=f.length;e<i;e++){var n=f[e];var r=o(n);if(r&&r!==n){t[n]=r}}return t}();function p(t,e){if(!t){return}this.element=t;this.layout=e;this.position={x:0,y:0};this._create()}n(p.prototype,t.prototype);p.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:"absolute"})};p.prototype.handleEvent=function(t){var e="on"+t.type;if(this[e]){this[e](t)}};p.prototype.getSize=function(){this.size=e(this.element)};p.prototype.css=function(t){var e=this.element.style;for(var i in t){var n=d[i]||i;e[n]=t[i]}};p.prototype.getPosition=function(){var t=i(this.element);var e=this.layout.options;var n=e.isOriginLeft;var r=e.isOriginTop;var s=parseInt(t[n?"left":"right"],10);var o=parseInt(t[r?"top":"bottom"],10);s=isNaN(s)?0:s;o=isNaN(o)?0:o;var a=this.layout.size;s-=n?a.paddingLeft:a.paddingRight;o-=r?a.paddingTop:a.paddingBottom;this.position.x=s;this.position.y=o};p.prototype.layoutPosition=function(){var t=this.layout.size;var e=this.layout.options;var i={};if(e.isOriginLeft){i.left=this.position.x+t.paddingLeft+"px";i.right=""}else{i.right=this.position.x+t.paddingRight+"px";i.left=""}if(e.isOriginTop){i.top=this.position.y+t.paddingTop+"px";i.bottom=""}else{i.bottom=this.position.y+t.paddingBottom+"px";i.top=""}this.css(i);this.emitEvent("layout",[this])};var v=u?function(t,e){return"translate3d("+t+"px, "+e+"px, 0)"}:function(t,e){return"translate("+t+"px, "+e+"px)"};p.prototype._transitionTo=function(t,e){this.getPosition();var i=this.position.x;var n=this.position.y;var r=parseInt(t,10);var s=parseInt(e,10);var o=r===this.position.x&&s===this.position.y;this.setPosition(t,e);if(o&&!this.isTransitioning){this.layoutPosition();return}var a=t-i;var l=e-n;var c={};var u=this.layout.options;a=u.isOriginLeft?a:-a;l=u.isOriginTop?l:-l;c.transform=v(a,l);this.transition({to:c,onTransitionEnd:{transform:this.layoutPosition},isCleaning:true})};p.prototype.goTo=function(t,e){this.setPosition(t,e);this.layoutPosition()};p.prototype.moveTo=c?p.prototype._transitionTo:p.prototype.goTo;p.prototype.setPosition=function(t,e){this.position.x=parseInt(t,10);this.position.y=parseInt(e,10)};p.prototype._nonTransition=function(t){this.css(t.to);if(t.isCleaning){this._removeStyles(t.to)}for(var e in t.onTransitionEnd){t.onTransitionEnd[e].call(this)}};p.prototype._transition=function(t){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(t);return}var e=this._transn;for(var i in t.onTransitionEnd){e.onEnd[i]=t.onTransitionEnd[i]}for(i in t.to){e.ingProperties[i]=true;if(t.isCleaning){e.clean[i]=true}}if(t.from){this.css(t.from);var n=this.element.offsetHeight;n=null}this.enableTransition(t.to);this.css(t.to);this.isTransitioning=true};var m=l&&s(l)+",opacity";p.prototype.enableTransition=function(){if(this.isTransitioning){return}this.css({transitionProperty:m,transitionDuration:this.layout.options.transitionDuration});this.element.addEventListener(h,this,false)};p.prototype.transition=p.prototype[a?"_transition":"_nonTransition"];p.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)};p.prototype.onotransitionend=function(t){this.ontransitionend(t)};var g={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};p.prototype.ontransitionend=function(t){if(t.target!==this.element){return}var e=this._transn;var i=g[t.propertyName]||t.propertyName;delete e.ingProperties[i];if(r(e.ingProperties)){this.disableTransition()}if(i in e.clean){this.element.style[t.propertyName]="";delete e.clean[i]}if(i in e.onEnd){var n=e.onEnd[i];
n.call(this);delete e.onEnd[i]}this.emitEvent("transitionEnd",[this])};p.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(h,this,false);this.isTransitioning=false};p.prototype._removeStyles=function(t){var e={};for(var i in t){e[i]=""}this.css(e)};var y={transitionProperty:"",transitionDuration:""};p.prototype.removeTransitionStyles=function(){this.css(y)};p.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent("remove",[this])};p.prototype.remove=function(){if(!a||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}var t=this;this.on("transitionEnd",function(){t.removeElem();return true});this.hide()};p.prototype.reveal=function(){delete this.isHidden;this.css({display:""});var t=this.layout.options;this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:true})};p.prototype.hide=function(){this.isHidden=true;this.css({display:""});var t=this.layout.options;this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:true,onTransitionEnd:{opacity:function(){if(this.isHidden){this.css({display:"none"})}}}})};p.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})};return p}if(typeof define==="function"&&define.amd){define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],o)}else{t.Outlayer={};t.Outlayer.Item=o(t.EventEmitter,t.getSize,t.getStyleProperty)}})(window);(function(t){var e=t.document;var i=t.console;var n=t.jQuery;var r=function(){};function s(t,e){for(var i in e){t[i]=e[i]}return t}var o=Object.prototype.toString;function a(t){return o.call(t)==="[object Array]"}function l(t){var e=[];if(a(t)){e=t}else if(t&&typeof t.length==="number"){for(var i=0,n=t.length;i<n;i++){e.push(t[i])}}else{e.push(t)}return e}var c=typeof HTMLElement==="object"?function p(t){return t instanceof HTMLElement}:function v(t){return t&&typeof t==="object"&&t.nodeType===1&&typeof t.nodeName==="string"};var u=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;i<n;i++){if(t[i]===e){return i}}return-1};function h(t,e){var i=u(e,t);if(i!==-1){e.splice(i,1)}}function f(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()}function d(o,a,u,d,p,v){var m=0;var g={};function y(t,n){if(typeof t==="string"){t=e.querySelector(t)}if(!t||!c(t)){if(i){i.error("Bad "+this.constructor.namespace+" element: "+t)}return}this.element=t;this.options=s({},this.options);this.option(n);var r=++m;this.element.outlayerGUID=r;g[r]=this;this._create();if(this.options.isInitLayout){this.layout()}}y.namespace="outlayer";y.Item=v;y.prototype.options={containerStyle:{position:"relative"},isInitLayout:true,isOriginLeft:true,isOriginTop:true,isResizeBound:true,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};s(y.prototype,u.prototype);y.prototype.option=function(t){s(this.options,t)};y.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);s(this.element.style,this.options.containerStyle);if(this.options.isResizeBound){this.bindResize()}};y.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)};y.prototype._itemize=function(t){var e=this._filterFindItemElements(t);var i=this.constructor.Item;var n=[];for(var r=0,s=e.length;r<s;r++){var o=e[r];var a=new i(o,this);n.push(a)}return n};y.prototype._filterFindItemElements=function(t){t=l(t);var e=this.options.itemSelector;var i=[];for(var n=0,r=t.length;n<r;n++){var s=t[n];if(!c(s)){continue}if(e){if(p(s,e)){i.push(s)}var o=s.querySelectorAll(e);for(var a=0,u=o.length;a<u;a++){i.push(o[a])}}else{i.push(s)}}return i};y.prototype.getItemElements=function(){var t=[];for(var e=0,i=this.items.length;e<i;e++){t.push(this.items[e].element)}return t};y.prototype.layout=function(){this._resetLayout();this._manageStamps();var t=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t);this._isLayoutInited=true};y.prototype._init=y.prototype.layout;y.prototype._resetLayout=function(){this.getSize()};y.prototype.getSize=function(){this.size=d(this.element)};y.prototype._getMeasurement=function(t,e){var i=this.options[t];var n;if(!i){this[t]=0}else{if(typeof i==="string"){n=this.element.querySelector(i)}else if(c(i)){n=i}this[t]=n?d(n)[e]:i}};y.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t);this._layoutItems(t,e);this._postLayout()};y.prototype._getItemsForLayout=function(t){var e=[];for(var i=0,n=t.length;i<n;i++){var r=t[i];if(!r.isIgnored){e.push(r)}}return e};y.prototype._layoutItems=function(t,e){var i=this;function n(){i.emitEvent("layoutComplete",[i,t])}if(!t||!t.length){n();return}this._itemsOn(t,"layout",n);var r=[];for(var s=0,o=t.length;s<o;s++){var a=t[s];var l=this._getItemLayoutPosition(a);l.item=a;l.isInstant=e||a.isLayoutInstant;r.push(l)}this._processLayoutQueue(r)};y.prototype._getItemLayoutPosition=function(){return{x:0,y:0}};y.prototype._processLayoutQueue=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];this._positionItem(n.item,n.x,n.y,n.isInstant)}};y.prototype._positionItem=function(t,e,i,n){if(n){t.goTo(e,i)}else{t.moveTo(e,i)}};y.prototype._postLayout=function(){var t=this._getContainerSize();if(t){this._setContainerMeasure(t.width,true);this._setContainerMeasure(t.height,false)}};y.prototype._getContainerSize=r;y.prototype._setContainerMeasure=function(t,e){if(t===undefined){return}var i=this.size;if(i.isBorderBox){t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth}t=Math.max(t,0);this.element.style[e?"width":"height"]=t+"px"};y.prototype._itemsOn=function(t,e,i){var n=0;var r=t.length;var s=this;function o(){n++;if(n===r){i.call(s)}return true}for(var a=0,l=t.length;a<l;a++){var c=t[a];c.on(e,o)}};y.prototype.ignore=function(t){var e=this.getItem(t);if(e){e.isIgnored=true}};y.prototype.unignore=function(t){var e=this.getItem(t);if(e){delete e.isIgnored}};y.prototype.stamp=function(t){t=this._find(t);if(!t){return}this.stamps=this.stamps.concat(t);for(var e=0,i=t.length;e<i;e++){var n=t[e];this.ignore(n)}};y.prototype.unstamp=function(t){t=this._find(t);if(!t){return}for(var e=0,i=t.length;e<i;e++){var n=t[e];h(n,this.stamps);this.unignore(n)}};y.prototype._find=function(t){if(!t){return}if(typeof t==="string"){t=this.element.querySelectorAll(t)}t=l(t);return t};y.prototype._manageStamps=function(){if(!this.stamps||!this.stamps.length){return}this._getBoundingRect();for(var t=0,e=this.stamps.length;t<e;t++){var i=this.stamps[t];this._manageStamp(i)}};y.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect();var e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}};y.prototype._manageStamp=r;y.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect();var i=this._boundingRect;var n=d(t);var r={left:e.left-i.left-n.marginLeft,top:e.top-i.top-n.marginTop,right:i.right-e.right-n.marginRight,bottom:i.bottom-e.bottom-n.marginBottom};return r};y.prototype.handleEvent=function(t){var e="on"+t.type;if(this[e]){this[e](t)}};y.prototype.bindResize=function(){if(this.isResizeBound){return}o.bind(t,"resize",this);this.isResizeBound=true};y.prototype.unbindResize=function(){o.unbind(t,"resize",this);this.isResizeBound=false};y.prototype.onresize=function(){if(this.resizeTimeout){clearTimeout(this.resizeTimeout)}var t=this;function e(){t.resize();delete t.resizeTimeout}this.resizeTimeout=setTimeout(e,100)};y.prototype.resize=function(){var t=d(this.element);var e=this.size&&t;if(e&&t.innerWidth===this.size.innerWidth){return}this.layout()};y.prototype.addItems=function(t){var e=this._itemize(t);if(e.length){this.items=this.items.concat(e)}return e};y.prototype.appended=function(t){var e=this.addItems(t);if(!e.length){return}this.layoutItems(e,true);this.reveal(e)};y.prototype.prepended=function(t){var e=this._itemize(t);if(!e.length){return}var i=this.items.slice(0);this.items=e.concat(i);this._resetLayout();this._manageStamps();this.layoutItems(e,true);this.reveal(e);this.layoutItems(i)};y.prototype.reveal=function(t){var e=t&&t.length;if(!e){return}for(var i=0;i<e;i++){var n=t[i];n.reveal()}};y.prototype.hide=function(t){var e=t&&t.length;if(!e){return}for(var i=0;i<e;i++){var n=t[i];n.hide()}};y.prototype.getItem=function(t){for(var e=0,i=this.items.length;e<i;e++){var n=this.items[e];if(n.element===t){return n}}};y.prototype.getItems=function(t){if(!t||!t.length){return}var e=[];for(var i=0,n=t.length;i<n;i++){var r=t[i];var s=this.getItem(r);if(s){e.push(s)}}return e};y.prototype.remove=function(t){t=l(t);var e=this.getItems(t);if(!e||!e.length){return}this._itemsOn(e,"remove",function(){this.emitEvent("removeComplete",[this,e])});for(var i=0,n=e.length;i<n;i++){var r=e[i];r.remove();h(r,this.items)}};y.prototype.destroy=function(){var t=this.element.style;t.height="";t.position="";t.width="";for(var e=0,i=this.items.length;e<i;e++){var r=this.items[e];r.destroy()}this.unbindResize();delete this.element.outlayerGUID;if(n){n.removeData(this.element,this.constructor.namespace)}};y.data=function(t){var e=t&&t.outlayerGUID;return e&&g[e]};function _(t,e){t.prototype[e]=s({},y.prototype[e])}y.create=function(t,r){function o(){y.apply(this,arguments)}if(Object.create){o.prototype=Object.create(y.prototype)}else{s(o.prototype,y.prototype)}o.prototype.constructor=o;_(o,"options");s(o.prototype.options,r);o.namespace=t;o.data=y.data;o.Item=function l(){v.apply(this,arguments)};o.Item.prototype=new v;a(function(){var r=f(t);var s=e.querySelectorAll(".js-"+r);var a="data-"+r+"-options";for(var l=0,c=s.length;l<c;l++){var u=s[l];var h=u.getAttribute(a);var d;try{d=h&&JSON.parse(h)}catch(p){if(i){i.error("Error parsing "+a+" on "+u.nodeName.toLowerCase()+(u.id?"#"+u.id:"")+": "+p)}continue}var v=new o(u,d);if(n){n.data(u,t,v)}}});if(n&&n.bridget){n.bridget(t,o)}return o};y.Item=v;return y}if(typeof define==="function"&&define.amd){define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],d)}else{t.Outlayer=d(t.eventie,t.docReady,t.EventEmitter,t.getSize,t.matchesSelector,t.Outlayer.Item)}})(window);(function(t){var e=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;i<n;i++){var r=t[i];if(r===e){return i}}return-1};function i(t,i){var n=t.create("masonry");n.prototype._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();var t=this.cols;this.colYs=[];while(t--){this.colYs.push(0)}this.maxY=0};n.prototype.measureColumns=function(){this.getContainerWidth();if(!this.columnWidth){var t=this.items[0];var e=t&&t.element;this.columnWidth=e&&i(e).outerWidth||this.containerWidth}this.columnWidth+=this.gutter;this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth);this.cols=Math.max(this.cols,1)};n.prototype.getContainerWidth=function(){var t=this.options.isFitWidth?this.element.parentNode:this.element;var e=i(t);this.containerWidth=e&&e.innerWidth};n.prototype._getItemLayoutPosition=function(t){t.getSize();var i=t.size.outerWidth%this.columnWidth;var n=i&&i<1?"round":"ceil";var r=Math[n](t.size.outerWidth/this.columnWidth);r=Math.min(r,this.cols);var s=this._getColGroup(r);var o=Math.min.apply(Math,s);var a=e(s,o);var l={x:this.columnWidth*a,y:o};var c=o+t.size.outerHeight;var u=this.cols+1-s.length;for(var h=0;h<u;h++){this.colYs[a+h]=c}return l};n.prototype._getColGroup=function(t){if(t<2){return this.colYs}var e=[];var i=this.cols+1-t;for(var n=0;n<i;n++){var r=this.colYs.slice(n,n+t);e[n]=Math.max.apply(Math,r)}return e};n.prototype._manageStamp=function(t){var e=i(t);var n=this._getElementOffset(t);var r=this.options.isOriginLeft?n.left:n.right;var s=r+e.outerWidth;var o=Math.floor(r/this.columnWidth);o=Math.max(0,o);var a=Math.floor(s/this.columnWidth);a-=s%this.columnWidth?0:1;a=Math.min(this.cols-1,a);var l=(this.options.isOriginTop?n.top:n.bottom)+e.outerHeight;for(var c=o;c<=a;c++){this.colYs[c]=Math.max(l,this.colYs[c])}};n.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};if(this.options.isFitWidth){t.width=this._getContainerFitWidth()}return t};n.prototype._getContainerFitWidth=function(){var t=0;var e=this.cols;while(--e){if(this.colYs[e]!==0){break}t++}return(this.cols-t)*this.columnWidth-this.gutter};n.prototype.resize=function(){var t=this.containerWidth;this.getContainerWidth();if(t===this.containerWidth){return}this.layout()};return n}if(typeof define==="function"&&define.amd){define(["outlayer/outlayer","get-size/get-size"],i)}else{t.Masonry=i(t.Outlayer,t.getSize)}})(window);(function(t){var e;var i=0;var n={};var r=+new Date+"";var s=75;var o=/\b__p \+= '';/g,a=/\b(__p \+=) '' \+/g,l=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var c=/&(?:amp|lt|gt|quot|#39);/g;var u=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var h=/\w*$/;var f=/<%=([\s\S]+?)%>/g;var d=/($^)/;var p=/[&<>"']/g;var v=/['\n\r\t\u2028\u2029\\]/g;var m=0;var g="[object Arguments]",y="[object Array]",_="[object Boolean]",E="[object Date]",b="[object Error]",w="[object Function]",x="[object Number]",S="[object Object]",T="[object RegExp]",M="[object String]";var C={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false};var P={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};var O=C[typeof exports]&&exports;var L=C[typeof module]&&module&&module.exports==O&&module;var I=C[typeof global]&&global;if(I&&(I.global===I||I.window===I)){t=I}function k(t,e,i){var n=(i||0)-1,r=t.length;while(++n<r){if(t[n]===e){return n}}return-1}function A(t,e){var i=t.index,n=e.index;t=t.criteria;e=e.criteria;if(t!==e){if(t>e||typeof t=="undefined"){return 1}if(t<e||typeof e=="undefined"){return-1}}return i<n?-1:1}function N(t){return"\\"+P[t]}function R(){}var D=[];var H=Object.prototype,B=String.prototype;var W=t._;var z=RegExp("^"+String(H.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$");var X=Math.ceil,Y=t.clearTimeout,j=D.concat,U=Math.floor,V=H.hasOwnProperty,F=D.push,q=H.propertyIsEnumerable,$=t.setTimeout,G=H.toString;var Z=z.test(Z=G.bind)&&Z,Q=z.test(Q=Object.create)&&Q,K=z.test(K=Array.isArray)&&K,J=t.isFinite,te=t.isNaN,ee=z.test(ee=Object.keys)&&ee,ie=Math.max,ne=Math.min,re=Math.random,se=D.slice;var oe=z.test(t.attachEvent),ae=Z&&!/\n|true/.test(Z+oe);function le(t){return t instanceof le?t:new ce(t)}function ce(t){this.__wrapped__=t}ce.prototype=le.prototype;var ue={};(function(){var t={0:1,length:1};ue.fastBind=Z&&!ae;ue.spliceObjects=(D.splice.call(t,0,1),!t[0])})(1);le.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:f,variable:""};function he(t,e,i,n){var r=De(t),s=!i,o=e;if(s){var a=n;i=e}else if(!r){if(!n){throw new TypeError}e=t}function l(){var n=arguments,c=s?this:e;if(!r){t=e[o]}if(i.length){n=n.length?(n=se.call(n),a?n.concat(i):i.concat(n)):i}if(this instanceof l){c=fe(t.prototype);var u=t.apply(c,n);return He(u)?u:c}return t.apply(c,n)}return l}function fe(t){return He(t)?Q(t):{}}if(!Q){var fe=function(t){if(He(t)){R.prototype=t;var e=new R;R.prototype=null}return e||{}}}function de(t){return Ee[t]}function pe(t,e,i){var n=(n=le.indexOf)===Ei?k:n;return n}function ve(t){return be[t]}function me(t){return G.call(t)==g}if(!me(arguments)){me=function(t){return t?V.call(t,"callee"):false}}var ge=K||function(t){return t?typeof t=="object"&&G.call(t)==y:false};var ye=function(t){var e,i=t,n=[];if(!i)return n;if(!C[typeof t])return n;for(e in i){if(V.call(i,e)){n.push(e)}}return n};var _e=!ee?ye:function(t){if(!He(t)){return[]}return ee(t)};var Ee={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var be=Oe(Ee);function we(t){if(!t){return t}for(var e=1,i=arguments.length;e<i;e++){var n=arguments[e];if(n){for(var r in n){t[r]=n[r]}}}return t}function xe(t){return He(t)?ge(t)?se.call(t):we({},t):t}function Se(t){if(!t){return t}for(var e=1,i=arguments.length;e<i;e++){var n=arguments[e];if(n){for(var r in n){if(t[r]==null){t[r]=n[r]}}}}return t}var Te=function(t,e){var i,r=t,s=r;if(!r)return s;if(!C[typeof r])return s;for(i in r){if(e(r[i],i,t)===n)return s}return s};var Me=function(t,e){var i,r=t,s=r;if(!r)return s;if(!C[typeof r])return s;for(i in r){if(V.call(r,i)){if(e(r[i],i,t)===n)return s}}return s};function Ce(t){var e=[];Te(t,function(t,i){if(De(t)){e.push(i)}});return e.sort()}function Pe(t,e){return t?V.call(t,e):false}function Oe(t){var e=-1,i=_e(t),n=i.length,r={};while(++e<n){var s=i[e];r[t[s]]=s}return r}function Le(t){return t===true||t===false||G.call(t)==_}function Ie(t){return t?typeof t=="object"&&G.call(t)==E:false}function ke(t){return t?t.nodeType===1:false}function Ae(t){if(!t){return true}if(ge(t)||Ye(t)){return!t.length}for(var e in t){if(V.call(t,e)){return false}}return true}function Ne(t,e,i,r){if(t===e){return t!==0||1/t==1/e}var s=typeof t,o=typeof e;if(t===t&&(!t||s!="function"&&s!="object")&&(!e||o!="function"&&o!="object")){return false}if(t==null||e==null){return t===e}var a=G.call(t),l=G.call(e);if(a!=l){return false}switch(a){case _:case E:return+t==+e;case x:return t!=+t?e!=+e:t==0?1/t==1/e:t==+e;case T:case M:return t==String(e)}var c=a==y;if(!c){if(t instanceof le||e instanceof le){return Ne(t.__wrapped__||t,e.__wrapped__||e,i,r)}if(a!=S){return false}var u=t.constructor,h=e.constructor;if(u!=h&&!(De(u)&&u instanceof u&&De(h)&&h instanceof h)){return false}}i||(i=[]);r||(r=[]);var f=i.length;while(f--){if(i[f]==t){return r[f]==e}}var d=true,p=0;i.push(t);r.push(e);if(c){p=e.length;d=p==t.length;if(d){while(p--){if(!(d=Ne(t[p],e[p],i,r))){break}}}return d}Te(e,function(e,s,o){if(V.call(o,s)){p++;return!(d=V.call(t,s)&&Ne(t[s],e,i,r))&&n}});if(d){Te(t,function(t,e,i){if(V.call(i,e)){return!(d=--p>-1)&&n}})}return d}function Re(t){return J(t)&&!te(parseFloat(t))}function De(t){return typeof t=="function"}if(De(/x/)){De=function(t){return typeof t=="function"&&G.call(t)==w}}function He(t){return!!(t&&C[typeof t])}function Be(t){return ze(t)&&t!=+t}function We(t){return t===null}function ze(t){return typeof t=="number"||G.call(t)==x}function Xe(t){return!!(t&&C[typeof t])&&G.call(t)==T}function Ye(t){return typeof t=="string"||G.call(t)==M}function je(t){return typeof t=="undefined"}function Ue(t){var e=pe(),i=j.apply(D,se.call(arguments,1)),n={};Te(t,function(t,r){if(e(i,r)<0){n[r]=t}});return n}function Ve(t){var e=-1,i=_e(t),n=i.length,r=Array(n);while(++e<n){var s=i[e];r[e]=[s,t[s]]}return r}function Fe(t){var e=-1,i=j.apply(D,se.call(arguments,1)),n=i.length,r={};while(++e<n){var s=i[e];if(s in t){r[s]=t[s]}}return r}function qe(t){var e=-1,i=_e(t),n=i.length,r=Array(n);while(++e<n){r[e]=t[i[e]]}return r}function $e(t,e){var i=pe(),r=t?t.length:0,s=false;if(r&&typeof r=="number"){s=i(t,e)>-1}else{Me(t,function(t){return(s=t===e)&&n})}return s}function Ge(t,e,i){var n={};e=Bi(e,i);ti(t,function(t,i,r){i=String(e(t,i,r));V.call(n,i)?n[i]++:n[i]=1});return n}function Ze(t,e,i){var r=true;e=Bi(e,i);var s=-1,o=t?t.length:0;if(typeof o=="number"){while(++s<o){if(!(r=!!e(t[s],s,t))){break}}}else{Me(t,function(t,i,s){return!(r=!!e(t,i,s))&&n})}return r}function Qe(t,e,i){var n=[];e=Bi(e,i);var r=-1,s=t?t.length:0;if(typeof s=="number"){while(++r<s){var o=t[r];if(e(o,r,t)){n.push(o)}}}else{Me(t,function(t,i,r){if(e(t,i,r)){n.push(t)}})}return n}function Ke(t,e,i){e=Bi(e,i);var r=-1,s=t?t.length:0;if(typeof s=="number"){while(++r<s){var o=t[r];if(e(o,r,t)){return o}}}else{var a;Me(t,function(t,i,r){if(e(t,i,r)){a=t;return n}});return a}}function Je(t,e){return vi(t,e,true)}function ti(t,e,i){var r=-1,s=t?t.length:0;e=e&&typeof i=="undefined"?e:Bi(e,i);if(typeof s=="number"){while(++r<s){if(e(t[r],r,t)===n){break}}}else{Me(t,e)}}function ei(t,e,i){var n={};e=Bi(e,i);ti(t,function(t,i,r){i=String(e(t,i,r));(V.call(n,i)?n[i]:n[i]=[]).push(t)});return n}function ii(t,e){var i=se.call(arguments,2),n=-1,r=typeof e=="function",s=t?t.length:0,o=Array(typeof s=="number"?s:0);ti(t,function(t){o[++n]=(r?e:t[e]).apply(t,i)});return o}function ni(t,e,i){var n=-1,r=t?t.length:0;e=Bi(e,i);if(typeof r=="number"){var s=Array(r);while(++n<r){s[n]=e(t[n],n,t)}}else{s=[];Me(t,function(t,i,r){s[++n]=e(t,i,r)})}return s}function ri(t,e,i){var n=-Infinity,r=n;var s=-1,o=t?t.length:0;if(!e&&typeof o=="number"){while(++s<o){var a=t[s];if(a>r){r=a}}}else{e=Bi(e,i);ti(t,function(t,i,s){var o=e(t,i,s);if(o>n){n=o;r=t}})}return r}function si(t,e,i){var n=Infinity,r=n;var s=-1,o=t?t.length:0;if(!e&&typeof o=="number"){while(++s<o){var a=t[s];if(a<r){r=a}}}else{e=Bi(e,i);ti(t,function(t,i,s){var o=e(t,i,s);if(o<n){n=o;r=t}})}return r}function oi(t,e){var i=-1,n=t?t.length:0;if(typeof n=="number"){var r=Array(n);while(++i<n){r[i]=t[i][e]}}return r||ni(t,e)}function ai(t,e,i,n){if(!t)return i;var r=arguments.length<3;e=Bi(e,n,4);var s=-1,o=t.length;if(typeof o=="number"){if(r){i=t[++s]}while(++s<o){i=e(i,t[s],s,t)}}else{Me(t,function(t,n,s){i=r?(r=false,t):e(i,t,n,s)})}return i}function li(t,e,i,n){var r=t,s=t?t.length:0,o=arguments.length<3;if(typeof s!="number"){var a=_e(t);s=a.length}e=Bi(e,n,4);ti(t,function(t,n,l){n=a?a[--s]:--s;i=o?(o=false,r[n]):e(i,r[n],n,l)});return i}function ci(t,e,i){e=Bi(e,i);return Qe(t,function(t,i,n){return!e(t,i,n)})}function ui(t){var e=-1,i=t?t.length:0,n=Array(typeof i=="number"?i:0);ti(t,function(t){var i=U(re()*(++e+1));n[e]=n[i];n[i]=t});return n}function hi(t){var e=t?t.length:0;return typeof e=="number"?e:_e(t).length}function fi(t,e,i){var r;e=Bi(e,i);var s=-1,o=t?t.length:0;if(typeof o=="number"){while(++s<o){if(r=e(t[s],s,t)){break}}}else{Me(t,function(t,i,s){return(r=e(t,i,s))&&n})}return!!r}function di(t,e,i){var n=-1,r=t?t.length:0,s=Array(typeof r=="number"?r:0);e=Bi(e,i);ti(t,function(t,i,r){s[++n]={criteria:e(t,i,r),index:n,value:t}});r=s.length;s.sort(A);while(r--){s[r]=s[r].value}return s}function pi(t){if(ge(t)){return se.call(t)}if(t&&typeof t.length=="number"){return ni(t)}return qe(t)}function vi(t,e,i){return i&&Ae(e)?null:(i?Ke:Qe)(t,e)}function mi(t){var e=-1,i=t?t.length:0,n=[];while(++e<i){var r=t[e];if(r){n.push(r)}}return n}function gi(t){var e=-1,i=pe(),n=t.length,r=j.apply(D,se.call(arguments,1)),s=[];while(++e<n){var o=t[e];if(i(r,o)<0){s.push(o)}}return s}function yi(t,e,i){if(t){var n=0,r=t.length;if(typeof e!="number"&&e!=null){var s=-1;e=Bi(e,i);while(++s<r&&e(t[s],s,t)){n++}}else{n=e;if(n==null||i){return t[0]}}return se.call(t,0,ne(ie(0,n),r))}}function _i(t,e){var i=-1,n=t?t.length:0,r=[];while(++i<n){var s=t[i];if(ge(s)){F.apply(r,e?s:_i(s))}else{r.push(s)}}return r}function Ei(t,e,i){if(typeof i=="number"){var n=t?t.length:0;i=i<0?ie(0,n+i):i||0}else if(i){var r=Ci(t,e);return t[r]===e?r:-1}return t?k(t,e,i):-1}function bi(t,e,i){if(!t){return[]}var n=0,r=t.length;if(typeof e!="number"&&e!=null){var s=r;e=Bi(e,i);while(s--&&e(t[s],s,t)){n++}}else{n=e==null||i?1:e||n}return se.call(t,0,ne(ie(0,r-n),r))}function wi(t){var e=arguments,i=e.length,n=-1,r=pe(),s=t?t.length:0,o=[];t:while(++n<s){var a=t[n];if(r(o,a)<0){var l=i;while(--l){if(r(e[l],a)<0){continue t}}o.push(a)}}return o}function xi(t,e,i){if(t){var n=0,r=t.length;if(typeof e!="number"&&e!=null){var s=r;e=Bi(e,i);while(s--&&e(t[s],s,t)){n++}}else{n=e;if(n==null||i){return t[r-1]}}return se.call(t,ie(0,r-n))}}function Si(t,e,i){var n=t?t.length:0;if(typeof i=="number"){n=(i<0?ie(0,n+i):ne(i,n-1))+1}while(n--){if(t[n]===e){return n}}return-1}function Ti(t,e,i){t=+t||0;i=+i||1;if(e==null){e=t;t=0}var n=-1,r=ie(0,X((e-t)/i)),s=Array(r);while(++n<r){s[n]=t;t+=i}return s}function Mi(t,e,i){if(typeof e!="number"&&e!=null){var n=0,r=-1,s=t?t.length:0;e=Bi(e,i);while(++r<s&&e(t[r],r,t)){n++}}else{n=e==null||i?1:ie(0,e)}return se.call(t,n)}function Ci(t,e,i,n){var r=0,s=t?t.length:r;i=i?Bi(i,n,1):$i;e=i(e);while(r<s){var o=r+s>>>1;i(t[o])<e?r=o+1:s=o}return r}function Pi(t){if(!ge(t)){arguments[0]=t?se.call(t):D}return Oi(j.apply(D,arguments))}function Oi(t,e,i,n){var r=-1,s=pe(),o=t?t.length:0,a=[],l=a;if(typeof e!="boolean"&&e!=null){n=i;i=e;e=false}if(i!=null){l=[];i=Bi(i,n)}while(++r<o){var c=t[r],u=i?i(c,r,t):c;if(e?!r||l[l.length-1]!==u:s(l,u)<0){if(i){l.push(u)}a.push(c)}}return a}function Li(t){var e=-1,i=t?ri(oi(t,"length")):0,n=Array(i<0?0:i);while(++e<i){n[e]=oi(t,e)}return n}function Ii(t){return gi(t,se.call(arguments,1))}function ki(t){var e=-1,i=t?ri(oi(arguments,"length")):0,n=Array(i<0?0:i);while(++e<i){n[e]=oi(arguments,e)}return n}function Ai(t,e){var i=-1,n=t?t.length:0,r={};while(++i<n){var s=t[i];if(e){r[s]=e[i]}else{r[s[0]]=s[1]}}return r}function Ni(t,e){if(t<1){return e()}return function(){if(--t<1){return e.apply(this,arguments)}}}function Ri(t,e){return ue.fastBind||Z&&arguments.length>2?Z.call.apply(Z,arguments):he(t,e,se.call(arguments,2))}function Di(t){var e=arguments.length>1?j.apply(D,se.call(arguments,1)):Ce(t),i=-1,n=e.length;while(++i<n){var r=e[i];t[r]=Ri(t[r],t)}return t}function Hi(){var t=arguments;return function(){var e=arguments,i=t.length;while(i--){e=[t[i].apply(this,e)]}return e[0]}}function Bi(t,e,i){if(t==null){return $i}var n=typeof t;if(n!="function"){if(n!="object"){return function(e){return e[t]}}var r=_e(t);return function(e){var i=r.length,n=false;while(i--){if(!(n=e[r[i]]===t[r[i]])){break}}return n}}if(typeof e=="undefined"){return t}if(i===1){return function(i){return t.call(e,i)}}if(i===2){return function(i,n){return t.call(e,i,n)}}if(i===4){return function(i,n,r,s){return t.call(e,i,n,r,s)}}return function(i,n,r){return t.call(e,i,n,r)}}function Wi(t,e,i){var n,r,s,o=null;function a(){o=null;if(!i){r=t.apply(s,n)}}return function(){var l=i&&!o;n=arguments;s=this;Y(o);o=$(a,e);if(l){r=t.apply(s,n)}return r}}function zi(t){var i=se.call(arguments,1);return $(function(){t.apply(e,i)},1)}function Xi(t,i){var n=se.call(arguments,2);return $(function(){t.apply(e,n)},i)}function Yi(t,e){var i={};return function(){var n=r+(e?e.apply(this,arguments):arguments[0]);return V.call(i,n)?i[n]:i[n]=t.apply(this,arguments)}}function ji(t){var e,i;return function(){if(e){return i}e=true;i=t.apply(this,arguments);t=null;return i}}function Ui(t){return he(t,se.call(arguments,1))}function Vi(t,e){var i,n,r,s=0,o=null;function a(){s=new Date;o=null;n=t.apply(r,i)}return function(){var l=new Date,c=e-(l-s);i=arguments;r=this;if(c<=0){Y(o);o=null;s=l;n=t.apply(r,i)}else if(!o){o=$(a,c)}return n}}function Fi(t,e){return function(){var i=[t];F.apply(i,arguments);return e.apply(this,i)}}function qi(t){return t==null?"":String(t).replace(p,de)}function $i(t){return t}function Gi(t){ti(Ce(t),function(e){var i=le[e]=t[e];le.prototype[e]=function(){var t=[this.__wrapped__];F.apply(t,arguments);var e=i.apply(le,t);if(this.__chain__){e=new ce(e);e.__chain__=true}return e}})}function Zi(){t._=W;return this}function Qi(t,e){if(t==null&&e==null){e=1}t=+t||0;if(e==null){e=t;t=0}else{e=+e||0}var i=re();return t%1||e%1?t+ne(i*(e-t+parseFloat("1e-"+((i+"").length-1))),e):t+U(i*(e-t+1))}function Ki(t,e){var i=t?t[e]:null;return De(i)?t[e]():i}function Ji(t,e,i){var n=le.templateSettings;t||(t="");i=Se({},i,n);var r=0,s="__p += '",o=i.variable;var a=RegExp((i.escape||d).source+"|"+(i.interpolate||d).source+"|"+(i.evaluate||d).source+"|$","g");t.replace(a,function(e,i,n,o,a){s+=t.slice(r,a).replace(v,N);if(i){s+="' +\n_.escape("+i+") +\n'"}if(o){s+="';\n"+o+";\n__p += '"}if(n){s+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"}r=a+e.length;return e});s+="';\n";if(!o){o="obj";s="with ("+o+" || {}) {\n"+s+"\n}\n"}s="function("+o+") {\n"+"var __t, __p = '', __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n"+s+"return __p\n}";try{var l=Function("_","return "+s)(le)}catch(c){c.source=s;throw c}if(e){return l(e)}l.source=s;return l}function tn(t,e,i){var n=-1,r=Array(t>-1?t:0);while(++n<t){r[n]=e.call(i,n)}return r}function en(t){return t==null?"":String(t).replace(c,ve)}function nn(t){var e=++i+"";return t?t+e:e}function rn(t){t=new ce(t);t.__chain__=true;return t}function sn(t,e){e(t);return t}function on(){this.__chain__=true;return this}function an(){return String(this.__wrapped__)}function ln(){return this.__wrapped__}le.after=Ni;le.bind=Ri;le.bindAll=Di;le.compact=mi;le.compose=Hi;le.countBy=Ge;le.debounce=Wi;le.defaults=Se;le.defer=zi;le.delay=Xi;le.difference=gi;le.filter=Qe;le.flatten=_i;le.forEach=ti;le.functions=Ce;le.groupBy=ei;le.initial=bi;le.intersection=wi;le.invert=Oe;le.invoke=ii;le.keys=_e;le.map=ni;le.max=ri;le.memoize=Yi;le.min=si;le.omit=Ue;le.once=ji;le.pairs=Ve;le.partial=Ui;le.pick=Fe;le.pluck=oi;le.range=Ti;le.reject=ci;le.rest=Mi;le.shuffle=ui;le.sortBy=di;le.tap=sn;le.throttle=Vi;le.times=tn;le.toArray=pi;le.union=Pi;le.uniq=Oi;le.values=qe;le.where=vi;le.without=Ii;le.wrap=Fi;le.zip=ki;le.collect=ni;le.drop=Mi;le.each=ti;le.extend=we;le.methods=Ce;le.object=Ai;le.select=Qe;le.tail=Mi;le.unique=Oi;le.chain=rn;le.clone=xe;le.contains=$e;le.escape=qi;le.every=Ze;le.find=Ke;le.has=Pe;le.identity=$i;le.indexOf=Ei;le.isArguments=me;le.isArray=ge;le.isBoolean=Le;le.isDate=Ie;le.isElement=ke;le.isEmpty=Ae;le.isEqual=Ne;le.isFinite=Re;le.isFunction=De;le.isNaN=Be;le.isNull=We;le.isNumber=ze;le.isObject=He;le.isRegExp=Xe;le.isString=Ye;le.isUndefined=je;le.lastIndexOf=Si;le.mixin=Gi;le.noConflict=Zi;le.random=Qi;le.reduce=ai;le.reduceRight=li;le.result=Ki;le.size=hi;le.some=fi;le.sortedIndex=Ci;le.template=Ji;le.unescape=en;le.uniqueId=nn;le.all=Ze;le.any=fi;le.detect=Ke;le.findWhere=Je;le.foldl=ai;le.foldr=li;le.include=$e;le.inject=ai;le.first=yi;le.last=xi;le.take=yi;le.head=yi;le.VERSION="1.3.1";Gi(le);le.prototype.chain=on;le.prototype.value=ln;ti(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=D[t];le.prototype[t]=function(){var t=this.__wrapped__;e.apply(t,arguments);if(!ue.spliceObjects&&t.length===0){delete t[0]}return this}});ti(["concat","join","slice"],function(t){var e=D[t];le.prototype[t]=function(){var t=this.__wrapped__,i=e.apply(t,arguments);if(this.__chain__){i=new ce(i);i.__chain__=true}return i}});if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){t._=le;define(function(){return le})}else if(O&&!O.nodeType){if(L){(L.exports=le)._=le}else{O._=le}}else{t._=le}})(this);(function(){var t=this;var e=t.Backbone;var i=[];var n=i.push;var r=i.slice;var s=i.splice;var o;if(typeof exports!=="undefined"){o=exports}else{o=t.Backbone={}}o.VERSION="1.1.0";var a=t._;if(!a&&typeof require!=="undefined")a=require("underscore");o.$=t.jQuery||t.Zepto||t.ender||t.$;o.noConflict=function(){t.Backbone=e;return this};o.emulateHTTP=false;o.emulateJSON=false;var l=o.Events={on:function(t,e,i){if(!u(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);n.push({callback:e,context:i,ctx:i||this});return this},once:function(t,e,i){if(!u(this,"once",t,[e,i])||!e)return this;var n=this;var r=a.once(function(){n.off(t,r);e.apply(this,arguments)});r._callback=e;return this.on(t,r,i)},off:function(t,e,i){var n,r,s,o,l,c,h,f;if(!this._events||!u(this,"off",t,[e,i]))return this;if(!t&&!e&&!i){this._events={};return this}o=t?[t]:a.keys(this._events);for(l=0,c=o.length;l<c;l++){t=o[l];if(s=this._events[t]){this._events[t]=n=[];if(e||i){for(h=0,f=s.length;h<f;h++){r=s[h];if(e&&e!==r.callback&&e!==r.callback._callback||i&&i!==r.context){n.push(r)}}}if(!n.length)delete this._events[t]}}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!u(this,"trigger",t,e))return this;
var i=this._events[t];var n=this._events.all;if(i)h(i,e);if(n)h(n,arguments);return this},stopListening:function(t,e,i){var n=this._listeningTo;if(!n)return this;var r=!e&&!i;if(!i&&typeof e==="object")i=this;if(t)(n={})[t._listenId]=t;for(var s in n){t=n[s];t.off(e,i,this);if(r||a.isEmpty(t._events))delete this._listeningTo[s]}return this}};var c=/\s+/;var u=function(t,e,i,n){if(!i)return true;if(typeof i==="object"){for(var r in i){t[e].apply(t,[r,i[r]].concat(n))}return false}if(c.test(i)){var s=i.split(c);for(var o=0,a=s.length;o<a;o++){t[e].apply(t,[s[o]].concat(n))}return false}return true};var h=function(t,e){var i,n=-1,r=t.length,s=e[0],o=e[1],a=e[2];switch(e.length){case 0:while(++n<r)(i=t[n]).callback.call(i.ctx);return;case 1:while(++n<r)(i=t[n]).callback.call(i.ctx,s);return;case 2:while(++n<r)(i=t[n]).callback.call(i.ctx,s,o);return;case 3:while(++n<r)(i=t[n]).callback.call(i.ctx,s,o,a);return;default:while(++n<r)(i=t[n]).callback.apply(i.ctx,e)}};var f={listenTo:"on",listenToOnce:"once"};a.each(f,function(t,e){l[e]=function(e,i,n){var r=this._listeningTo||(this._listeningTo={});var s=e._listenId||(e._listenId=a.uniqueId("l"));r[s]=e;if(!n&&typeof i==="object")n=this;e[t](i,n,this);return this}});l.bind=l.on;l.unbind=l.off;a.extend(o,l);var d=o.Model=function(t,e){var i=t||{};e||(e={});this.cid=a.uniqueId("c");this.attributes={};if(e.collection)this.collection=e.collection;if(e.parse)i=this.parse(i,e)||{};i=a.defaults({},i,a.result(this,"defaults"));this.set(i,e);this.changed={};this.initialize.apply(this,arguments)};a.extend(d.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return a.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return a.escape(this.get(t))},has:function(t){return this.get(t)!=null},set:function(t,e,i){var n,r,s,o,l,c,u,h;if(t==null)return this;if(typeof t==="object"){r=t;i=e}else{(r={})[t]=e}i||(i={});if(!this._validate(r,i))return false;s=i.unset;l=i.silent;o=[];c=this._changing;this._changing=true;if(!c){this._previousAttributes=a.clone(this.attributes);this.changed={}}h=this.attributes,u=this._previousAttributes;if(this.idAttribute in r)this.id=r[this.idAttribute];for(n in r){e=r[n];if(!a.isEqual(h[n],e))o.push(n);if(!a.isEqual(u[n],e)){this.changed[n]=e}else{delete this.changed[n]}s?delete h[n]:h[n]=e}if(!l){if(o.length)this._pending=true;for(var f=0,d=o.length;f<d;f++){this.trigger("change:"+o[f],this,h[o[f]],i)}}if(c)return this;if(!l){while(this._pending){this._pending=false;this.trigger("change",this,i)}}this._pending=false;this._changing=false;return this},unset:function(t,e){return this.set(t,void 0,a.extend({},e,{unset:true}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,a.extend({},t,{unset:true}))},hasChanged:function(t){if(t==null)return!a.isEmpty(this.changed);return a.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?a.clone(this.changed):false;var e,i=false;var n=this._changing?this._previousAttributes:this.attributes;for(var r in t){if(a.isEqual(n[r],e=t[r]))continue;(i||(i={}))[r]=e}return i},previous:function(t){if(t==null||!this._previousAttributes)return null;return this._previousAttributes[t]},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(t){t=t?a.clone(t):{};if(t.parse===void 0)t.parse=true;var e=this;var i=t.success;t.success=function(n){if(!e.set(e.parse(n,t),t))return false;if(i)i(e,n,t);e.trigger("sync",e,n,t)};B(this,t);return this.sync("read",this,t)},save:function(t,e,i){var n,r,s,o=this.attributes;if(t==null||typeof t==="object"){n=t;i=e}else{(n={})[t]=e}i=a.extend({validate:true},i);if(n&&!i.wait){if(!this.set(n,i))return false}else{if(!this._validate(n,i))return false}if(n&&i.wait){this.attributes=a.extend({},o,n)}if(i.parse===void 0)i.parse=true;var l=this;var c=i.success;i.success=function(t){l.attributes=o;var e=l.parse(t,i);if(i.wait)e=a.extend(n||{},e);if(a.isObject(e)&&!l.set(e,i)){return false}if(c)c(l,t,i);l.trigger("sync",l,t,i)};B(this,i);r=this.isNew()?"create":i.patch?"patch":"update";if(r==="patch")i.attrs=n;s=this.sync(r,this,i);if(n&&i.wait)this.attributes=o;return s},destroy:function(t){t=t?a.clone(t):{};var e=this;var i=t.success;var n=function(){e.trigger("destroy",e,e.collection,t)};t.success=function(r){if(t.wait||e.isNew())n();if(i)i(e,r,t);if(!e.isNew())e.trigger("sync",e,r,t)};if(this.isNew()){t.success();return false}B(this,t);var r=this.sync("delete",this,t);if(!t.wait)n();return r},url:function(){var t=a.result(this,"urlRoot")||a.result(this.collection,"url")||H();if(this.isNew())return t;return t+(t.charAt(t.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(t){return this._validate({},a.extend(t||{},{validate:true}))},_validate:function(t,e){if(!e.validate||!this.validate)return true;t=a.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;if(!i)return true;this.trigger("invalid",this,i,a.extend(e,{validationError:i}));return false}});var p=["keys","values","pairs","invert","pick","omit"];a.each(p,function(t){d.prototype[t]=function(){var e=r.call(arguments);e.unshift(this.attributes);return a[t].apply(a,e)}});var v=o.Collection=function(t,e){e||(e={});if(e.model)this.model=e.model;if(e.comparator!==void 0)this.comparator=e.comparator;this._reset();this.initialize.apply(this,arguments);if(t)this.reset(t,a.extend({silent:true},e))};var m={add:true,remove:true,merge:true};var g={add:true,remove:false};a.extend(v.prototype,l,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return o.sync.apply(this,arguments)},add:function(t,e){return this.set(t,a.extend({merge:false},e,g))},remove:function(t,e){var i=!a.isArray(t);t=i?[t]:a.clone(t);e||(e={});var n,r,s,o;for(n=0,r=t.length;n<r;n++){o=t[n]=this.get(t[n]);if(!o)continue;delete this._byId[o.id];delete this._byId[o.cid];s=this.indexOf(o);this.models.splice(s,1);this.length--;if(!e.silent){e.index=s;o.trigger("remove",o,this,e)}this._removeReference(o)}return i?t[0]:t},set:function(t,e){e=a.defaults({},e,m);if(e.parse)t=this.parse(t,e);var i=!a.isArray(t);t=i?t?[t]:[]:a.clone(t);var n,r,s,o,l,c,u;var h=e.at;var f=this.model;var p=this.comparator&&h==null&&e.sort!==false;var v=a.isString(this.comparator)?this.comparator:null;var g=[],y=[],_={};var E=e.add,b=e.merge,w=e.remove;var x=!p&&E&&w?[]:false;for(n=0,r=t.length;n<r;n++){l=t[n];if(l instanceof d){s=o=l}else{s=l[f.prototype.idAttribute]}if(c=this.get(s)){if(w)_[c.cid]=true;if(b){l=l===o?o.attributes:l;if(e.parse)l=c.parse(l,e);c.set(l,e);if(p&&!u&&c.hasChanged(v))u=true}t[n]=c}else if(E){o=t[n]=this._prepareModel(l,e);if(!o)continue;g.push(o);o.on("all",this._onModelEvent,this);this._byId[o.cid]=o;if(o.id!=null)this._byId[o.id]=o}if(x)x.push(c||o)}if(w){for(n=0,r=this.length;n<r;++n){if(!_[(o=this.models[n]).cid])y.push(o)}if(y.length)this.remove(y,e)}if(g.length||x&&x.length){if(p)u=true;this.length+=g.length;if(h!=null){for(n=0,r=g.length;n<r;n++){this.models.splice(h+n,0,g[n])}}else{if(x)this.models.length=0;var S=x||g;for(n=0,r=S.length;n<r;n++){this.models.push(S[n])}}}if(u)this.sort({silent:true});if(!e.silent){for(n=0,r=g.length;n<r;n++){(o=g[n]).trigger("add",o,this,e)}if(u||x&&x.length)this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,n=this.models.length;i<n;i++){this._removeReference(this.models[i])}e.previousModels=this.models;this._reset();t=this.add(t,a.extend({silent:true},e));if(!e.silent)this.trigger("reset",this,e);return t},push:function(t,e){return this.add(t,a.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);this.remove(e,t);return e},unshift:function(t,e){return this.add(t,a.extend({at:0},e))},shift:function(t){var e=this.at(0);this.remove(e,t);return e},slice:function(){return r.apply(this.models,arguments)},get:function(t){if(t==null)return void 0;return this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){if(a.isEmpty(t))return e?void 0:[];return this[e?"find":"filter"](function(e){for(var i in t){if(t[i]!==e.get(i))return false}return true})},findWhere:function(t){return this.where(t,true)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");t||(t={});if(a.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(a.bind(this.comparator,this))}if(!t.silent)this.trigger("sort",this,t);return this},pluck:function(t){return a.invoke(this.models,"get",t)},fetch:function(t){t=t?a.clone(t):{};if(t.parse===void 0)t.parse=true;var e=t.success;var i=this;t.success=function(n){var r=t.reset?"reset":"set";i[r](n,t);if(e)e(i,n,t);i.trigger("sync",i,n,t)};B(this,t);return this.sync("read",this,t)},create:function(t,e){e=e?a.clone(e):{};if(!(t=this._prepareModel(t,e)))return false;if(!e.wait)this.add(t,e);var i=this;var n=e.success;e.success=function(t,e,r){if(r.wait)i.add(t,r);if(n)n(t,e,r)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(t instanceof d){if(!t.collection)t.collection=this;return t}e=e?a.clone(e):{};e.collection=this;var i=new this.model(t,e);if(!i.validationError)return i;this.trigger("invalid",this,i.validationError,e);return false},_removeReference:function(t){if(this===t.collection)delete t.collection;t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if((t==="add"||t==="remove")&&i!==this)return;if(t==="destroy")this.remove(e,n);if(e&&t==="change:"+e.idAttribute){delete this._byId[e.previous(e.idAttribute)];if(e.id!=null)this._byId[e.id]=e}this.trigger.apply(this,arguments)}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(y,function(t){v.prototype[t]=function(){var e=r.call(arguments);e.unshift(this.models);return a[t].apply(a,e)}});var _=["groupBy","countBy","sortBy"];a.each(_,function(t){v.prototype[t]=function(e,i){var n=a.isFunction(e)?e:function(t){return t.get(e)};return a[t](this.models,n,i)}});var E=o.View=function(t){this.cid=a.uniqueId("view");t||(t={});a.extend(this,a.pick(t,w));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var b=/^(\S+)\s*(.*)$/;var w=["model","collection","el","id","attributes","className","tagName","events"];a.extend(E.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(t,e){if(this.$el)this.undelegateEvents();this.$el=t instanceof o.$?t:o.$(t);this.el=this.$el[0];if(e!==false)this.delegateEvents();return this},delegateEvents:function(t){if(!(t||(t=a.result(this,"events"))))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(!a.isFunction(i))i=this[t[e]];if(!i)continue;var n=e.match(b);var r=n[1],s=n[2];i=a.bind(i,this);r+=".delegateEvents"+this.cid;if(s===""){this.$el.on(r,i)}else{this.$el.on(r,s,i)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(!this.el){var t=a.extend({},a.result(this,"attributes"));if(this.id)t.id=a.result(this,"id");if(this.className)t["class"]=a.result(this,"className");var e=o.$("<"+a.result(this,"tagName")+">").attr(t);this.setElement(e,false)}else{this.setElement(a.result(this,"el"),false)}}});o.sync=function(t,e,i){var n=S[t];a.defaults(i||(i={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var r={type:n,dataType:"json"};if(!i.url){r.url=a.result(e,"url")||H()}if(i.data==null&&e&&(t==="create"||t==="update"||t==="patch")){r.contentType="application/json";r.data=JSON.stringify(i.attrs||e.toJSON(i))}if(i.emulateJSON){r.contentType="application/x-www-form-urlencoded";r.data=r.data?{model:r.data}:{}}if(i.emulateHTTP&&(n==="PUT"||n==="DELETE"||n==="PATCH")){r.type="POST";if(i.emulateJSON)r.data._method=n;var s=i.beforeSend;i.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",n);if(s)return s.apply(this,arguments)}}if(r.type!=="GET"&&!i.emulateJSON){r.processData=false}if(r.type==="PATCH"&&x){r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var l=i.xhr=o.ajax(a.extend(r,i));e.trigger("request",e,l,i);return l};var x=typeof window!=="undefined"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var S={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var T=o.Router=function(t){t||(t={});if(t.routes)this.routes=t.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var M=/\((.*?)\)/g;var C=/(\(\?)?:\w+/g;var P=/\*\w+/g;var O=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(T.prototype,l,{initialize:function(){},route:function(t,e,i){if(!a.isRegExp(t))t=this._routeToRegExp(t);if(a.isFunction(e)){i=e;e=""}if(!i)i=this[e];var n=this;o.history.route(t,function(r){var s=n._extractParameters(t,r);i&&i.apply(n,s);n.trigger.apply(n,["route:"+e].concat(s));n.trigger("route",e,s);o.history.trigger("route",n,e,s)});return this},navigate:function(t,e){o.history.navigate(t,e);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=a.result(this,"routes");var t,e=a.keys(this.routes);while((t=e.pop())!=null){this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(O,"\\$&").replace(M,"(?:$1)?").replace(C,function(t,e){return e?t:"([^/]+)"}).replace(P,"(.*?)");return new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return a.map(i,function(t){return t?decodeURIComponent(t):null})}});var L=o.History=function(){this.handlers=[];a.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var I=/^[#\/]|\s+$/g;var k=/^\/+|\/+$/g;var A=/msie [\w.]+/;var N=/\/$/;var R=/[?#].*$/;L.started=false;a.extend(L.prototype,l,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(t==null){if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(N,"");if(!t.indexOf(i))t=t.slice(i.length)}else{t=this.getHash()}}return t.replace(I,"")},start:function(t){if(L.started)throw new Error("Backbone.history has already been started");L.started=true;this.options=a.extend({root:"/"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment();var i=document.documentMode;var n=A.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(k,"/");if(n&&this._wantsHashChange){this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(e)}if(this._hasPushState){o.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!n){o.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=e;var r=this.location;var s=r.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!s){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else if(this._hasPushState&&s&&r.hash){this.fragment=this.getHash().replace(I,"");this.history.replaceState({},document.title,this.root+this.fragment+r.search)}}if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);L.started=false},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe){e=this.getFragment(this.getHash(this.iframe))}if(e===this.fragment)return false;if(this.iframe)this.navigate(e);this.loadUrl()},loadUrl:function(t){t=this.fragment=this.getFragment(t);return a.any(this.handlers,function(e){if(e.route.test(t)){e.callback(t);return true}})},navigate:function(t,e){if(!L.started)return false;if(!e||e===true)e={trigger:!!e};var i=this.root+(t=this.getFragment(t||""));t=t.replace(R,"");if(this.fragment===t)return;this.fragment=t;if(t===""&&i!=="/")i=i.slice(0,-1);if(this._hasPushState){this.history[e.replace?"replaceState":"pushState"]({},document.title,i)}else if(this._wantsHashChange){this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getFragment(this.getHash(this.iframe))){if(!e.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,t,e.replace)}}else{return this.location.assign(i)}if(e.trigger)return this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else{t.hash="#"+e}}});o.history=new L;var D=function(t,e){var i=this;var n;if(t&&a.has(t,"constructor")){n=t.constructor}else{n=function(){return i.apply(this,arguments)}}a.extend(n,i,e);var r=function(){this.constructor=n};r.prototype=i.prototype;n.prototype=new r;if(t)a.extend(n.prototype,t);n.__super__=i.prototype;return n};d.extend=v.extend=T.extend=E.extend=L.extend=D;var H=function(){throw new Error('A "url" property or function must be specified')};var B=function(t,e){var i=e.error;e.error=function(n){if(i)i(t,n,e);t.trigger("error",t,n,e)}}}).call(this);(function(){if(!Array.prototype.forEach){Array.prototype.forEach=function(t,e){for(var i=0,n=this.length;i<n;++i){t.call(e||this,this[i],i,this)}}}Function.prototype.bind=function(){var t=Array.prototype.slice;return function(e){var i=this,n=t.call(arguments,1);if(n.length){return function(){return arguments.length?i.apply(e,t.call(arguments).concat(n)):i.apply(e,n)}}return function(){return arguments.length?i.apply(e,arguments):i.call(e)}}}();String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};String.prototype.unparam=function(){var t={},e=this.replace("?","").split("&"),i,n,r;for(n=0,r=e.length;n<r;n++){i=e[n].split("=",2);t[decodeURIComponent(i[0])]=i.length==2?decodeURIComponent(i[1].replace(/\+/g," ")):true}return t};jQuery.unparam=function(t){return t.unparam()};(function(){var t=false,e=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(i){var n=this.prototype;t=true;var r=new this;t=false;for(var s in i){r[s]=typeof i[s]=="function"&&typeof n[s]=="function"&&e.test(i[s])?function(t,e){return function(){var i=this._super;this._super=n[t];var r=e.apply(this,arguments);this._super=i;return r}}(s,i[s]):i[s]}function o(){if(!t&&this._construct)this._construct.apply(this,arguments)}o.prototype=r;o.constructor=o;o.extend=arguments.callee;return o}})();$empty=function(){};$returnTrue=function(){return true};String.format=function(){var t=arguments[0];for(var e=0;e<arguments.length-1;e++){var i=new RegExp("\\{"+e+"\\}","gm");t=t.replace(i,arguments[e+1])}return t};$.fn.clearForm=function(){return this.each(function(){$(this).data("validator").resetForm();$(":input",this).each(function(){var t=this.type,e=this.tagName.toLowerCase();if(t=="text"||t=="password"||e=="textarea")this.value="";else if(t=="checkbox"||t=="radio"){this.checked=false;elm=$(this).parent();if($(this).is(":checked")){elm.addClass("checked")}else{elm.removeClass("checked")}}else if(e=="select"){this.selectedIndex=-1;var i=$(this).attr("id");$(this).prev().text($(i+" :selected").text())}})})};function t(t){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";var i="";for(var n=0;n<t;n++){var r=Math.floor(Math.random()*e.length);i+=e.substring(r,r+1)}return i}$log=function(t){try{if(arguments.length>1){console.dir(arguments)}else{console.log(arguments[0])}}catch(e){}};$dir=function(t){try{console.dir(arguments)}catch(e){}}})();(function(t){window.MBP=window.MBP||{};MBP.viewportmeta=t.querySelector&&t.querySelector('meta[name="viewport"]');MBP.ua=navigator.userAgent;MBP.scaleFix=function(){if(MBP.viewportmeta&&/iPhone|iPad|iPod/.test(MBP.ua)&&!/Opera Mini/.test(MBP.ua)){MBP.viewportmeta.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0";t.addEventListener("gesturestart",MBP.gestureStart,false)}};MBP.gestureStart=function(){MBP.viewportmeta.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"};MBP.BODY_SCROLL_TOP=false;MBP.getScrollTop=function(){var e=window;var i=t;return e.pageYOffset||i.compatMode==="CSS1Compat"&&i.documentElement.scrollTop||i.body.scrollTop||0};MBP.hideUrlBar=function(){var t=window;if(!location.hash&&MBP.BODY_SCROLL_TOP!==false){t.scrollTo(0,MBP.BODY_SCROLL_TOP===1?0:1)}};MBP.hideUrlBarOnLoad=function(){var t=window;var e=t.document;var i;if(!location.hash&&t.addEventListener){window.scrollTo(0,1);MBP.BODY_SCROLL_TOP=1;i=setInterval(function(){if(e.body){clearInterval(i);MBP.BODY_SCROLL_TOP=MBP.getScrollTop();MBP.hideUrlBar()}},15);t.addEventListener("load",function(){setTimeout(function(){if(MBP.getScrollTop()<20){MBP.hideUrlBar()}},0)})}};MBP.fastButton=function(t,e,i){this.handler=e;this.pressedClass=typeof i==="undefined"?"pressed":i;MBP.listenForGhostClicks();if(t.length&&t.length>1){for(var n in t){this.addClickEvent(t[n])}}else{this.addClickEvent(t)}};MBP.fastButton.prototype.handleEvent=function(t){t=t||window.event;switch(t.type){case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchend":this.onClick(t);break;case"click":this.onClick(t);break}};MBP.fastButton.prototype.onTouchStart=function(e){var i=e.target||e.srcElement;e.stopPropagation();i.addEventListener("touchend",this,false);t.body.addEventListener("touchmove",this,false);this.startX=e.touches[0].clientX;this.startY=e.touches[0].clientY;i.className+=" "+this.pressedClass};MBP.fastButton.prototype.onTouchMove=function(t){if(Math.abs(t.touches[0].clientX-this.startX)>10||Math.abs(t.touches[0].clientY-this.startY)>10){this.reset(t)}};MBP.fastButton.prototype.onClick=function(t){t=t||window.event;var e=t.target||t.srcElement;if(t.stopPropagation){t.stopPropagation()}this.reset(t);this.handler.apply(t.currentTarget,[t]);if(t.type=="touchend"){MBP.preventGhostClick(this.startX,this.startY)}var i=new RegExp(" ?"+this.pressedClass,"gi");e.className=e.className.replace(i,"")};MBP.fastButton.prototype.reset=function(e){var n=e.target||e.srcElement;i(n,"touchend",this,false);i(t.body,"touchmove",this,false);var r=new RegExp(" ?"+this.pressedClass,"gi");n.className=n.className.replace(r,"")};MBP.fastButton.prototype.addClickEvent=function(t){e(t,"touchstart",this,false);e(t,"click",this,false)};MBP.preventGhostClick=function(t,e){MBP.coords.push(t,e);window.setTimeout(function(){MBP.coords.splice(0,2)},2500)};MBP.ghostClickHandler=function(t){if(!MBP.hadTouchEvent&&MBP.dodgyAndroid){t.stopPropagation();t.preventDefault();return}for(var e=0,i=MBP.coords.length;e<i;e+=2){var n=MBP.coords[e];var r=MBP.coords[e+1];if(Math.abs(t.clientX-n)<25&&Math.abs(t.clientY-r)<25){t.stopPropagation();t.preventDefault()}}};MBP.dodgyAndroid="ontouchstart"in window&&navigator.userAgent.indexOf("Android 2.3")!=-1;MBP.listenForGhostClicks=function(){var i=false;return function(){if(i){return}if(t.addEventListener){t.addEventListener("click",MBP.ghostClickHandler,true)}e(t.documentElement,"touchstart",function(){MBP.hadTouchEvent=true},false);i=true}}();MBP.coords=[];function e(t,e,i,n){if("addEventListener"in t){try{t.addEventListener(e,i,n)}catch(r){if(typeof i=="object"&&i.handleEvent){t.addEventListener(e,function(t){i.handleEvent.call(i,t)},n)}else{throw r}}}else if("attachEvent"in t){if(typeof i=="object"&&i.handleEvent){t.attachEvent("on"+e,function(){i.handleEvent.call(i)})}else{t.attachEvent("on"+e,i)}}}function i(t,e,i,n){if("removeEventListener"in t){try{t.removeEventListener(e,i,n)}catch(r){if(typeof i=="object"&&i.handleEvent){t.removeEventListener(e,function(t){i.handleEvent.call(i,t)},n)}else{throw r}}}else if("detachEvent"in t){if(typeof i=="object"&&i.handleEvent){t.detachEvent("on"+e,function(){i.handleEvent.call(i)})}else{t.detachEvent("on"+e,i)}}}MBP.autogrow=function(t,e){function i(t){var e=this.scrollHeight;var i=this.clientHeight;if(e>i){this.style.height=e+3*r+"px"}}var n=e?e:12;var r=t.currentStyle?t.currentStyle.lineHeight:getComputedStyle(t,null).lineHeight;r=r.indexOf("px")==-1?n:parseInt(r,10);t.style.overflow="hidden";t.addEventListener?t.addEventListener("input",i,false):t.attachEvent("onpropertychange",i)};MBP.enableActive=function(){t.addEventListener("touchstart",function(){},false)};MBP.preventScrolling=function(){t.addEventListener("touchmove",function(t){if(t.target.type==="range"){return}t.preventDefault()},false)};MBP.preventZoom=function(){var e=t.querySelectorAll("input, select, textarea");var i="width=device-width,initial-scale=1,maximum-scale=";var n=0;var r=e.length;var s=function(){MBP.viewportmeta.content=i+"1"};var o=function(){MBP.viewportmeta.content=i+"10"};for(;n<r;n++){e[n].onfocus=s;e[n].onblur=o}};MBP.startupImage=function(){var e;var i;var n;var r;var s;var o;n=window.devicePixelRatio;r=t.getElementsByTagName("head")[0];if(navigator.platform==="iPad"){e=n===2?"img/startup/startup-tablet-portrait-retina.png":"img/startup/startup-tablet-portrait.png";i=n===2?"img/startup/startup-tablet-landscape-retina.png":"img/startup/startup-tablet-landscape.png";s=t.createElement("link");s.setAttribute("rel","apple-touch-startup-image");s.setAttribute("media","screen and (orientation: portrait)");s.setAttribute("href",e);r.appendChild(s);o=t.createElement("link");o.setAttribute("rel","apple-touch-startup-image");o.setAttribute("media","screen and (orientation: landscape)");o.setAttribute("href",i);r.appendChild(o)}else{e=n===2?"img/startup/startup-retina.png":"img/startup/startup.png";e=screen.height===568?"img/startup/startup-retina-4in.png":e;s=t.createElement("link");s.setAttribute("rel","apple-touch-startup-image");s.setAttribute("href",e);r.appendChild(s)}if((navigator.platform==="iPhone"||"iPod")&&screen.height===568){if(MBP.viewportmeta){MBP.viewportmeta.content=MBP.viewportmeta.content.replace(/\bwidth\s*=\s*320\b/,"width=320.1").replace(/\bwidth\s*=\s*device-width\b/,"")}}}})(document);(function(t){t.flexslider=function(e,i){var n=t(e);n.vars=t.extend({},t.flexslider.defaults,i);var r=n.vars.namespace,s=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,o=("ontouchstart"in window||s||window.DocumentTouch&&document instanceof DocumentTouch)&&n.vars.touch,a="click touchend MSPointerUp",l="",c,u=n.vars.direction==="vertical",h=n.vars.reverse,f=n.vars.itemWidth>0,d=n.vars.animation==="fade",p=n.vars.asNavFor!=="",v={},m=true;t.data(e,"flexslider",n);v={init:function(){n.animating=false;n.currentSlide=parseInt(n.vars.startAt?n.vars.startAt:0,10);if(isNaN(n.currentSlide))n.currentSlide=0;n.animatingTo=n.currentSlide;n.atEnd=n.currentSlide===0||n.currentSlide===n.last;n.containerSelector=n.vars.selector.substr(0,n.vars.selector.search(" "));n.slides=t(n.vars.selector,n);n.container=t(n.containerSelector,n);n.count=n.slides.length;n.syncExists=t(n.vars.sync).length>0;if(n.vars.animation==="slide")n.vars.animation="swing";n.prop=u?"top":"marginLeft";n.args={};n.manualPause=false;n.stopped=false;n.started=false;n.startTimeout=null;n.transitions=!n.vars.video&&!d&&n.vars.useCSS&&function(){var t=document.createElement("div"),e=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in e){if(t.style[e[i]]!==undefined){n.pfx=e[i].replace("Perspective","").toLowerCase();n.prop="-"+n.pfx+"-transform";return true}}return false}();if(n.vars.controlsContainer!=="")n.controlsContainer=t(n.vars.controlsContainer).length>0&&t(n.vars.controlsContainer);if(n.vars.manualControls!=="")n.manualControls=t(n.vars.manualControls).length>0&&t(n.vars.manualControls);if(n.vars.randomize){n.slides.sort(function(){return Math.round(Math.random())-.5});n.container.empty().append(n.slides)}n.doMath();n.setup("init");if(n.vars.controlNav)v.controlNav.setup();if(n.vars.directionNav)v.directionNav.setup();if(n.vars.keyboard&&(t(n.containerSelector).length===1||n.vars.multipleKeyboard)){t(document).bind("keyup",function(t){var e=t.keyCode;if(!n.animating&&(e===39||e===37)){var i=e===39?n.getTarget("next"):e===37?n.getTarget("prev"):false;n.flexAnimate(i,n.vars.pauseOnAction)}})}if(n.vars.mousewheel){n.bind("mousewheel",function(t,e,i,r){t.preventDefault();var s=e<0?n.getTarget("next"):n.getTarget("prev");n.flexAnimate(s,n.vars.pauseOnAction)})}if(n.vars.pausePlay)v.pausePlay.setup();if(n.vars.slideshow&&n.vars.pauseInvisible)v.pauseInvisible.init();if(n.vars.slideshow){if(n.vars.pauseOnHover){n.hover(function(){if(!n.manualPlay&&!n.manualPause)n.pause()},function(){if(!n.manualPause&&!n.manualPlay&&!n.stopped)n.play()})}if(!n.vars.pauseInvisible||!v.pauseInvisible.isHidden()){n.vars.initDelay>0?n.startTimeout=setTimeout(n.play,n.vars.initDelay):n.play()}}if(p)v.asNav.setup();if(o&&n.vars.touch)v.touch();if(!d||d&&n.vars.smoothHeight)t(window).bind("resize orientationchange focus",v.resize);n.find("img").attr("draggable","false");setTimeout(function(){n.vars.start(n)},200)},asNav:{setup:function(){n.asNav=true;n.animatingTo=Math.floor(n.currentSlide/n.move);n.currentItem=n.currentSlide;n.slides.removeClass(r+"active-slide").eq(n.currentItem).addClass(r+"active-slide");if(!s){n.slides.on(a,function(e){e.preventDefault();var i=t(this),s=i.index();var o=i.offset().left-t(n).scrollLeft();if(o<=0&&i.hasClass(r+"active-slide")){n.flexAnimate(n.getTarget("prev"),true)}else if(!t(n.vars.asNavFor).data("flexslider").animating&&!i.hasClass(r+"active-slide")){n.direction=n.currentItem<s?"next":"prev";n.flexAnimate(s,n.vars.pauseOnAction,false,true,true)}})}else{e._slider=n;n.slides.each(function(){var e=this;e._gesture=new MSGesture;e._gesture.target=e;e.addEventListener("MSPointerDown",function(t){t.preventDefault();if(t.currentTarget._gesture)t.currentTarget._gesture.addPointer(t.pointerId)},false);e.addEventListener("MSGestureTap",function(e){e.preventDefault();var i=t(this),r=i.index();if(!t(n.vars.asNavFor).data("flexslider").animating&&!i.hasClass("active")){n.direction=n.currentItem<r?"next":"prev";n.flexAnimate(r,n.vars.pauseOnAction,false,true,true)}})})}}},controlNav:{setup:function(){if(!n.manualControls){v.controlNav.setupPaging()}else{v.controlNav.setupManual()}},setupPaging:function(){var e=n.vars.controlNav==="thumbnails"?"control-thumbs":"control-paging",i=1,s,o;n.controlNavScaffold=t('<ol class="'+r+"control-nav "+r+e+'"></ol>');if(n.pagingCount>1){for(var c=0;c<n.pagingCount;c++){o=n.slides.eq(c);s=n.vars.controlNav==="thumbnails"?'<img src="'+o.attr("data-thumb")+'"/>':"<a>"+i+"</a>";if("thumbnails"===n.vars.controlNav&&true===n.vars.thumbCaptions){var u=o.attr("data-thumbcaption");if(""!=u&&undefined!=u)s+='<span class="'+r+'caption">'+u+"</span>"}n.controlNavScaffold.append("<li>"+s+"</li>");i++}}n.controlsContainer?t(n.controlsContainer).append(n.controlNavScaffold):n.append(n.controlNavScaffold);v.controlNav.set();v.controlNav.active();n.controlNavScaffold.delegate("a, img",a,function(e){e.preventDefault();if(l===""||l===e.type){var i=t(this),s=n.controlNav.index(i);
if(!i.hasClass(r+"active")){n.direction=s>n.currentSlide?"next":"prev";n.flexAnimate(s,n.vars.pauseOnAction)}}if(l===""){l=e.type}v.setToClearWatchedEvent()})},setupManual:function(){n.controlNav=n.manualControls;v.controlNav.active();n.controlNav.bind(a,function(e){e.preventDefault();if(l===""||l===e.type){var i=t(this),s=n.controlNav.index(i);if(!i.hasClass(r+"active")){s>n.currentSlide?n.direction="next":n.direction="prev";n.flexAnimate(s,n.vars.pauseOnAction)}}if(l===""){l=e.type}v.setToClearWatchedEvent()})},set:function(){var e=n.vars.controlNav==="thumbnails"?"img":"a";n.controlNav=t("."+r+"control-nav li "+e,n.controlsContainer?n.controlsContainer:n)},active:function(){n.controlNav.removeClass(r+"active").eq(n.animatingTo).addClass(r+"active")},update:function(e,i){if(n.pagingCount>1&&e==="add"){n.controlNavScaffold.append(t("<li><a>"+n.count+"</a></li>"))}else if(n.pagingCount===1){n.controlNavScaffold.find("li").remove()}else{n.controlNav.eq(i).closest("li").remove()}v.controlNav.set();n.pagingCount>1&&n.pagingCount!==n.controlNav.length?n.update(i,e):v.controlNav.active()}},directionNav:{setup:function(){var e=t('<ul class="'+r+'direction-nav"><li><a class="'+r+'prev" href="#">'+n.vars.prevText+'</a></li><li><a class="'+r+'next" href="#">'+n.vars.nextText+"</a></li></ul>");if(n.controlsContainer){t(n.controlsContainer).append(e);n.directionNav=t("."+r+"direction-nav li a",n.controlsContainer)}else{n.append(e);n.directionNav=t("."+r+"direction-nav li a",n)}v.directionNav.update();n.directionNav.bind(a,function(e){e.preventDefault();var i;if(l===""||l===e.type){i=t(this).hasClass(r+"next")?n.getTarget("next"):n.getTarget("prev");n.flexAnimate(i,n.vars.pauseOnAction)}if(l===""){l=e.type}v.setToClearWatchedEvent()})},update:function(){var t=r+"disabled";if(n.pagingCount===1){n.directionNav.addClass(t).attr("tabindex","-1")}else if(!n.vars.animationLoop){if(n.animatingTo===0){n.directionNav.removeClass(t).filter("."+r+"prev").addClass(t).attr("tabindex","-1")}else if(n.animatingTo===n.last){n.directionNav.removeClass(t).filter("."+r+"next").addClass(t).attr("tabindex","-1")}else{n.directionNav.removeClass(t).removeAttr("tabindex")}}else{n.directionNav.removeClass(t).removeAttr("tabindex")}}},pausePlay:{setup:function(){var e=t('<div class="'+r+'pauseplay"><a></a></div>');if(n.controlsContainer){n.controlsContainer.append(e);n.pausePlay=t("."+r+"pauseplay a",n.controlsContainer)}else{n.append(e);n.pausePlay=t("."+r+"pauseplay a",n)}v.pausePlay.update(n.vars.slideshow?r+"pause":r+"play");n.pausePlay.bind(a,function(e){e.preventDefault();if(l===""||l===e.type){if(t(this).hasClass(r+"pause")){n.manualPause=true;n.manualPlay=false;n.pause()}else{n.manualPause=false;n.manualPlay=true;n.play()}}if(l===""){l=e.type}v.setToClearWatchedEvent()})},update:function(t){t==="play"?n.pausePlay.removeClass(r+"pause").addClass(r+"play").html(n.vars.playText):n.pausePlay.removeClass(r+"play").addClass(r+"pause").html(n.vars.pauseText)}},touch:function(){var t,i,r,o,a,l,c=false,p=0,v=0,m=0;if(!s){e.addEventListener("touchstart",g,false);function g(s){if(n.animating){s.preventDefault()}else if(window.navigator.msPointerEnabled||s.touches.length===1){n.pause();o=u?n.h:n.w;l=Number(new Date);p=s.touches[0].pageX;v=s.touches[0].pageY;r=f&&h&&n.animatingTo===n.last?0:f&&h?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:f&&n.currentSlide===n.last?n.limit:f?(n.itemW+n.vars.itemMargin)*n.move*n.currentSlide:h?(n.last-n.currentSlide+n.cloneOffset)*o:(n.currentSlide+n.cloneOffset)*o;t=u?v:p;i=u?p:v;e.addEventListener("touchmove",y,false);e.addEventListener("touchend",_,false)}}function y(e){p=e.touches[0].pageX;v=e.touches[0].pageY;a=u?t-v:t-p;c=u?Math.abs(a)<Math.abs(p-i):Math.abs(a)<Math.abs(v-i);var s=500;if(!c||Number(new Date)-l>s){e.preventDefault();if(!d&&n.transitions){if(!n.vars.animationLoop){a=a/(n.currentSlide===0&&a<0||n.currentSlide===n.last&&a>0?Math.abs(a)/o+2:1)}n.setProps(r+a,"setTouch")}}}function _(s){e.removeEventListener("touchmove",y,false);if(n.animatingTo===n.currentSlide&&!c&&!(a===null)){var u=h?-a:a,f=u>0?n.getTarget("next"):n.getTarget("prev");if(n.canAdvance(f)&&(Number(new Date)-l<550&&Math.abs(u)>50||Math.abs(u)>o/2)){n.flexAnimate(f,n.vars.pauseOnAction)}else{if(!d)n.flexAnimate(n.currentSlide,n.vars.pauseOnAction,true)}}e.removeEventListener("touchend",_,false);t=null;i=null;a=null;r=null}}else{e.style.msTouchAction="none";e._gesture=new MSGesture;e._gesture.target=e;e.addEventListener("MSPointerDown",E,false);e._slider=n;e.addEventListener("MSGestureChange",b,false);e.addEventListener("MSGestureEnd",w,false);function E(t){t.stopPropagation();if(n.animating){t.preventDefault()}else{n.pause();e._gesture.addPointer(t.pointerId);m=0;o=u?n.h:n.w;l=Number(new Date);r=f&&h&&n.animatingTo===n.last?0:f&&h?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:f&&n.currentSlide===n.last?n.limit:f?(n.itemW+n.vars.itemMargin)*n.move*n.currentSlide:h?(n.last-n.currentSlide+n.cloneOffset)*o:(n.currentSlide+n.cloneOffset)*o}}function b(t){t.stopPropagation();var i=t.target._slider;if(!i){return}var n=-t.translationX,s=-t.translationY;m=m+(u?s:n);a=m;c=u?Math.abs(m)<Math.abs(-n):Math.abs(m)<Math.abs(-s);if(t.detail===t.MSGESTURE_FLAG_INERTIA){setImmediate(function(){e._gesture.stop()});return}if(!c||Number(new Date)-l>500){t.preventDefault();if(!d&&i.transitions){if(!i.vars.animationLoop){a=m/(i.currentSlide===0&&m<0||i.currentSlide===i.last&&m>0?Math.abs(m)/o+2:1)}i.setProps(r+a,"setTouch")}}}function w(e){e.stopPropagation();var n=e.target._slider;if(!n){return}if(n.animatingTo===n.currentSlide&&!c&&!(a===null)){var s=h?-a:a,u=s>0?n.getTarget("next"):n.getTarget("prev");if(n.canAdvance(u)&&(Number(new Date)-l<550&&Math.abs(s)>50||Math.abs(s)>o/2)){n.flexAnimate(u,n.vars.pauseOnAction)}else{if(!d)n.flexAnimate(n.currentSlide,n.vars.pauseOnAction,true)}}t=null;i=null;a=null;r=null;m=0}}},resize:function(){if(!n.animating&&n.is(":visible")){if(!f)n.doMath();if(d){v.smoothHeight()}else if(f){n.slides.width(n.computedW);n.update(n.pagingCount);n.setProps()}else if(u){n.viewport.height(n.h);n.setProps(n.h,"setTotal")}else{if(n.vars.smoothHeight)v.smoothHeight();n.newSlides.width(n.computedW);n.setProps(n.computedW,"setTotal")}}},smoothHeight:function(t){if(!u||d){var e=d?n:n.viewport;t?e.animate({height:n.slides.eq(n.animatingTo).height()},t):e.height(n.slides.eq(n.animatingTo).height())}},sync:function(e){var i=t(n.vars.sync).data("flexslider"),r=n.animatingTo;switch(e){case"animate":i.flexAnimate(r,n.vars.pauseOnAction,false,true);break;case"play":if(!i.playing&&!i.asNav){i.play()}break;case"pause":i.pause();break}},uniqueID:function(e){e.find("[id]").each(function(){var e=t(this);e.attr("id",e.attr("id")+"_clone")});return e},pauseInvisible:{visProp:null,init:function(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++){if(t[e]+"Hidden"in document)v.pauseInvisible.visProp=t[e]+"Hidden"}if(v.pauseInvisible.visProp){var i=v.pauseInvisible.visProp.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(i,function(){if(v.pauseInvisible.isHidden()){if(n.startTimeout)clearTimeout(n.startTimeout);else n.pause()}else{if(n.started)n.play();else n.vars.initDelay>0?setTimeout(n.play,n.vars.initDelay):n.play()}})}},isHidden:function(){return document[v.pauseInvisible.visProp]||false}},setToClearWatchedEvent:function(){clearTimeout(c);c=setTimeout(function(){l=""},3e3)}};n.flexAnimate=function(e,i,s,a,l){if(!n.vars.animationLoop&&e!==n.currentSlide){n.direction=e>n.currentSlide?"next":"prev"}if(p&&n.pagingCount===1)n.direction=n.currentItem<e?"next":"prev";if(!n.animating&&(n.canAdvance(e,l)||s)&&n.is(":visible")){if(p&&a){var c=t(n.vars.asNavFor).data("flexslider");n.atEnd=e===0||e===n.count-1;c.flexAnimate(e,true,false,true,l);n.direction=n.currentItem<e?"next":"prev";c.direction=n.direction;if(Math.ceil((e+1)/n.visible)-1!==n.currentSlide&&e!==0){n.currentItem=e;n.slides.removeClass(r+"active-slide").eq(e).addClass(r+"active-slide");e=Math.floor(e/n.visible)}else{n.currentItem=e;n.slides.removeClass(r+"active-slide").eq(e).addClass(r+"active-slide");return false}}n.animating=true;n.animatingTo=e;if(i)n.pause();n.vars.before(n);if(n.syncExists&&!l)v.sync("animate");if(n.vars.controlNav)v.controlNav.active();if(!f)n.slides.removeClass(r+"active-slide").eq(e).addClass(r+"active-slide");n.atEnd=e===0||e===n.last;if(n.vars.directionNav)v.directionNav.update();if(e===n.last){n.vars.end(n);if(!n.vars.animationLoop)n.pause()}if(!d){var m=u?n.slides.filter(":first").height():n.computedW,g,y,_;if(f){g=n.vars.itemMargin;_=(n.itemW+g)*n.move*n.animatingTo;y=_>n.limit&&n.visible!==1?n.limit:_}else if(n.currentSlide===0&&e===n.count-1&&n.vars.animationLoop&&n.direction!=="next"){y=h?(n.count+n.cloneOffset)*m:0}else if(n.currentSlide===n.last&&e===0&&n.vars.animationLoop&&n.direction!=="prev"){y=h?0:(n.count+1)*m}else{y=h?(n.count-1-e+n.cloneOffset)*m:(e+n.cloneOffset)*m}n.setProps(y,"",n.vars.animationSpeed);if(n.transitions){if(!n.vars.animationLoop||!n.atEnd){n.animating=false;n.currentSlide=n.animatingTo}n.container.unbind("webkitTransitionEnd transitionend");n.container.bind("webkitTransitionEnd transitionend",function(){n.wrapup(m)})}else{n.container.animate(n.args,n.vars.animationSpeed,n.vars.easing,function(){n.wrapup(m)})}}else{if(!o){n.slides.eq(n.currentSlide).css({zIndex:1}).animate({opacity:0},n.vars.animationSpeed,n.vars.easing);n.slides.eq(e).css({zIndex:2}).animate({opacity:1},n.vars.animationSpeed,n.vars.easing,n.wrapup)}else{n.slides.eq(n.currentSlide).css({opacity:0,zIndex:1});n.slides.eq(e).css({opacity:1,zIndex:2});n.wrapup(m)}}if(n.vars.smoothHeight)v.smoothHeight(n.vars.animationSpeed)}};n.wrapup=function(t){if(!d&&!f){if(n.currentSlide===0&&n.animatingTo===n.last&&n.vars.animationLoop){n.setProps(t,"jumpEnd")}else if(n.currentSlide===n.last&&n.animatingTo===0&&n.vars.animationLoop){n.setProps(t,"jumpStart")}}n.animating=false;n.currentSlide=n.animatingTo;n.vars.after(n)};n.animateSlides=function(){if(!n.animating&&m)n.flexAnimate(n.getTarget("next"))};n.pause=function(){clearInterval(n.animatedSlides);n.animatedSlides=null;n.playing=false;if(n.vars.pausePlay)v.pausePlay.update("play");if(n.syncExists)v.sync("pause")};n.play=function(){if(n.playing)clearInterval(n.animatedSlides);n.animatedSlides=n.animatedSlides||setInterval(n.animateSlides,n.vars.slideshowSpeed);n.started=n.playing=true;if(n.vars.pausePlay)v.pausePlay.update("pause");if(n.syncExists)v.sync("play")};n.stop=function(){n.pause();n.stopped=true};n.canAdvance=function(t,e){var i=p?n.pagingCount-1:n.last;return e?true:p&&n.currentItem===n.count-1&&t===0&&n.direction==="prev"?true:p&&n.currentItem===0&&t===n.pagingCount-1&&n.direction!=="next"?false:t===n.currentSlide&&!p?false:n.vars.animationLoop?true:n.atEnd&&n.currentSlide===0&&t===i&&n.direction!=="next"?false:n.atEnd&&n.currentSlide===i&&t===0&&n.direction==="next"?false:true};n.getTarget=function(t){n.direction=t;if(t==="next"){return n.currentSlide===n.last?0:n.currentSlide+1}else{return n.currentSlide===0?n.last:n.currentSlide-1}};n.setProps=function(t,e,i){var r=function(){var i=t?t:(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo,r=function(){if(f){return e==="setTouch"?t:h&&n.animatingTo===n.last?0:h?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:n.animatingTo===n.last?n.limit:i}else{switch(e){case"setTotal":return h?(n.count-1-n.currentSlide+n.cloneOffset)*t:(n.currentSlide+n.cloneOffset)*t;case"setTouch":return h?t:t;case"jumpEnd":return h?t:n.count*t;case"jumpStart":return h?n.count*t:t;default:return t}}}();return r*-1+"px"}();if(n.transitions){r=u?"translate3d(0,"+r+",0)":"translate3d("+r+",0,0)";i=i!==undefined?i/1e3+"s":"0s";n.container.css("-"+n.pfx+"-transition-duration",i);n.container.css("transition-duration",i)}n.args[n.prop]=r;if(n.transitions||i===undefined)n.container.css(n.args);n.container.css("transform",r)};n.setup=function(e){if(!d){var i,s;if(e==="init"){n.viewport=t('<div class="'+r+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(n).append(n.container);n.cloneCount=0;n.cloneOffset=0;if(h){s=t.makeArray(n.slides).reverse();n.slides=t(s);n.container.empty().append(n.slides)}}if(n.vars.animationLoop&&!f){n.cloneCount=2;n.cloneOffset=1;if(e!=="init")n.container.find(".clone").remove();v.uniqueID(n.slides.first().clone().addClass("clone").attr("aria-hidden","true")).appendTo(n.container);v.uniqueID(n.slides.last().clone().addClass("clone").attr("aria-hidden","true")).prependTo(n.container)}n.newSlides=t(n.vars.selector,n);i=h?n.count-1-n.currentSlide+n.cloneOffset:n.currentSlide+n.cloneOffset;if(u&&!f){n.container.height((n.count+n.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){n.newSlides.css({display:"block"});n.doMath();n.viewport.height(n.h);n.setProps(i*n.h,"init")},e==="init"?100:0)}else{n.container.width((n.count+n.cloneCount)*200+"%");n.setProps(i*n.computedW,"init");setTimeout(function(){n.doMath();n.newSlides.css({width:n.computedW,"float":"left",display:"block"});if(n.vars.smoothHeight)v.smoothHeight()},e==="init"?100:0)}}else{n.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"});if(e==="init"){if(!o){n.slides.css({opacity:0,display:"block",zIndex:1}).eq(n.currentSlide).css({zIndex:2}).animate({opacity:1},n.vars.animationSpeed,n.vars.easing)}else{n.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+n.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(n.currentSlide).css({opacity:1,zIndex:2})}}if(n.vars.smoothHeight)v.smoothHeight()}if(!f)n.slides.removeClass(r+"active-slide").eq(n.currentSlide).addClass(r+"active-slide");n.vars.init(n)};n.doMath=function(){var t=n.slides.first(),e=n.vars.itemMargin,i=n.vars.minItems,r=n.vars.maxItems;n.w=n.viewport===undefined?n.width():n.viewport.width();n.h=t.height();n.boxPadding=t.outerWidth()-t.width();if(f){n.itemT=n.vars.itemWidth+e;n.minW=i?i*n.itemT:n.w;n.maxW=r?r*n.itemT-e:n.w;n.itemW=n.minW>n.w?(n.w-e*(i-1))/i:n.maxW<n.w?(n.w-e*(r-1))/r:n.vars.itemWidth>n.w?n.w:n.vars.itemWidth;n.visible=Math.floor(n.w/n.itemW);n.move=n.vars.move>0&&n.vars.move<n.visible?n.vars.move:n.visible;n.pagingCount=Math.ceil((n.count-n.visible)/n.move+1);n.last=n.pagingCount-1;n.limit=n.pagingCount===1?0:n.vars.itemWidth>n.w?n.itemW*(n.count-1)+e*(n.count-1):(n.itemW+e)*n.count-n.w-e}else{n.itemW=n.w;n.pagingCount=n.count;n.last=n.count-1}n.computedW=n.itemW-n.boxPadding};n.update=function(t,e){n.doMath();if(!f){if(t<n.currentSlide){n.currentSlide+=1}else if(t<=n.currentSlide&&t!==0){n.currentSlide-=1}n.animatingTo=n.currentSlide}if(n.vars.controlNav&&!n.manualControls){if(e==="add"&&!f||n.pagingCount>n.controlNav.length){v.controlNav.update("add")}else if(e==="remove"&&!f||n.pagingCount<n.controlNav.length){if(f&&n.currentSlide>n.last){n.currentSlide-=1;n.animatingTo-=1}v.controlNav.update("remove",n.last)}}if(n.vars.directionNav)v.directionNav.update()};n.addSlide=function(e,i){var r=t(e);n.count+=1;n.last=n.count-1;if(u&&h){i!==undefined?n.slides.eq(n.count-i).after(r):n.container.prepend(r)}else{i!==undefined?n.slides.eq(i).before(r):n.container.append(r)}n.update(i,"add");n.slides=t(n.vars.selector+":not(.clone)",n);n.setup();n.vars.added(n)};n.removeSlide=function(e){var i=isNaN(e)?n.slides.index(t(e)):e;n.count-=1;n.last=n.count-1;if(isNaN(e)){t(e,n.slides).remove()}else{u&&h?n.slides.eq(n.last).remove():n.slides.eq(e).remove()}n.doMath();n.update(i,"remove");n.slides=t(n.vars.selector+":not(.clone)",n);n.setup();n.vars.removed(n)};v.init()};t(window).blur(function(t){focused=false}).focus(function(t){focused=true});t.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:false,animationLoop:true,smoothHeight:false,startAt:0,slideshow:true,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:false,thumbCaptions:false,pauseOnAction:true,pauseOnHover:false,pauseInvisible:true,useCSS:true,touch:true,video:false,controlNav:true,directionNav:true,prevText:"Previous",nextText:"Next",keyboard:true,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:true,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}};t.fn.flexslider=function(e){if(e===undefined)e={};if(typeof e==="object"){return this.each(function(){var i=t(this),n=e.selector?e.selector:".slides > li",r=i.find(n);if(r.length===1&&e.allowOneSlide===true||r.length===0){r.fadeIn(400);if(e.start)e.start(i)}else if(i.data("flexslider")===undefined){new t.flexslider(this,e)}})}else{var i=t(this).data("flexslider");switch(e){case"play":i.play();break;case"pause":i.pause();break;case"stop":i.stop();break;case"next":i.flexAnimate(i.getTarget("next"),true);break;case"prev":case"previous":i.flexAnimate(i.getTarget("prev"),true);break;default:if(typeof e==="number")i.flexAnimate(e,true)}}}})(jQuery);(function(t,e,i,n){"use strict";var r=i("html"),s=i(t),o=i(e),a=i.fancybox=function(){a.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),c=null,u=e.createTouch!==n,h=function(t){return t&&t.hasOwnProperty&&t instanceof i},f=function(t){return t&&i.type(t)==="string"},d=function(t){return f(t)&&t.indexOf("%")>0},p=function(t){return t&&!(t.style.overflow&&t.style.overflow==="hidden")&&(t.clientWidth&&t.scrollWidth>t.clientWidth||t.clientHeight&&t.scrollHeight>t.clientHeight)},v=function(t,e){var i=parseInt(t,10)||0;if(e&&d(t)){i=a.getViewport()[e]/100*i}return Math.ceil(i)},m=function(t,e){return v(t,e)+"px"};i.extend(a,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:true,autoHeight:false,autoWidth:false,autoResize:true,autoCenter:!u,fitToView:true,aspectRatio:false,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3e3,preload:3,modal:false,loop:true,ajax:{dataType:"html",headers:{"X-fancyBox":true}},iframe:{scrolling:"auto",preload:true},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:true,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:true,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:true,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:true,title:true},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:false,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(t,e){if(!t){return}if(!i.isPlainObject(e)){e={}}if(false===a.close(true)){return}if(!i.isArray(t)){t=h(t)?i(t).get():[t]}i.each(t,function(r,s){var o={},l,c,u,d,p,v,m;if(i.type(s)==="object"){if(s.nodeType){s=i(s)}if(h(s)){o={href:s.data("fancybox-href")||s.attr("href"),title:s.data("fancybox-title")||s.attr("title"),isDom:true,element:s};if(i.metadata){i.extend(true,o,s.metadata())}}else{o=s}}l=e.href||o.href||(f(s)?s:null);c=e.title!==n?e.title:o.title||"";u=e.content||o.content;d=u?"html":e.type||o.type;if(!d&&o.isDom){d=s.data("fancybox-type");if(!d){p=s.prop("class").match(/fancybox\.(\w+)/);d=p?p[1]:null}}if(f(l)){if(!d){if(a.isImage(l)){d="image"}else if(a.isSWF(l)){d="swf"}else if(l.charAt(0)==="#"){d="inline"}else if(f(s)){d="html";u=s}}if(d==="ajax"){v=l.split(/\s+/,2);l=v.shift();m=v.shift()}}if(!u){if(d==="inline"){if(l){u=i(f(l)?l.replace(/.*(?=#[^\s]+$)/,""):l)}else if(o.isDom){u=s}}else if(d==="html"){u=l}else if(!d&&!l&&o.isDom){d="inline";u=s}}i.extend(o,{href:l,type:d,content:u,title:c,selector:m});t[r]=o});a.opts=i.extend(true,{},a.defaults,e);if(e.keys!==n){a.opts.keys=e.keys?i.extend({},a.defaults.keys,e.keys):false}a.group=t;return a._start(a.opts.index)},cancel:function(){var t=a.coming;if(!t||false===a.trigger("onCancel")){return}a.hideLoading();if(a.ajaxLoad){a.ajaxLoad.abort()}a.ajaxLoad=null;if(a.imgPreload){a.imgPreload.onload=a.imgPreload.onerror=null}if(t.wrap){t.wrap.stop(true,true).trigger("onReset").remove()}a.coming=null;if(!a.current){a._afterZoomOut(t)}},close:function(t){a.cancel();if(false===a.trigger("beforeClose")){return}a.unbindEvents();if(!a.isActive){return}if(!a.isOpen||t===true){i(".fancybox-wrap").stop(true).trigger("onReset").remove();a._afterZoomOut()}else{a.isOpen=a.isOpened=false;a.isClosing=true;i(".fancybox-item, .fancybox-nav").remove();a.wrap.stop(true,true).removeClass("fancybox-opened");a.transitions[a.current.closeMethod]()}},play:function(t){var e=function(){clearTimeout(a.player.timer)},i=function(){e();if(a.current&&a.player.isActive){a.player.timer=setTimeout(a.next,a.current.playSpeed)}},n=function(){e();o.unbind(".player");a.player.isActive=false;a.trigger("onPlayEnd")},r=function(){if(a.current&&(a.current.loop||a.current.index<a.group.length-1)){a.player.isActive=true;o.bind({"onCancel.player beforeClose.player":n,"onUpdate.player":i,"beforeLoad.player":e});i();a.trigger("onPlayStart")}};if(t===true||!a.player.isActive&&t!==false){r()}else{n()}},next:function(t){var e=a.current;if(e){if(!f(t)){t=e.direction.next}a.jumpto(e.index+1,t,"next")}},prev:function(t){var e=a.current;if(e){if(!f(t)){t=e.direction.prev}a.jumpto(e.index-1,t,"prev")}},jumpto:function(t,e,i){var r=a.current;if(!r){return}t=v(t);a.direction=e||r.direction[t>=r.index?"next":"prev"];a.router=i||"jumpto";if(r.loop){if(t<0){t=r.group.length+t%r.group.length}t=t%r.group.length}if(r.group[t]!==n){a.cancel();a._start(t)}},reposition:function(t,e){var n=a.current,r=n?n.wrap:null,s;if(r){s=a._getPosition(e);if(t&&t.type==="scroll"){delete s.position;r.stop(true,true).animate(s,200)}else{r.css(s);n.pos=i.extend({},n.dim,s)}}},update:function(t){var e=t&&t.type,i=!e||e==="orientationchange";if(i){clearTimeout(c);c=null}if(!a.isOpen||c){return}c=setTimeout(function(){var n=a.current;if(!n||a.isClosing){return}a.wrap.removeClass("fancybox-tmp");if(i||e==="load"||e==="resize"&&n.autoResize){a._setDimension()}if(!(e==="scroll"&&n.canShrink)){a.reposition(t)}a.trigger("onUpdate");c=null},i&&!u?0:300)},toggle:function(t){if(a.isOpen){a.current.fitToView=i.type(t)==="boolean"?t:!a.current.fitToView;if(u){a.wrap.removeAttr("style").addClass("fancybox-tmp");a.trigger("onUpdate")}a.update()}},hideLoading:function(){o.unbind(".loading");i("#fancybox-loading").remove()},showLoading:function(){var t,e;a.hideLoading();t=i('<div id="fancybox-loading"><div></div></div>').click(a.cancel).appendTo("body");o.bind("keydown.loading",function(t){if((t.which||t.keyCode)===27){t.preventDefault();a.cancel()}});if(!a.defaults.fixed){e=a.getViewport();t.css({position:"absolute",top:e.h*.5+e.y,left:e.w*.5+e.x})}},getViewport:function(){var e=a.current&&a.current.locked||false,i={x:s.scrollLeft(),y:s.scrollTop()};if(e){i.w=e[0].clientWidth;i.h=e[0].clientHeight}else{i.w=u&&t.innerWidth?t.innerWidth:s.width();i.h=u&&t.innerHeight?t.innerHeight:s.height()}return i},unbindEvents:function(){if(a.wrap&&h(a.wrap)){a.wrap.unbind(".fb")}o.unbind(".fb");s.unbind(".fb")},bindEvents:function(){var t=a.current,e;if(!t){return}s.bind("orientationchange.fb"+(u?"":" resize.fb")+(t.autoCenter&&!t.locked?" scroll.fb":""),a.update);e=t.keys;if(e){o.bind("keydown.fb",function(r){var s=r.which||r.keyCode,o=r.target||r.srcElement;if(s===27&&a.coming){return false}if(!r.ctrlKey&&!r.altKey&&!r.shiftKey&&!r.metaKey&&!(o&&(o.type||i(o).is("[contenteditable]")))){i.each(e,function(e,o){if(t.group.length>1&&o[s]!==n){a[e](o[s]);r.preventDefault();return false}if(i.inArray(s,o)>-1){a[e]();r.preventDefault();return false}})}})}if(i.fn.mousewheel&&t.mouseWheel){a.wrap.bind("mousewheel.fb",function(e,n,r,s){var o=e.target||null,l=i(o),c=false;while(l.length){if(c||l.is(".fancybox-skin")||l.is(".fancybox-wrap")){break}c=p(l[0]);l=i(l).parent()}if(n!==0&&!c){if(a.group.length>1&&!t.canShrink){if(s>0||r>0){a.prev(s>0?"down":"left")}else if(s<0||r<0){a.next(s<0?"up":"right")}e.preventDefault()}}})}},trigger:function(t,e){var n,r=e||a.coming||a.current;if(!r){return}if(i.isFunction(r[t])){n=r[t].apply(r,Array.prototype.slice.call(arguments,1))}if(n===false){return false}if(r.helpers){i.each(r.helpers,function(e,n){if(n&&a.helpers[e]&&i.isFunction(a.helpers[e][t])){a.helpers[e][t](i.extend(true,{},a.helpers[e].defaults,n),r)}})}o.trigger(t)},isImage:function(t){return f(t)&&t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(t){return f(t)&&t.match(/\.(swf)((\?|#).*)?$/i)},_start:function(t){var e={},n,r,s,o,l;t=v(t);n=a.group[t]||null;if(!n){return false}e=i.extend(true,{},a.opts,n);o=e.margin;l=e.padding;if(i.type(o)==="number"){e.margin=[o,o,o,o]}if(i.type(l)==="number"){e.padding=[l,l,l,l]}if(e.modal){i.extend(true,e,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{closeClick:false}}})}if(e.autoSize){e.autoWidth=e.autoHeight=true}if(e.width==="auto"){e.autoWidth=true}if(e.height==="auto"){e.autoHeight=true}e.group=a.group;e.index=t;a.coming=e;if(false===a.trigger("beforeLoad")){a.coming=null;return}s=e.type;r=e.href;if(!s){a.coming=null;if(a.current&&a.router&&a.router!=="jumpto"){a.current.index=t;return a[a.router](a.direction)}return false}a.isActive=true;if(s==="image"||s==="swf"){e.autoHeight=e.autoWidth=false;e.scrolling="visible"}if(s==="image"){e.aspectRatio=true}if(s==="iframe"&&u){e.scrolling="scroll"}e.wrap=i(e.tpl.wrap).addClass("fancybox-"+(u?"mobile":"desktop")+" fancybox-type-"+s+" fancybox-tmp "+e.wrapCSS).appendTo(e.parent||"body");i.extend(e,{skin:i(".fancybox-skin",e.wrap),outer:i(".fancybox-outer",e.wrap),inner:i(".fancybox-inner",e.wrap)});i.each(["Top","Right","Bottom","Left"],function(t,i){e.skin.css("padding"+i,m(e.padding[t]))});a.trigger("onReady");if(s==="inline"||s==="html"){if(!e.content||!e.content.length){return a._error("content")}}else if(!r){return a._error("href")}if(s==="image"){a._loadImage()}else if(s==="ajax"){a._loadAjax()}else if(s==="iframe"){a._loadIframe()}else{a._afterLoad()}},_error:function(t){i.extend(a.coming,{type:"html",autoWidth:true,autoHeight:true,minWidth:0,minHeight:0,scrolling:"no",hasError:t,content:a.coming.tpl.error});a._afterLoad()},_loadImage:function(){var t=a.imgPreload=new Image;t.onload=function(){this.onload=this.onerror=null;a.coming.width=this.width/a.opts.pixelRatio;a.coming.height=this.height/a.opts.pixelRatio;a._afterLoad()};t.onerror=function(){this.onload=this.onerror=null;a._error("image")};t.src=a.coming.href;if(t.complete!==true){a.showLoading()}},_loadAjax:function(){var t=a.coming;a.showLoading();a.ajaxLoad=i.ajax(i.extend({},t.ajax,{url:t.href,error:function(t,e){if(a.coming&&e!=="abort"){a._error("ajax",t)}else{a.hideLoading()}},success:function(e,i){if(i==="success"){t.content=e;a._afterLoad()}}}))},_loadIframe:function(){var t=a.coming,e=i(t.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",u?"auto":t.iframe.scrolling).attr("src",t.href);i(t.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(t){}});if(t.iframe.preload){a.showLoading();e.one("load",function(){i(this).data("ready",1);if(!u){i(this).bind("load.fb",a.update)}i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();a._afterLoad()})}t.content=e.appendTo(t.inner);if(!t.iframe.preload){a._afterLoad()}},_preloadImages:function(){var t=a.group,e=a.current,i=t.length,n=e.preload?Math.min(e.preload,i-1):0,r,s;for(s=1;s<=n;s+=1){r=t[(e.index+s)%i];if(r.type==="image"&&r.href){(new Image).src=r.href}}},_afterLoad:function(){var t=a.coming,e=a.current,n="fancybox-placeholder",r,s,o,l,c,u;a.hideLoading();if(!t||a.isActive===false){return}if(false===a.trigger("afterLoad",t,e)){t.wrap.stop(true).trigger("onReset").remove();a.coming=null;return}if(e){a.trigger("beforeChange",e);e.wrap.stop(true).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()}a.unbindEvents();r=t;s=t.content;o=t.type;l=t.scrolling;i.extend(a,{wrap:r.wrap,skin:r.skin,outer:r.outer,inner:r.inner,current:r,previous:e});c=r.href;switch(o){case"inline":case"ajax":case"html":if(r.selector){s=i("<div>").html(s).find(r.selector)}else if(h(s)){if(!s.data(n)){s.data(n,i('<div class="'+n+'"></div>').insertAfter(s).hide())}s=s.show().detach();r.wrap.bind("onReset",function(){if(i(this).find(s).length){s.hide().replaceAll(s.data(n)).data(n,false)}})}break;case"image":s=r.tpl.image.replace("{href}",c);break;case"swf":s='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+c+'"></param>';u="";i.each(r.swf,function(t,e){s+='<param name="'+t+'" value="'+e+'"></param>';u+=" "+t+'="'+e+'"'});s+='<embed src="'+c+'" type="application/x-shockwave-flash" width="100%" height="100%"'+u+"></embed></object>";break}if(!(h(s)&&s.parent().is(r.inner))){r.inner.append(s)}a.trigger("beforeShow");r.inner.css("overflow",l==="yes"?"scroll":l==="no"?"hidden":l);a._setDimension();a.reposition();a.isOpen=false;a.coming=null;a.bindEvents();if(!a.isOpened){i(".fancybox-wrap").not(r.wrap).stop(true).trigger("onReset").remove()}else if(e.prevMethod){a.transitions[e.prevMethod]()}a.transitions[a.isOpened?r.nextMethod:r.openMethod]();a._preloadImages()},_setDimension:function(){var t=a.getViewport(),e=0,n=false,r=false,s=a.wrap,o=a.skin,l=a.inner,c=a.current,u=c.width,h=c.height,f=c.minWidth,p=c.minHeight,g=c.maxWidth,y=c.maxHeight,_=c.scrolling,E=c.scrollOutside?c.scrollbarWidth:0,b=c.margin,w=v(b[1]+b[3]),x=v(b[0]+b[2]),S,T,M,C,P,O,L,I,k,A,N,R,D,H,B;s.add(o).add(l).width("auto").height("auto").removeClass("fancybox-tmp");S=v(o.outerWidth(true)-o.width());T=v(o.outerHeight(true)-o.height());M=w+S;C=x+T;P=d(u)?(t.w-M)*v(u)/100:u;O=d(h)?(t.h-C)*v(h)/100:h;if(c.type==="iframe"){H=c.content;if(c.autoHeight&&H.data("ready")===1){try{if(H[0].contentWindow.document.location){l.width(P).height(9999);B=H.contents().find("body");if(E){B.css("overflow-x","hidden")}O=B.outerHeight(true)}}catch(W){}}}else if(c.autoWidth||c.autoHeight){l.addClass("fancybox-tmp");if(!c.autoWidth){l.width(P)}if(!c.autoHeight){l.height(O)}if(c.autoWidth){P=l.width()}if(c.autoHeight){O=l.height()}l.removeClass("fancybox-tmp")}u=v(P);h=v(O);k=P/O;f=v(d(f)?v(f,"w")-M:f);g=v(d(g)?v(g,"w")-M:g);p=v(d(p)?v(p,"h")-C:p);y=v(d(y)?v(y,"h")-C:y);L=g;I=y;if(c.fitToView){g=Math.min(t.w-M,g);
y=Math.min(t.h-C,y)}R=t.w-w;D=t.h-x;if(c.aspectRatio){if(u>g){u=g;h=v(u/k)}if(h>y){h=y;u=v(h*k)}if(u<f){u=f;h=v(u/k)}if(h<p){h=p;u=v(h*k)}}else{u=Math.max(f,Math.min(u,g));if(c.autoHeight&&c.type!=="iframe"){l.width(u);h=l.height()}h=Math.max(p,Math.min(h,y))}if(c.fitToView){l.width(u).height(h);s.width(u+S);A=s.width();N=s.height();if(c.aspectRatio){while((A>R||N>D)&&u>f&&h>p){if(e++>19){break}h=Math.max(p,Math.min(y,h-10));u=v(h*k);if(u<f){u=f;h=v(u/k)}if(u>g){u=g;h=v(u/k)}l.width(u).height(h);s.width(u+S);A=s.width();N=s.height()}}else{u=Math.max(f,Math.min(u,u-(A-R)));h=Math.max(p,Math.min(h,h-(N-D)))}}if(E&&_==="auto"&&h<O&&u+S+E<R){u+=E}l.width(u).height(h);s.width(u+S);A=s.width();N=s.height();n=(A>R||N>D)&&u>f&&h>p;r=c.aspectRatio?u<L&&h<I&&u<P&&h<O:(u<L||h<I)&&(u<P||h<O);i.extend(c,{dim:{width:m(A),height:m(N)},origWidth:P,origHeight:O,canShrink:n,canExpand:r,wPadding:S,hPadding:T,wrapSpace:N-o.outerHeight(true),skinSpace:o.height()-h});if(!H&&c.autoHeight&&h>p&&h<y&&!r){l.height("auto")}},_getPosition:function(t){var e=a.current,i=a.getViewport(),n=e.margin,r=a.wrap.width()+n[1]+n[3],s=a.wrap.height()+n[0]+n[2],o={position:"absolute",top:n[0],left:n[3]};if(e.autoCenter&&e.fixed&&!t&&s<=i.h&&r<=i.w){o.position="fixed"}else if(!e.locked){o.top+=i.y;o.left+=i.x}o.top=m(Math.max(o.top,o.top+(i.h-s)*e.topRatio));o.left=m(Math.max(o.left,o.left+(i.w-r)*e.leftRatio));return o},_afterZoomIn:function(){var t=a.current;if(!t){return}a.isOpen=a.isOpened=true;a.wrap.css("overflow","visible").addClass("fancybox-opened");a.update();if(t.closeClick||t.nextClick&&a.group.length>1){a.inner.css("cursor","pointer").bind("click.fb",function(e){if(!i(e.target).is("a")&&!i(e.target).parent().is("a")){e.preventDefault();a[t.closeClick?"close":"next"]()}})}if(t.closeBtn){i(t.tpl.closeBtn).appendTo(a.skin).bind("click.fb",function(t){t.preventDefault();a.close()})}if(t.arrows&&a.group.length>1){if(t.loop||t.index>0){i(t.tpl.prev).appendTo(a.outer).bind("click.fb",a.prev)}if(t.loop||t.index<a.group.length-1){i(t.tpl.next).appendTo(a.outer).bind("click.fb",a.next)}}a.trigger("afterShow");if(!t.loop&&t.index===t.group.length-1){a.play(false)}else if(a.opts.autoPlay&&!a.player.isActive){a.opts.autoPlay=false;a.play()}},_afterZoomOut:function(t){t=t||a.current;i(".fancybox-wrap").trigger("onReset").remove();i.extend(a,{group:{},opts:{},router:false,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,outer:null,inner:null});a.trigger("afterClose",t)}});a.transitions={getOrigPosition:function(){var t=a.current,e=t.element,i=t.orig,n={},r=50,s=50,o=t.hPadding,l=t.wPadding,c=a.getViewport();if(!i&&t.isDom&&e.is(":visible")){i=e.find("img:first");if(!i.length){i=e}}if(h(i)){n=i.offset();if(i.is("img")){r=i.outerWidth();s=i.outerHeight()}}else{n.top=c.y+(c.h-s)*t.topRatio;n.left=c.x+(c.w-r)*t.leftRatio}if(a.wrap.css("position")==="fixed"||t.locked){n.top-=c.y;n.left-=c.x}n={top:m(n.top-o*t.topRatio),left:m(n.left-l*t.leftRatio),width:m(r+l),height:m(s+o)};return n},step:function(t,e){var i,n,r,s=e.prop,o=a.current,l=o.wrapSpace,c=o.skinSpace;if(s==="width"||s==="height"){i=e.end===e.start?1:(t-e.start)/(e.end-e.start);if(a.isClosing){i=1-i}n=s==="width"?o.wPadding:o.hPadding;r=t-n;a.skin[s](v(s==="width"?r:r-l*i));a.inner[s](v(s==="width"?r:r-l*i-c*i))}},zoomIn:function(){var t=a.current,e=t.pos,n=t.openEffect,r=n==="elastic",s=i.extend({opacity:1},e);delete s.position;if(r){e=this.getOrigPosition();if(t.openOpacity){e.opacity=.1}}else if(n==="fade"){e.opacity=.1}a.wrap.css(e).animate(s,{duration:n==="none"?0:t.openSpeed,easing:t.openEasing,step:r?this.step:null,complete:a._afterZoomIn})},zoomOut:function(){var t=a.current,e=t.closeEffect,i=e==="elastic",n={opacity:.1};if(i){n=this.getOrigPosition();if(t.closeOpacity){n.opacity=.1}}a.wrap.animate(n,{duration:e==="none"?0:t.closeSpeed,easing:t.closeEasing,step:i?this.step:null,complete:a._afterZoomOut})},changeIn:function(){var t=a.current,e=t.nextEffect,i=t.pos,n={opacity:1},r=a.direction,s=200,o;i.opacity=.1;if(e==="elastic"){o=r==="down"||r==="up"?"top":"left";if(r==="down"||r==="right"){i[o]=m(v(i[o])-s);n[o]="+="+s+"px"}else{i[o]=m(v(i[o])+s);n[o]="-="+s+"px"}}if(e==="none"){a._afterZoomIn()}else{a.wrap.css(i).animate(n,{duration:t.nextSpeed,easing:t.nextEasing,complete:a._afterZoomIn})}},changeOut:function(){var t=a.previous,e=t.prevEffect,n={opacity:.1},r=a.direction,s=200;if(e==="elastic"){n[r==="down"||r==="up"?"top":"left"]=(r==="up"||r==="left"?"-":"+")+"="+s+"px"}t.wrap.animate(n,{duration:e==="none"?0:t.prevSpeed,easing:t.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}};a.helpers.overlay={defaults:{closeClick:true,speedOut:200,showEarly:true,css:{},locked:!u,fixed:true},overlay:null,fixed:false,el:i("html"),create:function(t){t=i.extend({},this.defaults,t);if(this.overlay){this.close()}this.overlay=i('<div class="fancybox-overlay"></div>').appendTo(a.coming?a.coming.parent:t.parent);this.fixed=false;if(t.fixed&&a.defaults.fixed){this.overlay.addClass("fancybox-overlay-fixed");this.fixed=true}},open:function(t){var e=this;t=i.extend({},this.defaults,t);if(this.overlay){this.overlay.unbind(".overlay").width("auto").height("auto")}else{this.create(t)}if(!this.fixed){s.bind("resize.overlay",i.proxy(this.update,this));this.update()}if(t.closeClick){this.overlay.bind("click.overlay",function(t){if(i(t.target).hasClass("fancybox-overlay")){if(a.isActive){a.close()}else{e.close()}return false}})}this.overlay.css(t.css).show()},close:function(){var t,e;s.unbind("resize.overlay");if(this.el.hasClass("fancybox-lock")){i(".fancybox-margin").removeClass("fancybox-margin");t=s.scrollTop();e=s.scrollLeft();this.el.removeClass("fancybox-lock");s.scrollTop(t).scrollLeft(e)}i(".fancybox-overlay").remove().hide();i.extend(this,{overlay:null,fixed:false})},update:function(){var t="100%",i;this.overlay.width(t).height("100%");if(l){i=Math.max(e.documentElement.offsetWidth,e.body.offsetWidth);if(o.width()>i){t=o.width()}}else if(o.width()>s.width()){t=o.width()}this.overlay.width(t).height(o.height())},onReady:function(t,e){var n=this.overlay;i(".fancybox-overlay").stop(true,true);if(!n){this.create(t)}if(t.locked&&this.fixed&&e.fixed){if(!n){this.margin=o.height()>s.height()?i("html").css("margin-right").replace("px",""):false}e.locked=this.overlay.append(e.wrap);e.fixed=false}if(t.showEarly===true){this.beforeShow.apply(this,arguments)}},beforeShow:function(t,e){var n,r;if(e.locked){if(this.margin!==false){i("*").filter(function(){return i(this).css("position")==="fixed"&&!i(this).hasClass("fancybox-overlay")&&!i(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin");this.el.addClass("fancybox-margin")}n=s.scrollTop();r=s.scrollLeft();this.el.addClass("fancybox-lock");s.scrollTop(n).scrollLeft(r)}this.open(t)},onUpdate:function(){if(!this.fixed){this.update()}},afterClose:function(t){if(this.overlay&&!a.coming){this.overlay.fadeOut(t.speedOut,i.proxy(this.close,this))}}};a.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(t){var e=a.current,n=e.title,r=t.type,s,o;if(i.isFunction(n)){n=n.call(e.element,e)}if(!f(n)||i.trim(n)===""){return}s=i('<div class="fancybox-title fancybox-title-'+r+'-wrap">'+n+"</div>");switch(r){case"inside":o=a.skin;break;case"outside":o=a.wrap;break;case"over":o=a.inner;break;default:o=a.skin;s.appendTo("body");if(l){s.width(s.width())}s.wrapInner('<span class="child"></span>');a.current.margin[2]+=Math.abs(v(s.css("margin-bottom")));break}s[t.position==="top"?"prependTo":"appendTo"](o)}};i.fn.fancybox=function(t){var e,n=i(this),r=this.selector||"",s=function(s){var o=i(this).blur(),l=e,c,u;if(!(s.ctrlKey||s.altKey||s.shiftKey||s.metaKey)&&!o.is(".fancybox-wrap")){c=t.groupAttr||"data-fancybox-group";u=o.attr(c);if(!u){c="rel";u=o.get(0)[c]}if(u&&u!==""&&u!=="nofollow"){o=r.length?i(r):n;o=o.filter("["+c+'="'+u+'"]');l=o.index(this)}t.index=l;if(a.open(o,t)!==false){s.preventDefault()}}};t=t||{};e=t.index||0;if(!r||t.live===false){n.unbind("click.fb-start").bind("click.fb-start",s)}else{o.undelegate(r,"click.fb-start").delegate(r+":not('.fancybox-item, .fancybox-nav')","click.fb-start",s)}this.filter("[data-fancybox-start=1]").trigger("click");return this};o.ready(function(){var e,s;if(i.scrollbarWidth===n){i.scrollbarWidth=function(){var t=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),e=t.children(),n=e.innerWidth()-e.height(99).innerWidth();t.remove();return n}}if(i.support.fixedPosition===n){i.support.fixedPosition=function(){var t=i('<div style="position:fixed;top:20px;"></div>').appendTo("body"),e=t[0].offsetTop===20||t[0].offsetTop===15;t.remove();return e}()}i.extend(a.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")});e=i(t).width();r.addClass("fancybox-lock-test");s=i(t).width();r.removeClass("fancybox-lock-test");i("<style type='text/css'>.fancybox-margin{margin-right:"+(s-e)+"px;}</style>").appendTo("head")})})(window,document,jQuery);(function(t){var e=Marcocom={resetpassword:null,isUserLoggedIn:false,contentManagementSysURL:"",_something:true,_uid:0,isIE8:navigator.userAgent.indexOf("MSIE 8")>-1,isFF:navigator.userAgent.indexOf("Firefox")>0,isHandheldPortrait:t("body").width()<450&&t("body").height()>t("body").width(),msGesture:window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,isTouch:"ontouchstart"in window||this.msGesture||window.DocumentTouch&&document instanceof DocumentTouch,googleAccount:"UA-1007198-3",_popups:{},windowWidth:0,windowHeight:0,columnSizes:{cell_total_container_width:720,cell_total_med_width:960,cell_total_sm_width:1682,cell_total_extra_tall:482,cell_total_short_width:482},_currentPopup:null,_mosaic:null,_model:null,_mosaic_container:null,_landingPage:null,_onStateContent:null,AncillaryLetters:["d","i"],DataLetters:["a","b","c","f","h","j"],init:function(){if(t.support.touch)t("body").addClass("ipad-iphone");this.setupEventManager();$log("Marcocom:INIT isHandheld:"+this.isHandheldPortrait+"  --UA:"+navigator.userAgent+" isIE8:"+this.isIE8);this.windowWidth=t(window).width();this.windowHeight=t(window).height();this._onStateContent=t("#information-text");t(window).resize(t.proxy(this.onResize,this));t("#slider-container").hide()},onResize:function(){this.windowWidth=t(window).width();this.windowHeight=t(window).height();Marcocom.EventManager.fireEvent(Marcocom.Event.RESIZE,this)},animationHelper:function(e,i,n,r){t(e).css({position:"absolute",left:i}).animate({left:n},r)},bindToDocument:function(e,i){if(!document[e+"_callbacks"])document[e+"_callbacks"]=[];document[e+"_callbacks"].push(i);if(!document[e+"_registered"]){t(document).bind(e,this.handleDocumentEvent.bind(this,e));document[e+"_registered"]=true}},handleDocumentEvent:function(e,i){var n=document[i+"_callbacks"];t(n).each(function(t){n[t]()})},setupEventManager:function(){this.eventManager=new Marcocom.Event},fireHashEvents:function(){var t=document.location.hash.toString().replace("#","");if(t.length>0)Marcocom.eventManager.fireEvent(Marcocom.Event.DEEPLINK,t)},popup:function(t,e){var i=this._getPopup(e);if(i!=null){i.show(e);this._currentPopup=e}},_getPopup:function(t){var e=this._popups[t];if(e==null){switch(t){case"register":e=new Marcocom.Registration;break;case"sign-in":e=new Marcocom.Login;break}this._popups[t]=e}return e},loadTemplate:function(e){var i=t("#"+e);return _.template(i.html(),{})},nano:function(t,e){return t.replace(/\{([\w\.]*)\}/g,function(t,i){var n=i.split("."),r=e[n.shift()];for(var s=0,o=n.length;s<o;s++)r=r[n[s]];return typeof r!=="undefined"&&r!==null?r:""})},loadTemplateFile:function(e){var i=t("#tpl-"+e);if(i.length===0){var n="/templates";var r=n+"/"+e+".tmpl";var s="";t.ajax({url:r,method:"GET",async:false,contentType:"text",success:function(i){s=i;t("head").append('<script id="tpl-'+e+'" type="text/template">'+s+"</script>")}})}},sub_template:function(e,i){return _.template(e.replace(/<%\s*include\s*(.*?)\s*%>/g,function(e,i){var n=t("#"+i);return n?n.html():""}),i)},isEmpty:function(t){if(t==null)return true;if(t.length>0)return false;if(t.length===0)return true;for(var e in t){if(Object.prototype.hasOwnProperty.call(t,e))return false}return true}};Marcocom.Popup=Class.extend({_construct:function(t){Marcocom.eventManager.addEventHandler(Marcocom.Event.SHOWPOPUP,this.show.bind(this));this._el=t;this._type=t.attr("id");this._form=new Marcocom.Form(this._submit,this._el.find("div.form form"),null,this.formClick.bind(this));t.find("a.close").click(this.hide.bind(this))},overlayClose:function(){document.location.hash=""},hide:function(){this.hide()},show:function(t){if(t!=this._type)return;if(this.isOpened()){this.hide();setTimeout(this.__show.bind(this,t),300)}else this.__show()},__show:function(){this.show()},formClick:function(e){e.preventDefault();var i=this._form.valid();if(i){var n=this._form.serialize();t.post(this._postUrl,n,this._submitResult.bind(this),"json")}},_submitResult:function(t,e,i){if(t&&t.success==true){this.hide();if(typeof t.email!="Undefined"){registeredEmail=t.email}else{registeredEmail="Undefined"}this.submitSuccess(t.redirect)}else{$log("submit failed")}},submitSuccess:function(t){document.location.reload()}});Marcocom.Validate={NAME_REGEX:new RegExp("^[a-z'][-a-z ']*$"),PHONE_REGEX:new RegExp("/d{2}-d{9}/"),EMAIL_REGEX:new RegExp("/^[a-zA-Z0-9_+][-.a-zA-Z0-9_+]*@[a-zA-Z0-9][-.a-zA-Z0-9]*.(com|nl|de|be|se|edu|info|gov|int|mil|net|org|biz|name|museum|coop|aero|pro|tv|[a-zA-Z]{2})$/"),daysOfMonths:[31,28,31,30,31,30,31,31,30,31,30,31],validateDayDOB:function(t){var e=Boolean(Number(t)<=31);var i=Boolean(Number(t)>0);return e&&i},validateMonthDOB:function(t){var e=Boolean(Number(t)<=12);var i=Boolean(Number(t)>0);return e&&i},validateYearDOB:function(t){return this.checkLength(t,4)},validateDayExists:function(t,e,i){if(e==2&&isLeapYear(i))return t<=29;else var n=this.daysOfMonths[e-1];return t<=n},isLeapYear:function(t){return t%4==0},trim:function(t){if(t==null)return"";return t.replace(/^\s+|\s+$/g,"")},checkIsEmpty:function(t){var e=this.trim(t);return Boolean(e.length==0)},checkLength:function(t,e){return Boolean(this.trim(t).length>=e)}};Marcocom.Event=Class.extend({_construct:function(){this.__event={}},addEventHandler:function(e,i){if(!this.__event[e])this.__event[e]=new Array;if(t.inArray(i,this.__event[e])<0)this.__event[e].push(i);return this},removeEventHandler:function(e,i){var n=t.inArray(i,this.__event[e]);if(n>=0)this.__event[e].splice(n,1);return this},removeEventHandlers:function(t){this.__event[t].length=0;return this},fireEvent:function(t){if(this.__event[t]){if(1<arguments.length){var e=Array.prototype.slice.call(arguments,1);e.push(t);for(i=0;i<this.__event[t].length;i++){this.__event[t][i].apply(this,e)}}else{for(i=0;i<this.__event[t].length;i++){this.__event[t][i](t)}}}}});Marcocom.Brand={brand_blue:"#0172b4",brand_purple:"#5d2278",brand_orange:"#f5a81f",brand_red:"#da061e",brand_green:"#009339"};Marcocom.templates={cells:{cell_a:null,cell_b:null,cell_c:null,cell_d:null,cell_e:null,cell_f:null,cell_g:null,cell_h:null,cell_i:null}};Marcocom.ancillary_models={quote_data:[{Body:"learn the rules like a pro, so you can break them like an artist.",Credit:"Pablo Picasso",id:""},{Body:"creativity is contagious, pass it on.",Credit:"Albert Einstein",id:""},{Body:"you can't wait for inspiration, you have to go after it with a club.",Credit:"Jack London",id:""},{Body:"creativity requires the courage to let go of certainties.",Credit:"Erich Fromm",id:""},{Body:"when the going gets weird, the weird turn pro.",Credit:"Hunter S. Thompson",id:""},{Body:"we don't make mistakes, just happy little accidents.",Credit:"Bob Ross",id:""},{Body:"design is not just what it looks like and feels like. Design is how it works.",Credit:"Steve Jobs",id:""},{Body:"there is nothing worse than a sharp image of a fuzzy concept.",Credit:"Ansel Adams",id:""},{Body:"while they are deciding, make even more art.",Credit:"Andy Warhol",id:""},{Body:"Let the blood and the bruises define your legacy.",Credit:"Lady Gaga",id:""}],action_data:[{Action:"",Sentences:["real people","real passion","real action"],id:""}],long_images:[{Image:"img/cells/longs/cell_g_1.jpg",id:""}]};Marcocom.Brand.ALL_COLORS=[Marcocom.Brand.brand_blue,Marcocom.Brand.brand_purple,Marcocom.Brand.brand_orange,Marcocom.Brand.brand_green];Marcocom.EventManager=new Marcocom.Event;Marcocom.Event.SHOWPOPUP="SHOWPOPUP";Marcocom.Event.DEEPLINK="DEEPLINK";Marcocom.Event.RESIZE="RESIZE";Marcocom.Event.RESIZE_SM_RESPONSE="RESIZE_SM";Marcocom.Event.RESIZE_MED_RESPONSE="RESIZE_MED";Marcocom.Event.RESIZE_LRG_RESPONSE="RESIZE_LRG";Marcocom.Event.RESIZE_SHORT_RESPONSE="RESIZE_SHORT";Marcocom.Event.RESIZE_TALL_RESPONSE="RESIZE_TALL";Marcocom.Event.PAGECHANGE="PAGECHANGE";Marcocom.Event.DISCLAIMER="DISCLAIMER";Marcocom.Event.CURRENTPAGE="CURRENTPAGE";Marcocom.Event.OPEN_CELL="OPEN_CELL";Marcocom.Event.CLOSE_CELL="CLOSE_CELL";Marcocom.Event.MOSAIC_SCROLL_START="MOSAIC_SCROLL_START";Marcocom.Event.MOSAIC_SCROLL_X="MOSAIC_SCROLL_X";Marcocom.Event.MOSAIC_SCROLL_END="MOSAIC_SCROLL_END";Marcocom.Event.MOSAIC_FLICK="MOSAIC_FLICK";Marcocom.Event.MOSAIC_VIDEO="MOSAIC_VIDEO";Marcocom.Event.MODEL_COLUMN_LOADING="MODEL_COLUMN_LOADING";Marcocom.Event.MODEL_COLUMN_LOADED="MODEL_COLUMN_LOADED";Marcocom.Event.MODEL_COLUMNS_COMPLETE="MODEL_COLUMNS_COMPLETE";Marcocom.Event.MODEL_COLUMNS_NODATA="MODEL_COLUMNS_NODATA";Marcocom.Event.MODEL_TEMPLATES_COMPLETE="MODEL_TEMPLATES_COMPLETE";Marcocom.Event.JSON_NOT_FOUND="JSON_NOT_FOUND";Marcocom.Event.ROUTER_CALL="ROUTER_CALL";Marcocom.Event.ROUTER_CLIENT="ROUTER_CLIENT";Marcocom.Event.ROUTER_POST="ROUTER_POST";Marcocom.Event.ROUTER_AUTHOR="ROUTER_AUTHOR";Marcocom.Event.ROUTER_SEARCH="ROUTER_SEARCH";Marcocom.Event.ROUTER_TAG="ROUTER_TAG";Marcocom.Event.ROUTER_PAGE="ROUTER_PAGE"})(jQuery);Marcocom.init();(function(t,e){e.Page=Class.extend({_construct:function(e){this._el=t(e)}});t.extend(e.Page,{_selectors:{},_extend:e.Page.extend,extend:function(t,i){var n=e.Page._extend(t);if(typeof i=="string")e.Page._selectors[i]=n;return n},Init:function(){t.each(e.Page._selectors,function(e,i){t(e).each(function(){var n=new i(this);t(this).data(e,n)})})}});e.Page.Home=e.Page.extend({cellRouter:null,_logo:null,toplinks:null,currentContent:null,contentSwap:null,closeButton:null,subcontentOpened:false,refineNav:null,introColumn:null,_current:null,_currentscroller:null,backgrounds:null,tiles:null,_construct:function(e){this._el=t(e);this._super(this._el);this.toplinks=t(this._el.find(".header .toplink"));this._logo=t("#logo").parent("a");this.initPage()},initPage:function(){var i=this;this.closeButton=t(".sub-close-cta a").click(t.proxy(this.pageCollapse,this));this.toplinks.click(t.proxy(this.clickAnimate,this));this._logo.click(function(t){t.preventDefault();t.stopImmediatePropagation();e.cellRouter.navigate("/",{trigger:true})});this.initRouter();this.initBackground()},initBackground:function(){this.backgrounds=t(".backgrounds");this.tiles=this.backgrounds.find(".tile");var e=_.random(1,7);var i="img/backgrounds/bg"+e+".jpg";$log("BG:"+i);this.tiles.append('<img src="'+i+'">')},initRouter:function(){var t=this;var i=Backbone.Router.extend({routes:{"posts/:id":"getPost","client/:id":"getClient","author/:id":"getAuthor","portal/:id":"getPortal","tag/:id":"getTag","search/:query":"search","*action":"defaultRoute"}});e.cellRouter=new i;e.cellRouter.on("route:getPost",function(t){e.EventManager.fireEvent(Marcocom.Event.ROUTER_POST,this,t)});e.cellRouter.on("route:getClient",function(t){e.EventManager.fireEvent(Marcocom.Event.ROUTER_CLIENT,this,t)});e.cellRouter.on("route:getPortal",function(t){e.EventManager.fireEvent(Marcocom.Event.ROUTER_PORTAL,this,t)});e.cellRouter.on("route:getAuthor",function(t){e.EventManager.fireEvent(Marcocom.Event.ROUTER_AUTHOR,this,t)});e.cellRouter.on("route:getTag",function(t){e.EventManager.fireEvent(Marcocom.Event.ROUTER_TAG,this,t)});e.cellRouter.on("route:search",function(t){e.EventManager.fireEvent(Marcocom.Event.ROUTER_SEARCH,this,t)});e.cellRouter.on("route:defaultRoute",function(i){if(i=="jobs"||i=="about"||i=="contact"){t.remoteAnimate(i);e.EventManager.fireEvent(Marcocom.Event.ROUTER_MAIN_MOSAIC,t,i||null)}else if(i=="people"){e.EventManager.fireEvent(Marcocom.Event.REFINE_PEOPLE,t)}else if(i=="clients"){e.EventManager.fireEvent(Marcocom.Event.REFINE_CLIENTS,t)}else if(i==null){if(t.subcontentOpened==true)t.pageCollapse(null);e.EventManager.fireEvent(Marcocom.Event.ROUTER_MAIN_MOSAIC,t,i||null)}});Backbone.history.start({pushState:true,root:"/"})},catchPageChange:function(t,e){this.remoteAnimate(e)},remoteAnimate:function(e){if(e!=undefined&&e.length<2)return;this._current=e;var i="."+(e?e:clicksource.id)+"-content";var n=t(i);this.subcontentOpened==false?this.pageAnimateFromClosed(n):this.pageAnimateFromOpened(n,null)},clickAnimate:function(i){i.preventDefault();var n=t(i.currentTarget)[0];this._current=n.id;var r="."+n.id+"-content";var s=t(r);e.cellRouter.navigate(n.id,{trigger:true})},pageAnimateFromClosed:function(i){var n=this;i.show();var r=i.find(".content")[0];var s=t(r).height()+(t("body").hasClass("ipad-iphone")?10:40);var o=e.windowHeight-30;if(s>o)s=o;this.setScrollable(false);this.currentContent=i;var a=this.currentContent.hasClass("sliding");if(a)this._currentscroller=new e.Page.SubPage(this.currentContent);this._el.animate({top:s},500,function(){n.onOpenTransitionEnd()})},pageAnimateFromOpened:function(t,e){var i=this;if(this.currentContent.selector!=t.selector){this.contentSwap=e}else{this.contentSwap=null}this._el.animate({top:"0"},500,function(){i.onCloseTransitionEnd()})},onOpenTransitionEnd:function(){this.subcontentOpened=true;var e=this.currentContent.find(".content");t(e).bind("click",t.proxy(this.pageCollapse,this));this._el.bind("tap click swipe focus",t.proxy(this.pageCollapse,this))},onCloseTransitionEnd:function(){$dir(this.contentSwap);if(this.subcontentOpened==true){this.subcontentOpened=false;this.currentContent.hide();this.currentContent=null;this.setScrollable(true);if(this._currentscroller){this._currentscroller._slider.destroy();this._currentscroller.removeEventHandlers();this._currentscroller=null}if(this.contentSwap!=null){t(this.contentSwap).trigger("click");this.contentSwap=null}else{e.cellRouter.navigate("/",{trigger:false})}}},pageCollapse:function(t){var i=this;e.cellRouter.navigate("/",{trigger:false});if(this.subcontentOpened){this._el.animate({top:"0"},500,function(){i.onCloseTransitionEnd()});this._el.mouseover(null);this._el.unbind("tap click swipe focus")}},setScrollable:function(e){var i=t("html, body");if(!e){i.css({overflow:"hidden",height:"100%"})}else{i.css({overflow:"auto",height:"100%"})}}});e.Page.SubPage=e.Page.extend({_mosaic:null,_columns:null,loading_items:false,building:false,currentColumnWidth:null,currentScrollX:0,_slider:null,_scroller:null,_content:null,columnWidths:{xs:480,md:720,sh:540,tl:700},_construct:function(t){this._el=t;this._super(this._el);this.initContainer()},initContainer:function(){this._content=this._el.find(".content")[0];var i=t(this._content).find(".items");this._mosaic=t(i[0]);this._scroller=t(this._content).find(".scroller");this._slider=new IScroll(this._content,{scrollX:true,scrollY:false,mouseWheel:true,click:true,startX:0,useTransform:!e.isIE8,snap:"li"});this.loading_items=true;var n=this._mosaic.find("li");this._columns=t(n);this.addEventHandlers();this.onResize(null)},addEventHandlers:function(){e.EventManager.addEventHandler(e.Event.RESIZE,t.proxy(this.onResize,this))},removeEventHandlers:function(){e.EventManager.removeEventHandler(e.Event.RESIZE,t.proxy(this.onResize,this))},onResize:function(i){var n=t(this._columns[0]).width();var r=(this._columns.length+1)*n;var s=this;t(this._scroller).width(r);if(n!=this.currentColumnWidth&&!e.isIE8){this.currentColumnWidth=n;setTimeout(function(){s._slider.refresh()},0)}},scaleColumns:function(e){var i=this;this._columns.each(function(i){t(this).width(e)})},onFlick:function(t){e.EventManager.fireEvent(e.Event.MOSAIC_FLICK,this)}});e.Page.Init();if(t(".home-content").length>0)Marcocom._landingPage=new e.Page.Home(".home-content")})(jQuery,Marcocom);(function(t,e){e.Mosaic=Class.extend({_construct:function(e){this._el=t(e);this.slider=null}});t.extend(e.Mosaic,{_selectors:{},_extend:e.Mosaic.extend,extend:function(t,i){var n=e.Mosaic._extend(t);if(typeof i=="string")e.Mosaic._selectors[i]=n;return n},Init:function(){t.each(e.Mosaic._selectors,function(e,i){t(e).each(function(){var n=new i(this);t(this).data(e,n)})})}});e.Mosaic.Container=e.Mosaic.extend({_mosaic:null,_columns:null,loading_items:false,building:false,currentColumnWidth:null,currentScrollX:0,_slider:null,_loader:null,_cta:null,_home:null,columnWidths:{xs:480,md:412,sh:608,tl:700},_construct:function(e){this._el=t(e);this._super(this._el);var i=this._el.find(".homepage");this._home=t(i);this.initContainer()},initContainer:function(){this._slider=new IScroll("#slider-container",{scrollX:true,scrollY:false,mouseWheel:true,click:true,startX:0,probeType:1});this.loading_items=true;var i=this._el.find(".mosaic-container");this._mosaic=t(i);var n=this._mosaic.find(".column");this._columns=t(n);this._columns.each(function(){var t=new e.Mosaic.ParentColumn(this)});this.addEventHandlers();e.EventManager.fireEvent(e.Event.RESIZE,this);this.initCTA();this.initLoader();this.hideLoader();this.onResize(null)},addEventHandlers:function(){this._slider.on("scrollStart",t.proxy(this.onScrollStart,this));this._slider.on("scrollEnd",t.proxy(this.onScrollEnd,this));this._slider.on("scroll",t.proxy(this.onScrollX,this));e.EventManager.addEventHandler(e.Event.RESIZE,t.proxy(this.onResize,this));e.EventManager.addEventHandler(e.Event.MOSAIC_VIDEO,this.playbackVideo.bind(this));e.EventManager.addEventHandler(e.Event.MODEL_COLUMNS_NODATA,this.onEndOfData.bind(this));e.EventManager.addEventHandler(e.Event.MODEL_COLUMN_LOADING,this.onLoadingData.bind(this));e.EventManager.addEventHandler(e.Event.MODEL_COLUMN_LOADED,t.proxy(this.appendMosaic,this))},removeEventHandlers:function(){this._slider.off("scrollStart");this._slider.off("scrollEnd");e.EventManager.removeEventHandler(e.Event.RESIZE,t.proxy(this.onResize,this));e.EventManager.removeEventHandler(e.Event.MOSAIC_VIDEO,this.playbackVideo.bind(this));e.EventManager.removeEventHandler(e.Event.MODEL_COLUMNS_NODATA,this.onEndOfData.bind(this));e.EventManager.removeEventHandler(e.Event.MODEL_COLUMN_LOADING,this.onLoadingData.bind(this));e.EventManager.removeEventHandler(e.Event.MODEL_COLUMN_LOADED,t.proxy(this.appendMosaic,this))},initCTA:function(){var i=this;var n=this._el.find(".cta-msg");this._cta=t(n[0]);this._cta.css({left:"180px"});if(e.isIE8)this._cta.css({width:"230px"});setTimeout(function(){i.animateCTA()},2e3)},animateCTA:function(){var t=e.windowWidth+Math.abs(this._slider.x)-(this._cta.width()+10);var i=Number(this._cta.css("left").split("px")[0]);if(t>i)this._cta.animate({left:t+"px"},600,"easeOutBounce")},onLoadingData:function(t){this.loading_items=true;this.showLoader()},onEndOfData:function(i){this.loading_items=false;var n=e.windowWidth-50;this._home.width(n);var r=t(this._columns[0]).width();var s=this._columns.length*r+n;t("#slider-container .scroller").width(s);this._slider.refresh();this.hideLoader();this._loader.remove();this._cta.fadeOut()},onBeforeScrollStart:function(t){var e=t.target;while(e.nodeType!=1)e=e.parentNode;if(e.tagName!="SELECT"&&e.tagName!="INPUT"&&e.tagName!="TEXTAREA")t.preventDefault()},onResize:function(i){var n=e.windowWidth-50;if(n<=350)n=350;this._home.width(n);var r=t(this._columns[0]).width();var s=this._columns.length*r+(this.loading_items?50:0)+n;var o=this._slider;var a=this;t("#slider-container .scroller").width(s);if(r!=this.currentColumnWidth&&!e.isIE8){this.currentColumnWidth=r;setTimeout(function(){a._slider.refresh()},0)}},appendMosaic:function(i){var n=this._mosaic.find(".column");var r=n[n.length-1];this._columns.push(r);var s=this._columns.length*this.currentColumnWidth;t("#slider-container .scroller").width(s);var o=new e.Mosaic.ParentColumn(r);var a=this;this.hideLoader();this._slider.refresh()},positionMosaic:function(){this._slider.forcePositionX(this.currentScrollX)},scaleColumns:function(e){var i=this;this._columns.each(function(i){t(this).width(e)})},onScrollStart:function(t){e.EventManager.fireEvent(e.Event.MOSAIC_SCROLL_START,this)},onScrollCancel:function(t){},onScrollEnd:function(t){this.currentScrollX=this._slider.x;this.animateCTA();e.EventManager.fireEvent(e.Event.MOSAIC_SCROLL_END,this,this._slider.x,this._slider.maxScrollX,this._slider.directionX,this._slider.directionY)},onScrollX:function(t){this.currentScrollX=this._slider.x;this.animateCTA();e.EventManager.fireEvent(e.Event.MOSAIC_SCROLL_X,this,this._slider.x,this._slider.maxScrollX,this._slider.directionX,this._slider.directionY)},initLoader:function(){this._loader=t('<img src="img/loading.gif">').appendTo(".home-content").css({position:"absolute",display:"block",top:"123px",right:"10px","z-index":"50",width:"32",height:"auto"})},showLoader:function(){this._loader.show()},hideLoader:function(){this._loader.hide()},onFlick:function(t){e.EventManager.fireEvent(e.Event.MOSAIC_FLICK,this)},playbackVideo:function(e,i){t.fancybox({padding:0,autoScale:false,transitionIn:"none",transitionOut:"none",title:"",autoPlay:true,hideOnOverlayClick:true,width:1280,height:720,href:i,type:"iframe",swf:{wmode:"transparent",allowfullscreen:"false"},overlay:{opacity:.1,css:{"background-color":"#000000"}}})}});e.Mosaic.ParentColumn=e.Mosaic.extend({_grid:null,_cells:[],currentCellOpened:null,loading_items:false,building:false,strict:false,overlay:false,scroll:false,filter:false,grid_full:false,_construct:function(e){this._el=t(e);this._super(this._el);this.initContainer()},initContainer:function(){var i=this;this._grid=this._el.masonry({itemSelector:".cell-box",columnWidth:206,isAnimated:true}).masonry("bindResize");var n=this._grid.masonry("getItemElements");t(n).each(function(t){var n=new e.Mosaic.Cell(this,i._grid);i._cells.push(n)});e.EventManager.fireEvent(Marcocom.Event.RESIZE,this)}});e.Mosaic.Cell=e.Mosaic.extend({_parent:null,_carousel:null,loading_items:false,building:false,opened:false,half_width:235,full_width:474,half_height:134,full_height:272,deadzone:5,startMouseX:null,offContent:null,onContent:null,sizeLetter:null,_construct:function(e,i){this._el=t(e);this._super(this._el);this._parent=i;this.initContainer();return this.closeInfo},initContainer:function(){this.sizeLetter=this.getItemSize(this._el);var i=this._el.find(".on-state");var n=this._el.find(".off-state");this.offContent=t(n);this.onContent=i.length>0?t(i):null;if(this.sizeLetter=="a"||this.sizeLetter=="b"||this.sizeLetter=="j"||this.sizeLetter=="f"){if(e.msGesture){this._el.on("MSPointerDown",t.proxy(this.onMsPress,this));this._el.on("MSGestureEnd",t.proxy(this.onMsRelease,this))}else{this._el.hammer().on("touch",t.proxy(this.onPress,this));this._el.hammer().on("release",t.proxy(this.onRelease,this))}}else if(this.sizeLetter=="e"){this.colorizeCell();this.processPageAction(this._el.data("action"))}if(this.sizeLetter=="f"){this._carousel=this._el.find(".flexslider").flexslider({namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:false,animationLoop:true,smoothHeight:false,startAt:0,slideshow:true,slideshowSpeed:4e3,animationSpeed:500,initDelay:Math.random*5e3,randomize:false,pauseOnAction:true,pauseOnHover:false,useCSS:true,touch:false,video:false,controlNav:true,directionNav:false,prevText:"Previous",nextText:"Next",keyboard:false,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:474,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(t){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}})}e.EventManager.addEventHandler(e.Event.OPEN_CELL,this.onCellClick.bind(this));
e.EventManager.addEventHandler(e.Event.CLOSE_CELL,this.onCellClose.bind(this));e.EventManager.addEventHandler(e.Event.MOSAIC_SCROLL_START,this.closeInfo.bind(this));t("#slider-container").show()},processVideoAction:function(t){var i=this._el.data("ref");var n="http://";if(t=="vim")n+="player.vimeo.com/video/";if(t=="yt")n+="youtube.com/?";if(i){n+=i}else{n="http://vimeo.com/Marcocomamsterdam"}e.EventManager.fireEvent(e.Event.MOSAIC_VIDEO,this,n)},processPageAction:function(t){if(t!="none"){this._el.click(function(i){i.preventDefault();e._landingPage.cellRouter.navigate(t,{trigger:true})});this._el.css({cursor:"pointer"})}},colorizeCell:function(){var t=Math.floor(Math.random()*e.Brand.ALL_COLORS.length);var i=e.Brand.ALL_COLORS[t];this._el.find(".off-state").css({"background-color":i})},onCellClick:function(t,e){var i=t==this;if(!i&&this.opened)this.closeInfo()},onCellClose:function(t,e){var i=t==this},onClick:function(t){if(!this.opened){this.openInfo()}else{if(this.sizeLetter=="j")this.processVideoAction(this._el.data("portal"));this.closeInfo()}},openInfo:function(){if(!this.opened){e.EventManager.fireEvent(e.Event.OPEN_CELL,this);var t=Math.round(this._el.height()-20);this.offContent.addClass("desaturate");this.opened=true;if(this.sizeLetter=="f"){this._carousel.flexslider("pause");if(this.onContent)this.onContent.css({top:"35%"})}else{this.onContent.css({top:this.sizeLetter=="a"?"30%":"0"})}}},closeInfo:function(){if(this.opened){this.offContent.removeClass("desaturate");if(this.onContent)this.onContent.css({top:"100%"});var i=e._onStateContent.find(".content");var n=t(i[0]);n.css({top:"0"});this.opened=false;if(this.sizeLetter=="f")this._carousel.flexslider("play")}},onPress:function(t){t.preventDefault();t.stopPropagation();this.startMouseX=t.gesture.center.pageX},onRelease:function(t){t.preventDefault();t.stopPropagation();var e=t.gesture.center.pageX-this.startMouseX;if(e<this.deadzone&&e>-this.deadzone)this.onClick(null)},onMsPress:function(t){t.preventDefault();t.stopPropagation();this.startMouseX=t.pageX},onMsRelease:function(t){t.preventDefault();t.stopPropagation();var e=t.pageX-this.startMouseX;if(e<this.deadzone&&e>-this.deadzone)this.onClick(null)},getItemSize:function(t){if(t.hasClass("cell-a"))return"a";if(t.hasClass("cell-b"))return"b";if(t.hasClass("cell-c"))return"c";if(t.hasClass("cell-d"))return"d";if(t.hasClass("cell-e"))return"e";if(t.hasClass("cell-f"))return"f";if(t.hasClass("cell-g"))return"g";if(t.hasClass("cell-h"))return"h";if(t.hasClass("cell-i"))return"i";if(t.hasClass("cell-j"))return"j";return""}});function i(i){e.Mosaic.Init();if(t("#slider-container").length>0)Marcocom._mosaic=new e.Mosaic.Container("#slider-container")}e.EventManager.addEventHandler(e.Event.MODEL_COLUMNS_COMPLETE,i.bind(this))})(jQuery,Marcocom);(function(t,e){e.Model=Class.extend({_construct:function(){}});t.extend(e.Model,{_selectors:{},_extend:e.Model.extend,extend:function(t,i){var n=e.Model._extend(t);if(typeof i=="string")e.Model._selectors[i]=n;return n},Init:function(){t.each(e.Model._selectors,function(e,i){t(e).each(function(){var n=new i(this);t(this).data(e,n)})})}});e.Model.Mosaic=e.Model.extend({_totalDataFiles:0,_totalPreload:1,_currentColumn:0,_columns:[],_firstLoad:false,_dataFinished:false,_directory:null,_mosaic:null,_construct:function(e,i){this._el=t(e);this._directory=i;this._super(this._el);var n=this._el.find(".mosaic-container");this._mosaic=t(n);t.ajax({url:i+"count.php",cache:false,async:true,dataType:"html",success:t.proxy(this.getCount,this)})},getCount:function(t){this._totalDataFiles=Number(t)-1;this.compileTemplates();this.initModel();e.EventManager.addEventHandler(e.Event.MOSAIC_SCROLL_END,this.mosaicScrollHandler.bind(this))},modifyPreload:function(){if(e.windowWidth<=450){this._totalPreload-=1}else if(e.windowHeight>=970){this._totalPreload+=1}},mosaicScrollHandler:function(t,e,i,n,r){if(e<=i&&!this._dataFinished)this.nextModel()},compileTemplates:function(){Marcocom.templates.cells.cell_a=_.template(t("#tpl-cell-a").html());Marcocom.templates.cells.cell_b=_.template(t("#tpl-cell-b").html());Marcocom.templates.cells.cell_c=_.template(t("#tpl-cell-c").html());Marcocom.templates.cells.cell_d=_.template(t("#tpl-cell-d").html());Marcocom.templates.cells.cell_e=_.template(t("#tpl-cell-e").html());Marcocom.templates.cells.cell_f=_.template(t("#tpl-cell-f").html());Marcocom.templates.cells.cell_g=_.template(t("#tpl-cell-g").html());Marcocom.templates.cells.cell_h=_.template(t("#tpl-cell-h").html());Marcocom.templates.cells.cell_i=_.template(t("#tpl-cell-i").html());Marcocom.templates.cells.cell_j=_.template(t("#tpl-cell-j").html());t("#tpl-cell-a").remove();t("#tpl-cell-b").remove();t("#tpl-cell-c").remove();t("#tpl-cell-d").remove();t("#tpl-cell-e").remove();t("#tpl-cell-f").remove();t("#tpl-cell-g").remove();t("#tpl-cell-h").remove();t("#tpl-cell-i").remove();t("#tpl-cell-j").remove()},initModel:function(){this.loadJsonFile(this._currentColumn)},nextModel:function(){var t=this._currentColumn+1;if(t<this._totalPreload){this._currentColumn=t;this.loadJsonFile(t)}else if(!this._firstLoad){this._firstLoad=true;Marcocom.EventManager.fireEvent(Marcocom.Event.MODEL_COLUMNS_COMPLETE,this)}else if(!this._dataFinished){this._currentColumn=t;this.loadJsonFile(t)}},loadJsonFile:function(e){var i=this._totalDataFiles-e;var n=this._directory+"column_"+i+".json";if(i>=0){Marcocom.EventManager.fireEvent(Marcocom.Event.MODEL_COLUMN_LOADING,this);t.ajax({url:n,cache:false,async:true,dataType:"json",success:t.proxy(this.parseColumn,this),error:t.proxy(this.loadError,this)})}else{this.loadError(null)}},parseColumn:function(t){var i=Math.abs(this._currentColumn%3);var n=this.injectColumn(i);console.log("COLUMN DATA RETURN:");console.dir(t);var r=new Marcocom.Model.Column(t,i,n,this._currentColumn);this._columns.push(r);!this._firstLoad?this.nextModel():e.EventManager.fireEvent(Marcocom.Event.MODEL_COLUMN_LOADED,this)},loadError:function(t){$log("LOAD ERROR!");this._dataFinished=true;Marcocom.EventManager.removeEventHandler(e.Event.MOSAIC_SCROLL_END,this.mosaicScrollHandler);Marcocom.EventManager.fireEvent(Marcocom.Event.MODEL_COLUMNS_NODATA,this)},injectColumn:function(e){var i=t('<li class="column col-style-'+e+" col-count-"+this._currentColumn+'"></li>');var n=i.appendTo(this._mosaic);return n}});e.Model.cellModel=Backbone.Model.extend({defaults:{CellType:"i",Ref:"",Date:new Date,Client:"",Title:"",JobTitle:"Hero",Article:"",URL:"",Dimensions:"",Image:[]},initialize:function(t){this.on("change:Viewed",function(t){var e=t.get("Viewed")});this.on("invalid",function(t,e){$log("invalid error:"+e)})},validate:function(t){},addViewed:function(){var t=Number(this.get("Viewed"))+1;this.set({Viewed:t})}});e.Model.Column=e.Model.extend({_cells:[],_style:null,_index:0,_collection:null,_construct:function(e,i,n,r){this._el=t(n);this._style=i;this._index=r;this.initModel(e)},initModel:function(i){var n=Backbone.Collection.extend({model:e.Model.cellModel});var r=this.patternFormatData(i);var s=t.map(r,function(t){return new e.Model.cellModel(t)});this._collection=new n(s);this.instantiateCells()},instantiateCells:function(){var t=this;this._collection.each(function(e){var i=new Marcocom.Model.CellView(e,t._el)})},patternFormatData:function(t){var e=[];if(this._index==0||this._index%3==0){var i=this.pullAncillaryData("d");i.CellType="d";if(i.Id)i.Id="0001";e.push(i)}for(var n=0;n<t.length;n++){var r=t[n].CellType;e.push(t[n])}return e},pullAncillaryData:function(t){var i;var n;if(t=="d"){i=Math.floor(Math.random()*e.ancillary_models.quote_data.length);n=e.ancillary_models.quote_data[i]}else if(t=="e"){i=Math.floor(Math.random()*e.ancillary_models.action_data.length);n=e.ancillary_models.action_data[i]}else if(t=="g"){i=Math.floor(Math.random()*e.ancillary_models.long_images.length);n=e.ancillary_models.long_images[i]}else if(t=="i"){n={id:"4"}}return n},getObjects:function(t,e,i){var n=[];for(var r in t){if(!t.hasOwnProperty(r))continue;if(typeof t[r]=="object"){n=n.concat(this.getObjects(t[r],e,i))}else if(r==e&&t[e]==i){n.push(t)}}return n}});e.Model.CellView=Backbone.View.extend({_tplname:null,_compiledTemplate:null,_style:null,_column:null,_model:{},initialize:function(t,e){this._model=t;this._column=e;this._style=this._model.get("CellType");this._tplname="cell_"+this._style;this.render()},render:function(){var t=Marcocom.templates.cells[this._tplname](this._model.toJSON());this.$el.html(t);this.setElement(this.$el);this.$el.appendTo(this._column)}});e.Model.Init();Marcocom._model=new e.Model.Mosaic("#slider-container","data/cells/")})(jQuery,Marcocom);(function(){var t=["android","webos","iphone","ipad","blackberry"];for(i in t){if(navigator.userAgent.toLowerCase().indexOf(t[i])!=-1){$(document).data("mobile",navigator.userAgent)}}})();(function(){var t;var e=function(){};var i=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var n=i.length;var r=window.console=window.console||{};while(n--){t=i[n];if(!r[t]){r[t]=e}}})();(function(t){t.topZIndex=function(e){return Math.max(0,Math.max.apply(null,t.map((e||"*")==="*"?t.makeArray(document.getElementsByTagName("*")):t(e),function(e){return parseFloat(t(e).css("z-index"))||null})))};t.fn.topZIndex=function(e){if(this.length===0){return this}e=t.extend({increment:1},e);var i=t.topZIndex(e.selector),n=e.increment;return this.each(function(){this.style.zIndex=i+=n})}})(jQuery);